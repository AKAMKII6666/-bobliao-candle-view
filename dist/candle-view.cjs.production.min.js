"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),i=require("@pixi/react"),a=e(require("@bobliao/use-jquery-hook")),o=e(require("bignumber.js")),r=require("lodash"),l=e(require("resize-observer-polyfill")),s=require("pixi.js");function u(e,t,n,i,a,o,r){try{var l=e[o](r),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(i,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){u(o,i,a,r,l,"next",e)}function l(e){u(o,i,a,r,l,"throw",e)}r(void 0)}))}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function h(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,b=(function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,i){var a=Object.create((t&&t.prototype instanceof d?t:d).prototype),o=new w(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(a,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var r=n.delegate;if(r){var l=y(r,n);if(l){if(l===c)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=u(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===c)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c={};function d(){}function h(){}function m(){}var g={};l(g,a,(function(){return this}));var f=Object.getPrototypeOf,b=f&&f(f(S([])));b&&b!==t&&n.call(b,a)&&(g=b);var p=m.prototype=d.prototype=Object.create(g);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var i;this._invoke=function(a,o){function r(){return new t((function(i,r){!function i(a,o,r,l){var s=u(e[a],e,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,r,l)}),(function(e){i("throw",e,r,l)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return i("throw",e,r,l)}))}l(s.arg)}(a,o,i,r)}))}return i=i?i.then(r,r):r()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,l(p,"constructor",m),l(m,"constructor",h),h.displayName=l(m,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,r,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},v(x.prototype),l(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,a,o){void 0===o&&(o=Promise);var r=new x(s(t,n,i,a),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},v(p),l(p,r,"Generator"),l(p,a,(function(){return this})),l(p,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=S,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return r.type="throw",r.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],r=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(f={exports:{}}),f.exports),p=function(e,t){return e=e||new Date,(t=t||"yyyy-MM-dd HH:mm:ss").replace("yyyy",e.getFullYear().toString()).replace("yy",e.getFullYear().toString().substring(2,4)).replace("MM",(e.getMonth()<9?"0":"")+(e.getMonth()+1).toString()).replace("dd",(e.getDate()<10?"0":"")+e.getDate().toString()).replace("HH",(e.getHours()<10?"0":"")+e.getHours().toString()).replace("mm",(e.getMinutes()<10?"0":"")+e.getMinutes().toString()).replace("ss",(e.getSeconds()<10?"0":"")+e.getSeconds().toString())},v=function(e,t,n){var i=new Date(e),a=Math.abs(i.getTimezoneOffset()/60);return"local"===n&&(n=a),"local"===t&&(t=a),i.setHours(i.getHours()-t+n),i.getTime()},x=function(e,t){return"string"==typeof e&&"auto"===e?t:"string"==typeof e&&-1!==e.indexOf("%")?t*(Number(e.replace("%",""))/100):"string"==typeof e&&-1!==e.indexOf("px")?Number(e.replace("px","")):"number"!=typeof e&&isNaN(Number(e))?(console.log("no useful length !"),0):Number(e)},y=function(e,t,n){return n*((e-t.start)/(t.end-t.start))},O=function(e,t){var n=[];if(e.length<300)for(var i,a=g(e);!(i=a()).done;){var o=i.value;Number(o.value)>=t.start&&Number(o.value)<=t.end&&n.push(o)}else n=M(e,t,"value");return n},j=function(e,t){return M(e,t,"time")},w=function(e,t){return new o(e).times(new o(10).exponentiatedBy(t)).toString()},S=function(e,t){return e.reduce((function(e,n,i){return e[n[t]]=n,e[n[t]].index=i,e}),{})},k=function(e,t){var n=new o(e),i=n.modulo(t);return n.minus(i).plus(t).integerValue(o.ROUND_FLOOR).toString()};function T(e,t,n,i){var a=function(e,t){return Number("object"==typeof e[t]||void 0!==i?e[t][i]:e[t])};if("forStart"===n&&t===a(e,0))return 0;if("forEnd"===n&&t===a(e,e.length-1))return e.length-1;for(var o,r=0,l=e.length-1;r<=l;)a(e,o=r+Math.floor((l-r)/2))===t?"forStart"===n?l=o-1:r=o+1:a(e,o)<t?r=o+1:l=o-1;return"forStart"===n?r:l}function A(e,t,n,i){if(void 0===e[0])return-1;if("forStart"===i&&t<=e[0][n])return 0;if("forEnd"===i&&t>=e[e.length-1][n])return e.length-1;for(var a,o=0,r=e.length-1;o<=r;)e[a=o+Math.floor((r-o)/2)][n]===t?"forStart"===i?r=a-1:o=a+1:e[a][n]<t?o=a+1:r=a-1;return"forStart"===i?o:r}var M=function(e,t,n){var i=A(e,t.start,n,"forStart"),a=A(e,t.end,n,"forEnd");return void 0===e[a=null===a?e.length-1:a]?[]:(a<e.length&&e[a][n]<t.end&&a++,e.slice(i=null===i?0:i,a))},D=function(e){return"number"==typeof e?e:+new Date(e)},C=function(e){for(var t=e.toString().trim().split(".")[0].split(""),n="",i=0,a=t.length-1;a>-1;a--)n=i%3==0&&0!=i?t[a]+","+n:t[a]+n,i++;return e.toString().split(".")[1]&&(n+="."+e.toString().split(".")[1]),n},F=function(e,t,n){void 0===t&&(t="en"),void 0===n&&(n=0);var i=e.toString();switch(t){case"en":i=L(e,n);break;case"ja":i=P(e,n);break;case"ko":i=E(e,n);break;case"zh":i=P(e,n);break;case"ru":i=L(e,n)}return i},E=function(e,t){void 0===t&&(t=0);var n=new o(e).toFixed().split("."),i=n[0].split("");return void 0!==n[1]&&n[1].split(""),i.length>=13?new o(e).dividedBy(new o(10).exponentiatedBy(12).toFixed()).toFixed(t,1)+"조":i.length>=9?new o(e).dividedBy(new o(10).exponentiatedBy(8).toFixed()).toFixed(t,1)+"억":i.length>=5?new o(e).dividedBy(new o(10).exponentiatedBy(4).toFixed()).toFixed(t,1)+"만":new o(e).toFixed(t)},P=function(e,t){void 0===t&&(t=0);var n=new o(e).toFixed().split("."),i=n[0].split("");return void 0!==n[1]&&n[1].split(""),i.length>=13?new o(e).dividedBy(new o(10).exponentiatedBy(12).toFixed()).toFixed(t,1)+"兆":i.length>=9?new o(e).dividedBy(new o(10).exponentiatedBy(8).toFixed()).toFixed(t,1)+"亿":i.length>=8?new o(e).dividedBy(new o(10).exponentiatedBy(7).toFixed()).toFixed(t,1)+"千萬":i.length>=7?new o(e).dividedBy(new o(10).exponentiatedBy(6).toFixed()).toFixed(t,1)+"百萬":i.length>=5?new o(e).dividedBy(new o(10).exponentiatedBy(4).toFixed()).toFixed(t,1)+"萬":new o(e).toFixed(t)},L=function(e,t){void 0===t&&(t=0);var n=new o(e).toFixed().split("."),i=n[0].split("");return void 0!==n[1]&&n[1].split(""),i.length>=11?new o(e).dividedBy(new o(10).exponentiatedBy(10).toFixed()).toFixed(t,1)+"T":i.length>=10?new o(e).dividedBy(new o(10).exponentiatedBy(9).toFixed()).toFixed(t,1)+"B":i.length>=7?new o(e).dividedBy(new o(10).exponentiatedBy(6).toFixed()).toFixed(t,1)+"M":i.length>=4?new o(e).dividedBy(new o(10).exponentiatedBy(3).toFixed()).toFixed(t,1)+"K":new o(e).toFixed(t)},N=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},z=function(){var e=t.useState(!1),n=e[0],i=e[1],a=t.useRef(null),o=t.useRef(null);return t.useEffect((function(){return!1===n&&i(!0),function(){i(!1)}}),[]),function(e,t){void 0===t&&(t=500),0!==t?(a.current=e,null===o.current&&(o.current=setTimeout((function(){null!==a.current&&(a.current(),a.current=null,o.current=null)}),t))):e()}},U={labelSpace:"90px",fontColor:"#454545",fontSize:"12px",netLineColor:"#dedede",lineColor:"#454545",tickColor:"#454545",tickLength:"3px",netLineMaxCount:34,netLineMinCount:3,netLineSize:1,lineSize:1,tickSize:1,backgroundColor:"#ffffff",tooltip:{enabled:!0,color:"#02121c",lineSize:.5,dashLength:4,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#454545",backGroundAlpha:1,formatter:function(e){return p(new Date(e.value),"yyyy-MM-dd HH:mm:ss")}}},initTimePoint:"now",displayPadding:.1},I={staticData:[],dynamicData:{enabled:!1,showLoading:!1,stopUserOperateWhenLoading:!1,dataFetchCountPreTime:160,dataFetchCallback:function(){var e=c(b.mark((function e(t,n,i){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()},candleStyles:{candleWidth:"80%",wickWidth:"1px",candleRiseColor:"#7de17c",candleFallColor:"#c85656",wickRiseColor:"#7de17c",wickFallColor:"#c85656",currentPriceTooltip:{enabled:!0,color:"#b9b42c",lineSize:.5,dashLength:8,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#b9b42c",backGroundAlpha:1,formatter:function(e){return(e=e).displayValue}}},viewLastPriceTooltip:{enabled:!0,color:"#b9b42c",lineSize:.5,dashLength:8,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#826abe",backGroundAlpha:.5,formatter:function(e){return(e=e).displayValue}}},volumChart:{enabled:!0,volumeChartHeight:"30%",alpha:.6,riseColor:"#d6dfc5",fallColor:"#c7c7c7",currentPriceTooltip:{enabled:!0,color:"#b9b42c",lineSize:.5,dashLength:8,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#b9b42c",backGroundAlpha:1,formatter:function(e,t){return void 0===t&&(t="en"),e=e,F(Number(e.displayValue),t,5)}}},viewLastPriceTooltip:{enabled:!0,color:"#b9b42c",lineSize:.5,dashLength:8,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#826abe",backGroundAlpha:.5,formatter:function(e,t){return void 0===t&&(t="en"),e=e,F(Number(e.displayValue),t,5)}}}}}},Y={title:"交易对:🚀BNB/USDT🚀这是CandleView组件示例V2⚡闪电版⚡",enableTitle:!0,enableinfo:!0,timeFormat:"1h",width:"auto",height:"500px",backgroundColor:"#fff",resizeDebounceTime:100,language:"zh",timeZone:{dataSourceTimeZone:0,fetchConditionTimeZone:0,displayTimeZone:0},yAxis:{labelSpace:"90px",formatter:function(e){return e.displayValue.toString()},fontColor:"#454545",fontSize:"12px",netLineColor:"#dedede",lineColor:"#454545",tickColor:"#454545",tickLength:"3px",netLineMaxCount:14,netLineMinCount:3,displayPadding:.3,tooltip:{enabled:!0,color:"#02121c",lineSize:.5,dashLength:4,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#454545",backGroundAlpha:1,formatter:function(e){return(e=e).displayValue}}}},xAxis:{labelSpace:"30px",fontColor:"#454545",fontSize:"12px",netLineColor:"#dedede",lineColor:"#454545",tickColor:"#454545",tickLength:"4px",netLineMaxCount:30,netLineMinCount:0,netLineSize:.5,initTimePoint:"now",displayPadding:0,tooltip:{enabled:!0,color:"#02121c",lineSize:.5,dashLength:4,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#454545",backGroundAlpha:1,formatter:function(e){return p(new Date(e.value),"yyyy-MM-dd HH:mm:ss")}}}},data:I},Z={zh:{timeFormat:{today:"今天",yesterday:"昨天",unitsecond:"秒",unitminute:"分",unithour:"点",unithalfOur:"点半",unitoclock:"点整",unitday:"号",unitdayst:"号",unitdaynd:"号",unitdayrd:"号",thisMonth:"这个月",nextMonth:"上个月",January:"一月份",February:"二月份",March:"三月份",April:"四月份",May:"五月份",June:"六月份",July:"七月份",August:"八月份",September:"九月份",October:"十月份",November:"十一月份",December:"十二月份",year:"年",thisyear:"今年",lastyear:"去年",oneMin:"1分钟",twoMin:"2分钟",threeMin:"3分钟",fiveMin:"5分钟",tenMin:"10分钟",fifteenMin:"15分钟",halfhour:"半小时",oneHour:"1小时",oneday:"1天",oneWeek:"1周",onemonth:"1个月",oneYear:"1年"}},en:{timeFormat:{today:"Today",yesterday:"Yesterday",unitsecond:"sec",unitminute:"min",unithour:"",unithalfOur:" O'clock past half",unitoclock:" O'clock",unitday:"th",unitdayst:"st",unitdaynd:"nd",unitdayrd:"rd",thisMonth:"This month",nextMonth:"Last month",January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec",year:"",thisyear:"This year",lastyear:"Last year",oneMin:"1 Minute",twoMin:"2 Minute",threeMin:"3 Minute",fiveMin:"5 Minute",tenMin:"10 Minute",fifteenMin:"15 Minute",halfhour:"Half Hour",oneHour:"One Hour",oneday:"One Day",oneWeek:"One Week",onemonth:"One Month",oneYear:"One Year"}}},H=function(e){if(void 0===e||0===e)return 0;var t=new Date,n=Math.abs(t.getTimezoneOffset()/60);return"local"===e&&(e=n),36e5*e},X={name:"1min",lang:"oneMin",timeGap:6e4,roundingFunction:function(e,t){var n=new Date(e);return n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+1),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-1),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+1*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-1*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-12e5,end:+new Date+6e5}:{start:+new Date(e)-12e5,end:+new Date(e)+6e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+Z[t].timeFormat.unitminute}},_={name:"10min",lang:"tenMin",timeGap:6e5,roundingFunction:function(e,t){var n=new Date(e);return n.getMinutes()>=50?n.setMinutes(50):n.getMinutes()>=40?n.setMinutes(40):n.getMinutes()>=30?n.setMinutes(30):n.getMinutes()>=20?n.setMinutes(20):n.getMinutes()>=10?n.setMinutes(10):n.getMinutes()>=0&&n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+10),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-10),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+10*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-10*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-12e5,end:+new Date+6e6}:{start:+new Date(e)-12e6,end:+new Date(e)+6e6}},formatter:function(e,t,n){return new Date(e).getMinutes()+Z[t].timeFormat.unitminute}},W={name:"15min",lang:"fifteenMin",timeGap:9e5,roundingFunction:function(e,t){var n=new Date(e);return n.getMinutes()>=45?n.setMinutes(45):n.getMinutes()>=30?n.setMinutes(30):n.getMinutes()>=15?n.setMinutes(15):n.getMinutes()>=0&&n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+15),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-15),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+15*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-15*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-162e5,end:+new Date+54e5}:{start:+new Date(e)-162e5,end:+new Date(e)+54e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+Z[t].timeFormat.unitminute}},V={name:"30min",lang:"halfhour",timeGap:18e5,roundingFunction:function(e,t){var n=new Date(e);return n.getMinutes()>30?n.setMinutes(30):n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+30),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-30),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+30*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-30*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-324e5,end:+new Date+108e5}:{start:+new Date(e)-324e5,end:+new Date(e)+108e5}},formatter:function(e,t,n){var i=new Date(e);return 30===i.getMinutes()?i.getHours()+Z[t].timeFormat.unithalfOur:i.getHours()+Z[t].timeFormat.unitoclock}},G={name:"1h",lang:"oneHour",timeGap:36e5,roundingFunction:function(e,t){var n=new Date(e);return n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setHours(n.getHours()+1),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setHours(n.getHours()-1),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setHours(i.getHours()+1*t),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setHours(i.getHours()-1*t),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-648e5,end:+new Date+216e5}:{start:+new Date(e)-648e5,end:+new Date(e)+216e5}},formatter:function(e,t,n){return new Date(e).getHours()+Z[t].timeFormat.unithour}},R={name:"1d",lang:"oneday",timeGap:864e5,roundingFunction:function(e,t){var n=new Date(e);return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setDate(n.getDate()+1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setDate(n.getDate()-1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setDate(i.getDate()+1*t),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+H(n)},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setDate(i.getDate()-1*t),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+H(n)},getInitTimeScope:function(e){return"now"===e?{start:+new Date-1728e6,end:+new Date+864e6}:{start:+new Date(e)-1728e6,end:+new Date(e)+864e6}},formatter:function(e,t,n){var i=new Date(e);return 1===i.getDate()?i.getDate()+Z[t].timeFormat.unitdayst:2===i.getDate()?i.getDate()+Z[t].timeFormat.unitdaynd:3===i.getDate()?i.getDate()+Z[t].timeFormat.unitdayrd:i.getDate()+Z[t].timeFormat.unitday}},B={name:"1m",lang:"onemonth",timeGap:2592e6,roundingFunction:function(e,t){var n=new Date(e);return n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMonth(n.getMonth()+1),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMonth(n.getMonth()-1),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMonth(i.getMonth()+1*t),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+H(n)},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMonth(i.getMonth()-1*t),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+H(n)},getInitTimeScope:function(e){return"now"===e?{start:+new Date-20736e6,end:+new Date+10368e6}:{start:+new Date(e)-20736e6,end:+new Date(e)+10368e6}},formatter:function(e,t,n){switch(new Date(e).getMonth()){case 0:return Z[t].timeFormat.January;case 1:return Z[t].timeFormat.February;case 2:return Z[t].timeFormat.March;case 3:return Z[t].timeFormat.April;case 4:return Z[t].timeFormat.May;case 5:return Z[t].timeFormat.June;case 6:return Z[t].timeFormat.July;case 7:return Z[t].timeFormat.August;case 8:return Z[t].timeFormat.September;case 9:return Z[t].timeFormat.October;case 10:return Z[t].timeFormat.November;case 11:return Z[t].timeFormat.December}}},q={name:"1y",lang:"oneYear",timeGap:31104e6,roundingFunction:function(e,t){var n=new Date(e);return n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setFullYear(n.getFullYear()+1),n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setFullYear(n.getFullYear()-1),n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+H(t)},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setFullYear(i.getFullYear()+1*t),i.setMonth(0),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+H(n)},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setFullYear(i.getFullYear()-1*t),i.setMonth(0),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+H(n)},getInitTimeScope:function(e){return"now"===e?{start:+new Date-93312e6,end:+new Date+93312e6}:{start:+new Date(e)-93312e6,end:+new Date(e)+93312e6}},formatter:function(e,t,n){return new Date(e).getFullYear()+Z[t].timeFormat.year}},J={"1min":X,"2min":{name:"2min",lang:"twoMin",timeGap:12e4,roundingFunction:function(e,t){for(var n=new Date(e),i=0;i<60;i+=2)n.getMinutes()>=i&&n.setMinutes(i);return n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+2),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-2),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+2*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-2*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-24e4,end:+new Date+12e5}:{start:+new Date(e)-24e5,end:+new Date(e)+12e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+Z[t].timeFormat.unitminute}},"3min":{name:"3min",lang:"threeMin",timeGap:18e4,roundingFunction:function(e,t){for(var n=new Date(e),i=0;i<60;i+=3)n.getMinutes()>=i&&n.setMinutes(i);return n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+3),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-3),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+3*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-3*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-36e4,end:+new Date+18e5}:{start:+new Date(e)-36e5,end:+new Date(e)+18e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+Z[t].timeFormat.unitminute}},"5min":{name:"5min",lang:"fiveMin",timeGap:3e5,roundingFunction:function(e,t){var n=new Date(e);return n.getMinutes()>=55?n.setMinutes(55):n.getMinutes()>=50?n.setMinutes(50):n.getMinutes()>=45?n.setMinutes(45):n.getMinutes()>=40?n.setMinutes(40):n.getMinutes()>=35?n.setMinutes(35):n.getMinutes()>=30?n.setMinutes(30):n.getMinutes()>=25?n.setMinutes(25):n.getMinutes()>=20?n.setMinutes(20):n.getMinutes()>=15?n.setMinutes(15):n.getMinutes()>=10?n.setMinutes(10):n.getMinutes()>=5?n.setMinutes(5):n.getMinutes()>=0&&n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+5),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-5),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+5*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-5*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-6e5,end:+new Date+3e6}:{start:+new Date(e)-6e6,end:+new Date(e)+3e6}},formatter:function(e,t,n){return new Date(e).getMinutes()+Z[t].timeFormat.unitminute}},"10min":_,"15min":W,"30min":V,"1h":G,"1d":R,"1w":{name:"1w",lang:"oneWeek",timeGap:6048e5,roundingFunction:function(e,t){var n=new Date(e),i=n.getDay(),a=0===i?-6:1-i;return new Date(n.setDate(n.getDate()+a)).getTime()+H(t)},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setDate(n.getDate()+7),n.setHours(0,0,0,0),Math.floor(n.getTime())+H(t)},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setDate(n.getDate()-7),n.setHours(0,0,0,0),Math.floor(n.getTime())+H(t)},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setDate(i.getDate()+7*t),i.setHours(0,0,0,0),Math.floor(i.getTime())+H(n)},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setDate(i.getDate()-7*t),i.setHours(0,0,0,0),Math.floor(i.getTime())+H(n)},getInitTimeScope:function(e){return"now"===e?{start:+new Date-3024e6,end:+new Date+3024e6}:{start:+new Date(e)-3024e6,end:+new Date(e)+3024e6}},formatter:function(e,t,n){var i=new Date(e);return 1===i.getDate()?i.getDate()+Z[t].timeFormat.unitdayst:2===i.getDate()?i.getDate()+Z[t].timeFormat.unitdaynd:3===i.getDate()?i.getDate()+Z[t].timeFormat.unitdayrd:i.getDate()+Z[t].timeFormat.unitday}},"1m":B,"1y":q},Q=function(e,t,n,i){var a=function(t,n){return Number("object"==typeof e[n]||void 0!==i?t[n][i]:t[n])},o=function(){return"1d"===n||"1w"===n||"1m"===n||"1y"===n?t:0};if(0===e.length)return null;var r=[],l=a(e,0),s=a(e,e.length-1),u=s-l,c={};u<36e5&&(c={"1min":X,"5min":W,"10min":_}),u>=36e5&&u<18e6&&(c={"15min":W,"30min":V,"1h":G}),u>=18e6&&u<126e6&&(c={"30min":V,"1h":G}),u>=126e6&&u<1296e6&&(c={"1h":G,"1d":R}),u>=1296e6&&u<4752e6&&(c={"1d":R,"1m":B}),u>=3024e6&&u<31536e6&&(c={"1d":R,"1m":B,"1y":q}),u>=31536e6&&(c={"1m":B,"1y":q});var h=function(t){var n={count:0,startIndex:0,step:0},r=t.roundingFunction(s,o()),l=T(e,r,"forEnd",i);if(null===l||-1===l)return n;if(l<=e.length/2)return n.count=1,n.startIndex=l,n.step=1e17,n;var u=t.backwardSingleUnit(a(e,l),o()),c=T(e.slice(0,l),u,"forEnd",i);if(null===c||-1===c)return n.count=1,n.startIndex=l,n.step=1e17,n;var d=l-1-c,h=function(e,t){return(t+=1)>=e?0:Math.floor((e-1)/t)+1}(l+1,d);return n.count=h,n.startIndex=l,n.step=d,n};for(var m in c)if(c.hasOwnProperty(m)&&"1w"!==m&&"2min"!==m&&"3min"!==m){var g=c[m];r.push(d({},h(g),{type:g}))}return r},K=t.createContext({}),$=function(){return t.useContext(K)},ee=i.PixiComponent("Rectangle",{create:function(){return new s.Graphics},applyProps:function(e,t,n){var i=Object.assign(!0,ne,n),a=te(i),o=a.x,r=a.y;e.clear(),e.beginFill(i.color||0,i.opacity),e.drawRect(o,r,i.size.width,i.size.height),e.endFill()}}),te=function(e){var t=e.position.x,n=e.position.y;return"center"===e.alignX&&(t=e.position.x-e.size.width/2),"right"===e.alignX&&(t=e.position.x-e.size.width),"center"===e.alignY&&(n=e.position.y-e.size.height/2),"bottom"===e.alignY&&(n=e.position.y-e.size.height),{x:t,y:n}},ne={color:s.utils.string2hex("#000000"),size:{width:100,height:100},position:{x:0,y:0},alignX:"left",alignY:"top",opacity:1},ie=i.PixiComponent("DashedLine",{create:function(){return new s.Graphics},applyProps:function(e,t,n){var i={color:s.utils.string2hex("#000000"),size:1,positionStart:{x:0,y:0},positionStop:{x:0,y:0},dashLength:4,spaceLength:3},a=Object.assign(!0,i,n);e.clear(),e.lineStyle(a.size,a.color),(e=function(e,t,n,i,a,o,r){void 0===o&&(o=5),void 0===r&&(r=5);var l=i-t,s=a-n,u=Math.sqrt(l*l+s*s),c=u/(o+r),d=o/(o+r),h=l/c*d,m=l/c-h,g=s/c*d,f=s/c-g;for(e.moveTo(t,n);u>0;)t+=h,n+=g,(u-=o)<0&&(t=i,n=a),e.lineTo(t,n),e.moveTo(t+=m,n+=f),u-=r;return e.moveTo(i,a),e}(e,a.positionStart.x,a.positionStart.y,a.positionStop.x,a.positionStop.y,4,3)).endFill()}}),ae=function(e,a){h(e);var o=xe(),r=t.useState(!1),l=r[0],u=r[1],c=t.useRef(null);t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var d=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ee,{color:s.utils.string2hex(o.hookObjs.xAxisObj.initArgs.backgroundColor),size:{width:o.hookObjs.xAxisObj.data.viewSize.width,height:o.hookObjs.xAxisObj.data.labelSpace},position:o.hookObjs.xAxisObj.data.linePosition,alignX:"left",alignY:"top"}))}),[o.hookObjs.yAxisObj.data.labelSpace,o.hookObjs.yAxisObj.data.viewSize,o.hookObjs.yAxisObj.data.linePosition,o.hookObjs.yAxisObj.data.lineColor,o.hookObjs.yAxisObj.initArgs.backgroundColor]),m=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ee,{color:s.utils.string2hex(o.hookObjs.xAxisObj.initArgs.lineColor),size:{width:o.hookObjs.xAxisObj.data.lineSize.width,height:o.hookObjs.xAxisObj.data.lineSize.size},position:o.hookObjs.xAxisObj.data.linePosition,alignX:"left",alignY:"top"}))}),[o.hookObjs.xAxisObj.data.lineSize.width,o.hookObjs.xAxisObj.data.lineSize.size,o.hookObjs.xAxisObj.data.linePosition,o.hookObjs.xAxisObj.initArgs.lineColor]),f=t.useMemo((function(){return function(){for(var e,t=[],i=0,a=g(o.hookObjs.xAxisObj.data.displayTickArr);!(e=a()).done;){var r=e.value;t.push(n.createElement(n.Fragment,{key:i+"_d"},n.createElement(ee,{color:s.utils.string2hex(r.color),size:{width:r.size,height:r.length},position:r.cPosition,alignX:"center",alignY:"top"}))),i++}return t}()}),[o.hookObjs.xAxisObj.data.displayTickArr]),b=t.useMemo((function(){return function(){for(var e,t,a=[],r=0,l=g(o.hookObjs.xAxisObj.data.displayTickArr);!(e=l()).done;){var u=e.value;a.push(n.createElement(n.Fragment,{key:r+"_a"},n.createElement(i.Text,{anchor:.5,x:u.cPosition.x,y:u.cPosition.y+o.hookObjs.xAxisObj.data.labelSpace/2,text:(t=void 0,void 0!==o.hookObjs.xAxisObj.initArgs.formatter?o.hookObjs.xAxisObj.initArgs.formatter(u):null==(t=u.displayValue)?void 0:t.toString()),resolution:2,style:new s.TextStyle({align:"center",fontSize:o.hookObjs.xAxisObj.initArgs.fontSize,fill:s.utils.string2hex(o.hookObjs.xAxisObj.initArgs.tickColor)})}))),r++}return a}()}),[o.hookObjs.xAxisObj.data.displayTickArr,o.hookObjs.xAxisObj.initArgs]),p=t.useMemo((function(){return o.hookObjs.xAxisObj.initArgs.tooltip.enabled&&null!==o.hookObjs.xAxisObj.data.tooltipState&&o.hookObjs.xAxisObj.data.tooltipIsShow?n.createElement(n.Fragment,null,n.createElement(ie,{color:s.utils.string2hex(o.hookObjs.xAxisObj.initArgs.tooltip.color),size:o.hookObjs.xAxisObj.data.tooltipState.size,positionStart:o.hookObjs.xAxisObj.data.tooltipState.position,positionStop:{x:o.hookObjs.xAxisObj.data.tooltipState.position.x,y:o.hookObjs.xAxisObj.data.tooltipState.length},dashLength:o.hookObjs.xAxisObj.initArgs.tooltip.dashLength,spaceLength:o.hookObjs.xAxisObj.initArgs.tooltip.spaceLength}),n.createElement(ee,{color:s.utils.string2hex(null==(e=o.hookObjs.xAxisObj.initArgs.tooltip)||null==(t=e.label)?void 0:t.backGroundColor),size:{width:(null==(a=c.current)?void 0:a.width)+25,height:o.hookObjs.xAxisObj.data.labelSpace},position:o.hookObjs.xAxisObj.data.tooltipState.position.x-(null==(y=c.current)?void 0:y.width)/2-12.5<0?{x:(null==(j=c.current)?void 0:j.width)/2+12.5,y:o.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.cPosition.y}:o.hookObjs.xAxisObj.data.tooltipState.position.x+(null==(O=c.current)?void 0:O.width)/2+12.5>o.hookObjs.xAxisObj.data.lineSize.width?{x:o.hookObjs.xAxisObj.data.lineSize.width-(null==(w=c.current)?void 0:w.width)/2-12.5,y:o.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.cPosition.y}:{x:o.hookObjs.xAxisObj.data.tooltipState.position.x,y:o.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.cPosition.y},alignX:"center",alignY:"top"}),n.createElement(ee,{color:s.utils.string2hex(null==(r=o.hookObjs.xAxisObj.initArgs.tooltip)||null==(l=r.label)?void 0:l.color),size:{width:o.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.size,height:o.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.length},position:{x:o.hookObjs.xAxisObj.data.tooltipState.position.x,y:o.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.cPosition.y},alignX:"center",alignY:"top"}),n.createElement(i.Text,{ref:c,anchor:.5,x:o.hookObjs.xAxisObj.data.tooltipState.position.x-(null==(b=c.current)?void 0:b.width)/2-12.5<0?(null==(v=c.current)?void 0:v.width)/2+12.5:o.hookObjs.xAxisObj.data.tooltipState.position.x+(null==(p=c.current)?void 0:p.width)/2+12.5>o.hookObjs.xAxisObj.data.lineSize.width?o.hookObjs.xAxisObj.data.lineSize.width-(null==(x=c.current)?void 0:x.width)/2-12.5:o.hookObjs.xAxisObj.data.tooltipState.position.x,y:o.hookObjs.xAxisObj.data.tooltipState.length+o.hookObjs.xAxisObj.data.labelSpace/2,text:null==(u=o.hookObjs.xAxisObj.initArgs.tooltip)||null==(d=u.label)?void 0:d.formatter(o.hookObjs.xAxisObj.data.tooltipState.relatedTickItem),resolution:2,style:new s.TextStyle({align:"center",fontSize:null==(h=o.hookObjs.xAxisObj.initArgs.tooltip)||null==(m=h.label)?void 0:m.fontsize,fill:s.utils.string2hex(null==(g=o.hookObjs.xAxisObj.initArgs.tooltip)||null==(f=g.label)?void 0:f.color)})})):null;var e,t,a,r,l,u,d,h,m,g,f,b,p,v,x,y,O,j,w}),[o.hookObjs.xAxisObj.data.tooltipState,o.hookObjs.xAxisObj.data.tooltipIsShow,o.hookObjs.xAxisObj.data.x,o.hookObjs.xAxisObj.initArgs.tooltip]);return n.createElement(n.Fragment,null,d,m,n.createElement(i.Container,{x:o.hookObjs.xAxisObj.data.x},f,b),p)},oe=t.memo(ae),re=function(e,a){var o,r,l,u;h(e);var c=xe(),m=t.useState(!1),g=m[0],f=m[1],b=t.useState(0),p=b[0],v=b[1],x=t.useRef(null),y=t.useRef(null),O=t.useRef(null),j=t.useRef(null);t.useEffect((function(){!1===g&&(f(!0),setTimeout((function(){v(+new Date)}),500))}),[g]),t.useEffect((function(){return function(){f(!1)}}),[]),t.useEffect((function(){return function(){setTimeout((function(){v(+new Date)}),500)}}),[c.initArgs.timeFormat]);var w=t.useMemo((function(){return null!=(e=c.hookObjs.candleObj.initArgs.candleStyles)&&e.viewLastPriceTooltip.enabled&&null!==c.hookObjs.candleObj.data.latestdisplayLatestCandle&&c.hookObjs.candleObj.data.latestdisplayLatestCandle?n.createElement(n.Fragment,null,n.createElement(ee,{color:s.utils.string2hex(null==(t=c.hookObjs.candleObj.initArgs.candleStyles)||null==(a=t.viewLastPriceTooltip)||null==(o=a.label)?void 0:o.backGroundColor),size:{width:c.hookObjs.yAxisObj.data.labelSpace,height:(null==(r=y.current)?void 0:r.height)+10},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestdisplayLatestCandle.position.y},alignX:"left",alignY:"center",opacity:null==(l=c.hookObjs.candleObj.initArgs.candleStyles)||null==(u=l.viewLastPriceTooltip)||null==(d=u.label)?void 0:d.backGroundAlpha}),n.createElement(ee,{color:s.utils.string2hex(null==(h=c.hookObjs.candleObj.initArgs.candleStyles)||null==(m=h.viewLastPriceTooltip)||null==(g=m.label)?void 0:g.color),size:{width:c.hookObjs.yAxisObj.data.tickLength,height:c.hookObjs.candleObj.data.latestdisplayLatestCandle.size},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestdisplayLatestCandle.position.y},alignX:"left",alignY:"center"}),n.createElement(i.Text,{ref:y,anchor:{x:0,y:.6},x:c.hookObjs.yAxisObj.data.linePosition.x+2*c.hookObjs.yAxisObj.data.tickLength,y:c.hookObjs.candleObj.data.latestdisplayLatestCandle.position.y,text:null==(f=c.hookObjs.candleObj.initArgs.candleStyles)||null==(b=f.viewLastPriceTooltip)||null==(p=b.label)?void 0:p.formatter(c.hookObjs.candleObj.data.latestdisplayLatestCandle),resolution:2,style:new s.TextStyle({fontSize:null==(v=c.hookObjs.candleObj.initArgs.candleStyles)||null==(x=v.viewLastPriceTooltip)||null==(O=x.label)?void 0:O.fontsize,fill:s.utils.string2hex(null==(j=c.hookObjs.candleObj.initArgs.candleStyles)||null==(w=j.viewLastPriceTooltip)||null==(S=w.label)?void 0:S.color)})})):null;var e,t,a,o,r,l,u,d,h,m,g,f,b,p,v,x,O,j,w,S}),[d({},c.hookObjs.candleObj.data.latestdisplayLatestCandle),p,d({},null==(o=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:o.viewLastPriceTooltip)]),S=t.useMemo((function(){return null!==c.hookObjs.candleObj.data.latestCandleItem&&null!=(e=c.hookObjs.candleObj.initArgs.candleStyles)&&e.currentPriceTooltip.enabled&&null!==c.hookObjs.candleObj.data.latestCandleToolTip&&c.hookObjs.candleObj.data.latestCandleToolTip?n.createElement(n.Fragment,null,n.createElement(ie,{color:s.utils.string2hex(c.hookObjs.candleObj.data.latestCandleItem.candleColor),size:c.hookObjs.candleObj.data.latestCandleToolTip.size,positionStart:c.hookObjs.candleObj.data.latestCandleToolTip.position,positionStop:{x:c.hookObjs.candleObj.data.latestCandleToolTip.length,y:c.hookObjs.candleObj.data.latestCandleToolTip.position.y},dashLength:null==(t=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:t.currentPriceTooltip.dashLength,spaceLength:null==(a=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:a.currentPriceTooltip.spaceLength}),n.createElement(ee,{color:s.utils.string2hex(c.hookObjs.candleObj.data.latestCandleItem.candleColor),size:{width:c.hookObjs.yAxisObj.data.labelSpace,height:(null==(o=x.current)?void 0:o.height)+10},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestCandleToolTip.position.y},alignX:"left",alignY:"center"}),n.createElement(ee,{color:s.utils.string2hex(null==(r=c.hookObjs.candleObj.initArgs.candleStyles)||null==(l=r.currentPriceTooltip)||null==(u=l.label)?void 0:u.color),size:{width:c.hookObjs.yAxisObj.data.tickLength,height:c.hookObjs.candleObj.data.latestCandleToolTip.size},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestCandleToolTip.position.y},alignX:"left",alignY:"center"}),n.createElement(i.Text,{ref:x,anchor:{x:0,y:.6},x:c.hookObjs.yAxisObj.data.linePosition.x+2*c.hookObjs.yAxisObj.data.tickLength,y:c.hookObjs.candleObj.data.latestCandleToolTip.position.y,text:null==(d=c.hookObjs.candleObj.initArgs.candleStyles)||null==(h=d.currentPriceTooltip)||null==(m=h.label)?void 0:m.formatter(c.hookObjs.candleObj.data.latestCandleToolTip),resolution:2,style:new s.TextStyle({fontSize:null==(g=c.hookObjs.candleObj.initArgs.candleStyles)||null==(f=g.currentPriceTooltip)||null==(b=f.label)?void 0:b.fontsize,fill:s.utils.string2hex(null==(p=c.hookObjs.candleObj.initArgs.candleStyles)||null==(v=p.currentPriceTooltip)||null==(y=v.label)?void 0:y.color)})})):null;var e,t,a,o,r,l,u,d,h,m,g,f,b,p,v,y}),[d({},c.hookObjs.candleObj.data.latestCandleToolTip),p,d({},null==(r=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:r.currentPriceTooltip)]),k=t.useMemo((function(){return null!=(e=c.hookObjs.candleObj.initArgs.candleStyles)&&e.volumChart.currentPriceTooltip.enabled&&null!==c.hookObjs.candleObj.data.latestVolumeToolTip&&c.hookObjs.candleObj.data.latestVolumeToolTip?n.createElement(n.Fragment,null,n.createElement(ie,{color:s.utils.string2hex(null==(t=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:t.volumChart.currentPriceTooltip.color),size:c.hookObjs.candleObj.data.latestVolumeToolTip.size,positionStart:c.hookObjs.candleObj.data.latestVolumeToolTip.position,positionStop:{x:c.hookObjs.candleObj.data.latestVolumeToolTip.length,y:c.hookObjs.candleObj.data.latestVolumeToolTip.position.y},dashLength:null==(a=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:a.volumChart.currentPriceTooltip.dashLength,spaceLength:null==(o=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:o.volumChart.currentPriceTooltip.spaceLength}),n.createElement(ee,{color:s.utils.string2hex(null==(r=c.hookObjs.candleObj.initArgs.candleStyles)||null==(l=r.volumChart.currentPriceTooltip)||null==(u=l.label)?void 0:u.backGroundColor),size:{width:c.hookObjs.yAxisObj.data.labelSpace,height:(null==(d=O.current)?void 0:d.height)+10},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestVolumeToolTip.position.y},alignX:"left",alignY:"center"}),n.createElement(ee,{color:s.utils.string2hex(null==(h=c.hookObjs.candleObj.initArgs.candleStyles)||null==(m=h.volumChart.currentPriceTooltip)||null==(g=m.label)?void 0:g.color),size:{width:c.hookObjs.yAxisObj.data.tickLength,height:c.hookObjs.candleObj.data.latestVolumeToolTip.size},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestVolumeToolTip.position.y},alignX:"left",alignY:"center"}),n.createElement(i.Text,{ref:O,anchor:{x:0,y:.6},x:c.hookObjs.yAxisObj.data.linePosition.x+2*c.hookObjs.yAxisObj.data.tickLength,y:c.hookObjs.candleObj.data.latestVolumeToolTip.position.y,text:null==(f=c.hookObjs.candleObj.initArgs.candleStyles)||null==(b=f.volumChart.currentPriceTooltip)||null==(p=b.label)?void 0:p.formatter(c.hookObjs.candleObj.data.latestVolumeToolTip,c.initArgs.language),resolution:2,style:new s.TextStyle({fontSize:null==(v=c.hookObjs.candleObj.initArgs.candleStyles)||null==(x=v.volumChart.currentPriceTooltip)||null==(y=x.label)?void 0:y.fontsize,fill:s.utils.string2hex(null==(j=c.hookObjs.candleObj.initArgs.candleStyles)||null==(w=j.volumChart.currentPriceTooltip)||null==(S=w.label)?void 0:S.color)})})):null;var e,t,a,o,r,l,u,d,h,m,g,f,b,p,v,x,y,j,w,S}),[d({},c.hookObjs.candleObj.data.latestVolumeToolTip),p,d({},null==(l=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:l.volumChart.currentPriceTooltip)]),T=t.useMemo((function(){return null!=(e=c.hookObjs.candleObj.initArgs.candleStyles)&&e.volumChart.viewLastPriceTooltip.enabled&&null!==c.hookObjs.candleObj.data.latestdisplayLatestVolume&&c.hookObjs.candleObj.data.latestdisplayLatestVolume?n.createElement(n.Fragment,null,n.createElement(ee,{color:s.utils.string2hex(null==(t=c.hookObjs.candleObj.initArgs.candleStyles)||null==(a=t.volumChart.viewLastPriceTooltip)||null==(o=a.label)?void 0:o.backGroundColor),size:{width:c.hookObjs.yAxisObj.data.labelSpace,height:(null==(r=j.current)?void 0:r.height)+10},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestdisplayLatestVolume.position.y},alignX:"left",alignY:"center",opacity:null==(l=c.hookObjs.candleObj.initArgs.candleStyles)||null==(u=l.volumChart.viewLastPriceTooltip)||null==(d=u.label)?void 0:d.backGroundAlpha}),n.createElement(ee,{color:s.utils.string2hex(null==(h=c.hookObjs.candleObj.initArgs.candleStyles)||null==(m=h.volumChart.viewLastPriceTooltip)||null==(g=m.label)?void 0:g.color),size:{width:c.hookObjs.yAxisObj.data.tickLength,height:c.hookObjs.candleObj.data.latestdisplayLatestVolume.size},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestdisplayLatestVolume.position.y},alignX:"left",alignY:"center"}),n.createElement(i.Text,{ref:j,anchor:{x:0,y:.6},x:c.hookObjs.yAxisObj.data.linePosition.x+2*c.hookObjs.yAxisObj.data.tickLength,y:c.hookObjs.candleObj.data.latestdisplayLatestVolume.position.y,text:null==(f=c.hookObjs.candleObj.initArgs.candleStyles)||null==(b=f.volumChart.viewLastPriceTooltip)||null==(p=b.label)?void 0:p.formatter(c.hookObjs.candleObj.data.latestdisplayLatestVolume,c.initArgs.language),resolution:2,style:new s.TextStyle({fontSize:null==(v=c.hookObjs.candleObj.initArgs.candleStyles)||null==(x=v.volumChart.viewLastPriceTooltip)||null==(y=x.label)?void 0:y.fontsize,fill:s.utils.string2hex(null==(O=c.hookObjs.candleObj.initArgs.candleStyles)||null==(w=O.volumChart.viewLastPriceTooltip)||null==(S=w.label)?void 0:S.color)})})):null;var e,t,a,o,r,l,u,d,h,m,g,f,b,p,v,x,y,O,w,S}),[d({},c.hookObjs.candleObj.data.latestdisplayLatestVolume),p,d({},null==(u=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:u.volumChart.viewLastPriceTooltip)]);return n.createElement(n.Fragment,null,T,k,w,S)},le=t.memo(re),se=function(e,a){h(e);var o=xe(),r=t.useState(!1),l=r[0],u=r[1],c=t.useRef(null);t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var d=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ee,{color:s.utils.string2hex(o.hookObjs.yAxisObj.initArgs.backgroundColor),size:{width:o.hookObjs.yAxisObj.data.labelSpace,height:o.hookObjs.yAxisObj.data.viewSize.height},position:o.hookObjs.yAxisObj.data.linePosition,alignX:"left",alignY:"top"}))}),[o.hookObjs.yAxisObj.data.labelSpace,o.hookObjs.yAxisObj.data.viewSize,o.hookObjs.yAxisObj.data.linePosition,o.hookObjs.yAxisObj.data.lineColor,o.hookObjs.yAxisObj.initArgs.backgroundColor]),m=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ee,{color:o.hookObjs.yAxisObj.data.lineColor,size:{width:o.hookObjs.yAxisObj.data.lineSize.size,height:o.hookObjs.yAxisObj.data.viewSize.height},position:o.hookObjs.yAxisObj.data.linePosition,alignX:"left",alignY:"top"}))}),[o.hookObjs.yAxisObj.data.viewSize,o.hookObjs.yAxisObj.data.lineSize,o.hookObjs.yAxisObj.data.linePosition,o.hookObjs.yAxisObj.data.lineColor]),f=t.useMemo((function(){return function(){for(var e,t=[],i=0,a=g(o.hookObjs.yAxisObj.data.displayTickArr);!(e=a()).done;){var r=e.value;t.push(n.createElement(ee,{key:i+"_a",color:s.utils.string2hex(r.color),size:{width:r.length,height:r.size},position:r.cPosition,alignX:"left",alignY:"center"})),i++}return t}()}),[o.hookObjs.yAxisObj.data.displayTickArr]),b=t.useMemo((function(){return function(){for(var e,t=[],a=0,r=g(o.hookObjs.yAxisObj.data.displayTickArr);!(e=r()).done;){var l=e.value;t.push(n.createElement(i.Text,{key:a+"_b",anchor:{x:0,y:.6},x:l.cPosition.x+2*l.length,y:l.cPosition.y,text:o.hookObjs.yAxisObj.initArgs.formatter(l),resolution:2,style:new s.TextStyle({fontSize:o.hookObjs.yAxisObj.initArgs.fontSize,fill:s.utils.string2hex(o.hookObjs.yAxisObj.initArgs.tickColor)})})),a++}return t}()}),[o.hookObjs.yAxisObj.data.displayTickArr,o.hookObjs.yAxisObj.initArgs]),p=t.useMemo((function(){return o.hookObjs.yAxisObj.initArgs.tooltip.enabled&&null!==o.hookObjs.yAxisObj.data.tooltipState&&o.hookObjs.yAxisObj.data.tooltipIsShow?n.createElement(n.Fragment,null,n.createElement(ie,{color:s.utils.string2hex(o.hookObjs.yAxisObj.initArgs.tooltip.color),size:o.hookObjs.yAxisObj.data.tooltipState.size,positionStart:o.hookObjs.yAxisObj.data.tooltipState.position,positionStop:{x:o.hookObjs.yAxisObj.data.tooltipState.length,y:o.hookObjs.yAxisObj.data.tooltipState.position.y},dashLength:o.hookObjs.yAxisObj.initArgs.tooltip.dashLength,spaceLength:o.hookObjs.yAxisObj.initArgs.tooltip.spaceLength}),n.createElement(ee,{color:s.utils.string2hex(null==(e=o.hookObjs.yAxisObj.initArgs.tooltip)||null==(t=e.label)?void 0:t.backGroundColor),size:{width:o.hookObjs.yAxisObj.data.labelSpace,height:(null==(a=c.current)?void 0:a.height)+10},position:{x:o.hookObjs.yAxisObj.data.linePosition.x,y:o.hookObjs.yAxisObj.data.tooltipState.position.y},alignX:"left",alignY:"center"}),n.createElement(ee,{color:s.utils.string2hex(null==(r=o.hookObjs.yAxisObj.initArgs.tooltip)||null==(l=r.label)?void 0:l.color),size:{width:o.hookObjs.yAxisObj.data.tickLength,height:o.hookObjs.yAxisObj.initArgs.tickSize},position:{x:o.hookObjs.yAxisObj.data.linePosition.x,y:o.hookObjs.yAxisObj.data.tooltipState.position.y},alignX:"left",alignY:"center"}),n.createElement(i.Text,{ref:c,anchor:{x:0,y:.6},x:o.hookObjs.yAxisObj.data.linePosition.x+2*o.hookObjs.yAxisObj.data.tickLength,y:o.hookObjs.yAxisObj.data.tooltipState.position.y,text:null==(u=o.hookObjs.yAxisObj.initArgs.tooltip)||null==(d=u.label)?void 0:d.formatter(o.hookObjs.yAxisObj.data.tooltipState),resolution:2,style:new s.TextStyle({fontSize:null==(h=o.hookObjs.yAxisObj.initArgs.tooltip)||null==(m=h.label)?void 0:m.fontsize,fill:s.utils.string2hex(null==(g=o.hookObjs.yAxisObj.initArgs.tooltip)||null==(f=g.label)?void 0:f.color)})})):null;var e,t,a,r,l,u,d,h,m,g,f}),[o.hookObjs.yAxisObj.data.tooltipState,o.hookObjs.yAxisObj.data.tooltipIsShow,o.hookObjs.yAxisObj.initArgs.tooltip]);return n.createElement(n.Fragment,null,d,m,f,b,n.createElement(le,null),p)},ue=t.memo(se),ce=function(e,a){h(e);var o=xe(),r=t.useState(!1),l=r[0],u=r[1],c=(t.useRef(null),function(e,t){var n,i,a,r,l,s,u,c;return"rise"===e&&"wick"===t?null==(n=o.initArgs.data)||null==(i=n.candleStyles)?void 0:i.wickRiseColor:"fall"===e&&"wick"===t?null==(a=o.initArgs.data)||null==(r=a.candleStyles)?void 0:r.wickFallColor:"rise"===e&&"candle"===t?null==(l=o.initArgs.data)||null==(s=l.candleStyles)?void 0:s.candleRiseColor:"fall"===e&&"candle"===t?null==(u=o.initArgs.data)||null==(c=u.candleStyles)?void 0:c.candleFallColor:""});t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var d=t.useMemo((function(){return 0===o.hookObjs.candleObj.data.displayCandleData.length||o.hookObjs.candleObj.data.isDQuickUpdateing?[]:function(){for(var e,t=[],i=g(o.hookObjs.candleObj.data.displayCandleData);!(e=i()).done;){var a=e.value;t.push(n.createElement(ee,{key:a.time+"_candle",color:s.utils.string2hex(c(a.candleStateus,"candle")),size:{width:a.candleWidth,height:a.candleLength},position:{x:a.currentTick.cPosition.x,y:a.candlePixPosition.y},alignX:"center",alignY:"top"}))}return t}()}),[o.hookObjs.candleObj.data.displayCandleData,o.hookObjs.candleObj.data.isDQuickUpdateing,o.initArgs.data.candleStyles.candleFallColor,o.initArgs.data.candleStyles.candleRiseColor]),m=t.useMemo((function(){return 0===o.hookObjs.candleObj.data.displayCandleData.length?null:function(){for(var e,t=[],i=g(o.hookObjs.candleObj.data.displayCandleData);!(e=i()).done;){var a=e.value;t.push(n.createElement(ee,a.isEscaped?{key:a.time+"_wick",color:0,size:{width:0,height:0},position:{x:0,y:0},alignX:"center",alignY:"top"}:{key:a.time+"_wick",color:s.utils.string2hex(c(a.candleStateus,"wick")),size:{width:a.wickWidth,height:a.wickLength},position:{x:a.currentTick.cPosition.x,y:a.wickPixPosition.y},alignX:"center",alignY:"top"}))}return t}()}),[o.hookObjs.candleObj.data.displayCandleData,o.hookObjs.candleObj.data.isDQuickUpdateing,o.initArgs.data.candleStyles.wickFallColor,o.initArgs.data.candleStyles.wickFallColor]);return n.createElement(n.Fragment,null,n.createElement(i.Container,{x:o.hookObjs.xAxisObj.data.x,y:o.hookObjs.candleObj.data.miny,scale:{x:1,y:o.hookObjs.candleObj.data.yScale}},m,d))},de=t.memo(ce),he=function(e,a){h(e);var o=xe(),r=t.useState(!1),l=r[0],u=r[1];t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var c=t.useMemo((function(){return function(){for(var e,t=[],i=0,a=g(o.hookObjs.xAxisObj.data.netLineArr);!(e=a()).done;){var r=e.value;t.push(n.createElement(n.Fragment,{key:i+"_c"},n.createElement(ee,{color:s.utils.string2hex(o.hookObjs.xAxisObj.initArgs.netLineColor),size:{width:r.size,height:r.length},position:r.cPosition,alignX:"center",alignY:"top"}))),i++}return t}()}),[o.hookObjs.xAxisObj.data.netLineArr,o.hookObjs.xAxisObj.initArgs.netLineColor]),d=t.useMemo((function(){return function(){for(var e,t=[],i=0,a=g(o.hookObjs.yAxisObj.data.netLineArr);!(e=a()).done;){var r=e.value;t.push(n.createElement(n.Fragment,{key:i+"_b"},n.createElement(ee,{color:s.utils.string2hex(o.hookObjs.yAxisObj.initArgs.netLineColor),size:{width:r.length,height:r.size},position:r.cPosition,alignX:"left",alignY:"center"}))),i++}return t}()}),[o.hookObjs.yAxisObj.data.netLineArr,o.hookObjs.yAxisObj.initArgs.netLineColor]);return n.createElement(n.Fragment,null,n.createElement(i.Container,{x:o.hookObjs.xAxisObj.data.x},n.createElement(n.Fragment,null,c)),d)},me=t.memo(he),ge=function(e,a){h(e);var o=xe(),r=t.useState(!1),l=r[0],u=r[1];t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var c=t.useMemo((function(){return function(){if(!o.hookObjs.candleObj.initArgs.candleStyles.volumChart.enabled)return[];for(var e,t=[],i=function(){var i,a;r=e.value;var l=null==(i=o.hookObjs.candleObj.initArgs.candleStyles)||null==(a=i.volumChart)?void 0:a.alpha,u=o.hookObjs.candleObj.data.volumChartPixHeight*(Number(r.volume)/o.hookObjs.candleObj.data.volumChartViewMax);t.push(r.isEscaped?n.createElement(n.Fragment,{key:r.time+"_volume"}):n.createElement(ee,{key:r.time+"_volume",color:s.utils.string2hex("rise"===r.candleStateus?o.hookObjs.candleObj.initArgs.candleStyles.volumChart.riseColor:o.hookObjs.candleObj.initArgs.candleStyles.volumChart.fallColor),opacity:o.hookObjs.candleObj.data.isDQuickUpdateing?1:l,size:{width:o.hookObjs.candleObj.data.isDQuickUpdateing?1:r.candleWidth,height:u},position:{x:r.currentTick.cPosition.x,y:o.hookObjs.xAxisObj.data.linePosition.y},alignX:"center",alignY:"bottom"}))},a=g(o.hookObjs.candleObj.data.displayCandleData);!(e=a()).done;){var r;i()}return t}()}),[o.hookObjs.candleObj.data.displayCandleData,o.hookObjs.candleObj.data.isDQuickUpdateing,o.hookObjs.candleObj.data.volumChartViewMax,o.hookObjs.candleObj.data.volumChartPixHeight,o.hookObjs.candleObj.initArgs.candleStyles.volumChart.riseColor,o.hookObjs.candleObj.initArgs.candleStyles.volumChart.fallColor,o.hookObjs.candleObj.initArgs.candleStyles.volumChart.alpha,o.hookObjs.candleObj.initArgs.candleStyles.volumChart.enabled]);return n.createElement(n.Fragment,null,n.createElement(i.Container,{x:o.hookObjs.xAxisObj.data.x},c))},fe=t.memo(ge),be=function(e,i){h(e);var a=$(),r=t.useState(!1),l=r[0],s=r[1];t.useEffect((function(){!1===l&&s(!0)}),[l]),t.useEffect((function(){return function(){s(!1)}}),[]);var u=t.useMemo((function(){return a.initArgs.enableTitle?n.createElement("div",{className:"title"},a.initArgs.title):null}),[a.initArgs.title]),c=t.useMemo((function(){return function(){if(!a.initArgs.enableinfo)return null;if(null!==a.hookObjs.xAxisObj.data.tooltipState&&a.hookObjs.xAxisObj.data.tooltipIsShow&&null!=a.hookObjs.candleObj.data.cursorCandleItem){var e,t,i,r,l=a.hookObjs.xAxisObj.data.tooltipState,s=a.hookObjs.candleObj.data.cursorCandleItem;return n.createElement(n.Fragment,null,n.createElement("div",{className:"info"},n.createElement("div",{className:"timetype"},n.createElement("label",null,Z[a.initArgs.language].timeFormat[null==(e=a.hookObjs.xAxisObj.data.currentTimeType)?void 0:e.lang])),n.createElement("div",null,n.createElement("span",null,"Date:"),n.createElement("label",null,null==(t=a.hookObjs.xAxisObj.initArgs.tooltip)||null==(i=t.label)?void 0:i.formatter(l.relatedTickItem)),n.createElement("label",null,"GMT +",null==(r=a.initArgs.timeZone)?void 0:r.displayTimeZone)),n.createElement("div",null,n.createElement("span",null,"Open:"),n.createElement("label",null,C(Number(new o(s.open).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Close:"),n.createElement("label",null,C(Number(new o(s.close).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"High:"),n.createElement("label",null,C(Number(new o(s.high).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Low:"),n.createElement("label",null,C(Number(new o(s.low).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Volume:"),n.createElement("label",null,C(Number(new o(s.volume).toFixed(3)))))))}if(null!==a.hookObjs.candleObj.data.latestCandleItem){var u,c,d,h,m=a.hookObjs.candleObj.data.latestCandleItem;return n.createElement(n.Fragment,null,n.createElement("div",{className:"info"},n.createElement("div",{className:"timetype"},n.createElement("label",null,Z[a.initArgs.language].timeFormat[null==(u=a.hookObjs.xAxisObj.data.currentTimeType)?void 0:u.lang])),n.createElement("div",null,n.createElement("span",null,"Date:"),n.createElement("label",null,null==(c=a.hookObjs.xAxisObj.initArgs.tooltip)||null==(d=c.label)?void 0:d.formatter({value:m.time})),n.createElement("label",null,"GMT +",null==(h=a.initArgs.timeZone)?void 0:h.displayTimeZone)),n.createElement("div",null,n.createElement("span",null,"Open:"),n.createElement("label",null,C(Number(new o(m.open).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Current:"),n.createElement("label",null,C(Number(new o(m.close).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"High:"),n.createElement("label",null,C(Number(new o(m.high).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Low:"),n.createElement("label",null,C(Number(new o(m.low).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Volume:"),n.createElement("label",null,C(Number(new o(m.volume).toFixed(3)))))))}return null}()}),[a.hookObjs.candleObj.data.latestCandleItem,a.hookObjs.xAxisObj.data.tooltipIsShow,a.hookObjs.candleObj.data.cursorCandleItem]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"infoDisplayLayer"},n.createElement(n.Fragment,null,u,c)))},pe=function(e,i){var a,o,r=e.color,l=void 0===r?"black":r,s=$(),u=t.useState(!1),c=u[0],d=u[1];return t.useEffect((function(){!1===c&&d(!0)}),[c]),t.useEffect((function(){return function(){d(!1)}}),[]),null!=(a=s.initArgs.data)&&null!=(o=a.dynamicData)&&o.showLoading&&s.hookObjs.candleObj.data.isFetchingData?n.createElement(n.Fragment,null,n.createElement("div",{className:"cdcdv_l_container "+l})):s.hookObjs.candleObj.data.isFinishedInit?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,n.createElement("div",{className:"cdcdv_l_container "+l}))},ve=t.createContext({}),xe=function(){return t.useContext(ve)},ye=function(e,o){h(e);var r=$(),s=a(),u=function(){var e=t.useState(!1),n=e[0],i=e[1],a=t.useRef(null),o=t.useRef(null);return t.useEffect((function(){return!1===n&&i(!0),function(){i(!1)}}),[]),function(e,t){void 0===t&&(t=500),0!==t?(a.current=e,null!==o.current&&clearTimeout(o.current),o.current=setTimeout((function(){null!==a.current&&(a.current(),a.current=null)}),t)):e()}}(),d=t.useState(!1),m=d[0],g=d[1],f=t.useState({x:0,y:0}),p=f[0],v=f[1],y=t.useState({x:0,y:0})[1],O=t.useState(!1),j=O[0],w=O[1],S=t.useState({x:0,y:0}),k=S[0],T=S[1],A=t.useState({x:0,y:0}),M=A[0],D=A[1],C=t.useState(0),F=C[0],E=C[1],P=t.useState(!1),L=P[0],z=P[1],U=t.useRef(null),I=t.useRef(null),Y=function(){var e=c(b.mark((function e(){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(),H(),r.funcs.setcanvasBackgroundColor(r.initArgs.backgroundColor);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){"auto"===r.initArgs.height&&(s(U.current).parent().css("overflow","hidden"),s(U.current).parent().css("position","relative")),0===s(U.current).parent().height()&&"auto"===r.initArgs.height&&s(U.current).parent().height(500),0===s(U.current).parent()||"auto"!==r.initArgs.height||0===s(U.current).next().length&&0===s(U.current).prev().length||(r.initArgs.height=500),r.funcs.setcanvasWidth(x(r.initArgs.width,s(U.current).parent().width())),r.funcs.setcanvasHeight(x(r.initArgs.height,s(U.current).parent().height()));var e=s(U.current).offset();v({x:e.left,y:e.top})},H=function(){null!==U.current&&(I.current=new l((function(e){e.length>0&&(0!==r.initArgs.resizeDebounceTime?u((function(){Z()}),r.initArgs.resizeDebounceTime):Z())})),I.current.observe(s(U.current).parent()[0]))},X=function(e){return e.preventDefault()};return t.useEffect((function(){!1===m&&(g(!0),Y(),U.current.addEventListener("wheel",X))}),[m]),t.useEffect((function(){return function(){g(!1),null!==I.current&&(I.current.disconnect(),I.current=null),U.current.removeEventListener("wheel",X)}}),[]),n.createElement(n.Fragment,null,n.createElement("div",{className:"cvcv_container",ref:U,style:{width:r.data.canvasWidth+"px",height:r.data.canvasHeight+"px",backgroundColor:r.initArgs.backgroundColor},onMouseDown:function(e){var t,n;!0===(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&r.hookObjs.candleObj.data.isFetchingData||(w(!0),T({x:e.pageX,y:e.pageY}),y({x:e.pageX-p.x,y:e.pageY-p.y}))},onMouseMove:function(e){var t,n;!0===(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&r.hookObjs.candleObj.data.isFetchingData||(j?r.hookObjs.xAxisObj.funcs.moveContainer(k.x,e.pageX,!1):r.hookObjs.xAxisObj.funcs.tooltipMove({x:e.pageX-p.x,y:e.pageY-p.y},!0),r.hookObjs.yAxisObj.funcs.tooltipMove({x:e.pageX-p.x,y:e.pageY-p.y},!0),y({x:e.pageX-p.x,y:e.pageY-p.y}))},onMouseUp:function(e){var t,n;!0===(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&r.hookObjs.candleObj.data.isFetchingData||(r.hookObjs.xAxisObj.funcs.moveContainer(k.x,e.pageX,!0),w(!1),T({x:0,y:0}),y({x:e.pageX-p.x,y:e.pageY-p.y}))},onWheel:function(e){var t,n;if(!0!==(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)||!r.hookObjs.candleObj.data.isFetchingData){var i="zoomIn";return e.deltaY>0&&(i="zoomOut"),r.hookObjs.xAxisObj.funcs.scale(e.pageX,r.hookObjs.xAxisObj.data.scaleStep,i),e.nativeEvent.stopPropagation(),!1}},onMouseEnter:function(e){var t,n;!0===(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&r.hookObjs.candleObj.data.isFetchingData||(y({x:e.pageX-p.x,y:e.pageY-p.y}),r.hookObjs.xAxisObj.funcs.tooltipMove({x:e.pageX-p.x,y:e.pageY-p.y},!0),r.hookObjs.yAxisObj.funcs.tooltipMove({x:e.pageX-p.x,y:e.pageY-p.y},!0))},onMouseLeave:function(e){var t,n;!0===(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&r.hookObjs.candleObj.data.isFetchingData||(y({x:e.pageX-p.x,y:e.pageY-p.y}),r.hookObjs.xAxisObj.funcs.tooltipMove({x:e.pageX-p.x,y:e.pageY-p.y},!1),r.hookObjs.yAxisObj.funcs.tooltipMove({x:e.pageX-p.x,y:e.pageY-p.y},!1))},onTouchStart:function(e){var t,n;if(!0!==(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)||!r.hookObjs.candleObj.data.isFetchingData){if(void 0!==e.targetTouches[0]&&void 0!==e.targetTouches[1])return z(!0),void E(N({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},{x:e.targetTouches[1].pageX,y:e.targetTouches[1].pageY}));w(!0),T({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}),D({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}),y({x:e.targetTouches[0].pageX-p.x,y:e.targetTouches[0].pageY-p.y})}},onTouchMove:function(e){var t,n;if(!0!==(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)||!r.hookObjs.candleObj.data.isFetchingData)if(void 0===e.targetTouches[0]||void 0===e.targetTouches[1])j?r.hookObjs.xAxisObj.funcs.moveContainer(k.x,e.targetTouches[0].pageX,!1):r.hookObjs.xAxisObj.funcs.tooltipMove({x:e.targetTouches[0].pageX-p.x,y:e.targetTouches[0].pageY-p.y},!0),r.hookObjs.yAxisObj.funcs.tooltipMove({x:e.targetTouches[0].pageX-p.x,y:e.targetTouches[0].pageY-p.y},!0),y({x:e.targetTouches[0].pageX-p.x,y:e.targetTouches[0].pageY-p.y}),D({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}),e.cancelable=!0,e.stopPropagation();else{var i=Math.min(e.targetTouches[0].pageX,e.targetTouches[1].pageX),a=(Math.max(e.targetTouches[0].pageX,e.targetTouches[1].pageX)-i)/2+i,o=N({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},{x:e.targetTouches[1].pageX,y:e.targetTouches[1].pageY});if(Math.abs(o-F)>3){E(N({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},{x:e.targetTouches[1].pageX,y:e.targetTouches[1].pageY}));var l="zoomIn";o-F<0&&(l="zoomOut"),r.hookObjs.xAxisObj.funcs.scale(a,r.hookObjs.xAxisObj.data.scaleStep,l)}}},onTouchEnd:function(e){var t,n;!0===(null==(t=r.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&r.hookObjs.candleObj.data.isFetchingData||(L?z(!1):(r.hookObjs.xAxisObj.funcs.moveContainer(k.x,M.x,!0),w(!1),T({x:0,y:0}),y({x:M.x-p.x,y:M.y-p.y})))}},n.createElement(pe,{color:"white"}),n.createElement(be,null),n.createElement(i.Stage,{options:{backgroundAlpha:0,width:r.data.canvasWidth,height:r.data.canvasHeight,resolution:2},style:{width:r.data.canvasWidth,height:r.data.canvasHeight,backgroundColor:r.initArgs.backgroundColor},width:r.data.canvasWidth,height:r.data.canvasHeight,raf:!1,renderOnComponentChange:!0},n.createElement(ve.Provider,{value:r},n.createElement(me,null),n.createElement(fe,null),n.createElement(de,null),n.createElement(oe,null),n.createElement(ue,null)))))};exports.default={CandleView:t.memo(ye),useCandleView:function(e){var n,i=t.useState(r.merge(Y,e)),a=i[0],l=i[1],s=function(e,n,i){z();var a=t.useState(Object.assign(!0,U,e)),o=a[0],r=a[1],l=t.useState(-1),s=l[0],u=l[1],c=t.useState(0),d=c[0],h=c[1],m=t.useState(0),f=m[0],b=m[1],p=t.useState(0),j=p[0],w=p[1],k=t.useState(0),T=k[0],A=k[1],M=t.useState(),D=M[0],C=M[1],F=t.useState(!1),E=F[0],P=F[1],L=t.useState(!1),N=L[0],I=L[1],Y=t.useState(-1),Z=Y[0],H=Y[1],X=t.useState(-1),_=X[0],W=X[1],V=t.useState(-1),G=V[0],R=V[1],B=t.useState({}),q=B[0],K=B[1],$=t.useState(!1),ee=$[0],te=$[1],ne=t.useState(0),ie=ne[0],ae=ne[1],oe=t.useState(0),re=oe[0],le=oe[1],se=t.useState(1)[1],ue=t.useState({start:0,end:0}),ce=ue[0],de=ue[1],he=t.useState(.1)[0],me=t.useState(0),ge=me[0],fe=me[1],be=t.useState(null),pe=be[0],ve=be[1],xe=t.useState({start:0,end:0}),ye=xe[0],Oe=xe[1],je=t.useState({start:0,end:0}),we=je[0],Se=je[1],ke=t.useState({width:0,height:0}),Te=ke[0],Ae=ke[1],Me=t.useState(0)[1],De=t.useState({x:0,y:0}),Ce=De[0],Fe=De[1],Ee=t.useState(0),Pe=Ee[0],Le=Ee[1],Ne=t.useState({width:0,size:0}),ze=Ne[0],Ue=Ne[1],Ie=t.useState(""),Ye=Ie[0],Ze=Ie[1],He=t.useState([]),Xe=He[0],_e=He[1],We=t.useState(0),Ve=We[0],Ge=We[1],Re=t.useState(0),Be=Re[0],qe=Re[1],Je=t.useState([]),Qe=Je[0],Ke=Je[1],$e=t.useState([]),et=$e[0],tt=$e[1],nt=t.useState(0),it=nt[0],at=nt[1],ot=t.useState(0),rt=ot[0],lt=ot[1],st=t.useState(null),ut=st[0],ct=st[1],dt=function(e,t){for(var n=e,a=[e];!((n=pe.backwardSingleUnit(n,i.timeZone.displayTimeZone))<t);)a.unshift(n);return a},ht=function(e,t,n,a,r){if("add"===r||"all"===r){var l=function(e,t){for(var n=e,a=[e];!((n=pe.forwardSingleUnit(n,i.timeZone.displayTimeZone))>t);)a.push(n);return a}(e[e.length-1].value,t.end);if(l.length>1)for(var s=ft(l,t,n,a),u=1;u<s.length;u++)e.push(s[u])}if("min"===r||"all"===r){var c=dt(e[0].value,t.start);if(c.length>1){var d=ft(c,t,n,a);for(u=d.length-2;u>-1;u--)e.unshift(d[u])}}var h;if(h=n?mt(t,ze.width,e.length):{dataWidth:it,pixWidth:rt,incriseWidth:ze.width*o.displayPadding},n){for(var m,f=0,b=g(e);!(m=b()).done;){var p=m.value,v=ze.width+2*h.incriseWidth;p.cPosition={x:y(Number(p.value),t,v)-h.incriseWidth-a,y:Ce.y},p.index=f,f++,p=gt(p,t,f,h.dataWidth,h.pixWidth)}e=e.sort((function(e,t){return e.value-t.value}))}return e},mt=function(e,t,n){var i=t*o.displayPadding,a=(e.end-e.start)/n,r=(t+=2*i)/n;return at(a),lt(r),{dataWidth:a,pixWidth:r,incriseWidth:i}},gt=function(e,t,n,i,a){return e.dataSpace={start:n*i+t.start,end:(n+1)*i+t.start},e.pixSpace={start:e.cPosition.x-a/2,end:e.cPosition.x+a/2},e},ft=function(e,t,n,i){var a,r=[];a=n?mt(t,ze.width,e.length):{dataWidth:it,pixWidth:rt,incriseWidth:ze.width*o.displayPadding};for(var l,s=0,u=g(e);!(l=u()).done;){var c=l.value,d={color:o.tickColor,length:x(o.tickLength,Te.height),size:x(o.tickSize,Te.height),cPosition:{x:0,y:Ce.y},value:c},h=ze.width+2*a.incriseWidth;d.cPosition={x:y(Number(d.value),t,h)-a.incriseWidth-i,y:Ce.y},d.index=s,r.push(gt(d,t,s,a.dataWidth,a.pixWidth)),s++}return r},bt=function(e){for(var t=e,n=0;t.length>Ve;){for(var i,a=[],o=0,r=g(t);!(i=r()).done;)o%2&&a.push(i.value),o++;t=a,n<1?n+=1:n=2*n+1}return fe(n),t},pt=function(e){for(var t,n=[],i=g(e);!(t=i()).done;){var a=t.value;n.push({color:o.netLineColor,length:Ce.y,size:o.netLineSize,cPosition:{x:a.cPosition.x,y:0},value:a.value})}return n},vt=function(e,t){e=[].concat(e);for(var n,i=[],a=[],r=!1,l=g(t);!(n=l()).done;){var s=n.value;if(r){0!==s.count&&(a=xt(e,s));break}s.count>o.netLineMinCount&&s.count<o.netLineMaxCount&&(r=!0,i=xt(e,s))}for(var u,c=S(a,"value"),d=[],h=g(i);!(u=h()).done;){var m=u.value;d.push(void 0!==c[m.value]?c[m.value]:m)}return d},xt=function(e,t){var n=[],a=t.startIndex,o=e[a];o.displayValue=t.type.formatter(Number(o.value),null==i?void 0:i.language,i.timeZone.displayTimeZone),n.push(o);for(var r=t.count;r>-1&&void 0!==e[a=a-1-t.step];r--)(o=e[a]).displayValue=t.type.formatter(Number(o.value),null==i?void 0:i.language,i.timeZone.displayTimeZone),n.push(o);return n},yt=function(e,t,n){var a,r;if((null==ut||!ut.data.isFetchingData||null==i||null==(a=i.data)||null==(r=a.dynamicData)||!r.stopUserOperateWhenLoading)&&N){var l=ze.width;l+=l*o.displayPadding*2;var s=t-e,u=t-e,c=u+ie,d="add";s>0&&(d="min"),s=Math.abs(s);var h=Number((s/l*(ye.end-ye.start)).toFixed(0));"min"===d&&(h=0-h);var m,g={start:ye.start+h,end:ye.end+h},f=O(Qe,g),b=ht(f,g,!1,c,u+ie-re>0?"min":"add"),p=Q(b,i.timeZone.displayTimeZone,i.timeFormat,"value");if(null===p){var v=O(et,g);m=(m=0===v.length?bt(b):function(e,t){var n=S(t,"value"),i=0;for(i=n[e[0].value].index;void 0!==t[i=i-1-ge];)e.unshift(t[i]);for(i=n[e[e.length-1].value].index;void 0!==t[i=i+1+ge];)e.unshift(t[i]);return Array.from(new Set(e))}(v,b)).sort((function(e,t){return e.value-t.value}))}else m=vt(b,p);var x=pt(m);W(+new Date),Se(g),Ke(b),_e(x),tt(m),n&&Oe(g),H(+new Date)}},Ot=function(e,t,n){var a,o;if((null==ut||!ut.data.isFetchingData||null==i||null==(a=i.data)||null==(o=a.dynamicData)||!o.stopUserOperateWhenLoading)&&!(Qe.length>2880&&"zoomOut"===n)&&!(Qe.length<=Be&&"zoomIn"===n)&&N){var r=e/ze.width,l=1-r,s=ye,u=s.end-s.start,c={start:u*(r=100*t*r/100),end:u*(l=100*t*l/100)};"zoomIn"===n&&(s={start:s.start+c.start,end:s.end-c.end}),"zoomOut"===n&&(s={start:s.start-c.start,end:s.end+c.end});var d=[].concat(Qe),h=O(d,s);if(0===h.length)return;var m,g=ht(h,s,!0,0,"all"),f=Q(g,i.timeZone.displayTimeZone,i.timeFormat,"value");m=null===f?(m=bt(g)).sort((function(e,t){return e.value-t.value})):vt(g,f);var b=pt(m);se((s.end-s.start)/(ce.end-ce.start)),Oe(s),Se(s),Ke(g),_e(b),tt(m),H(+new Date),R(+new Date),ae(0)}},jt=function(){var e=setTimeout((function(){A(+new Date)}),24);C(e)};return t.useEffect((function(){return!1===E&&(P(!0),jt()),function(){P(!1),void 0!==typeof D&&(A(0),clearTimeout(D))}}),[]),t.useEffect((function(){0!==T&&(w(d-f),b(d),jt())}),[T]),t.useEffect((function(){null!==pe&&function(){var e=pe.getInitTimeScope(o.initTimePoint);if("local"!==i.timeZone.displayTimeZone){var t=new Date,n=Math.abs(t.getTimezoneOffset()/60);e.start=v(e.start,n,i.timeZone.displayTimeZone),e.end=v(e.end,n,i.timeZone.displayTimeZone)}var a,r=pe.roundingFunction(e.end,i.timeZone.displayTimeZone),l=dt(r,null==e?void 0:e.start),s=e,u=ft(l,e,!0,0),c=Q(u,i.timeZone.displayTimeZone,i.timeFormat,"value");a=null===c?(a=bt(u)).sort((function(e,t){return e.value-t.value})):vt(u,c);var d=pt(a);de(e),Oe(e),Se(s),Ke(u),_e(d),tt(a),I(!0),H(+new Date)}()}),[pe]),t.useEffect((function(){N&&window.requestAnimationFrame((function(){Ot(Te.width/2,0,"keep")}))}),[Te]),t.useEffect((function(){!function(){if(N&&ee){var e,t=q;if(null===t)return;t.position.x=(null==(e=t.relatedTickItem)?void 0:e.cPosition.x)+re,K(t)}}()}),[re]),t.useEffect((function(){-1!==s&&Ze(o.lineColor)}),[s]),{data:{currentTimeType:pe,lastTimeScope:ye,currentTimeScope:we,linePosition:Ce,lineSize:ze,lineColor:Ye,netLineMaxCount:Ve,netLineArr:Xe,netLineMinCount:Be,tickArr:Qe,displayTickArr:et,isFinishedInit:N,scaleStep:he,tooltipState:q,tooltipIsShow:ee,labelSpace:Pe,xAxisUpdateTimeStamp:Z,viewSize:Te,displayTickCommonWidth:it,displayTickCommonpixWidth:rt,moveAmount:ie,x:re,xAxisUpdateMoveMentTimeStamp:_,xAxisUpdateScaleTimeStamp:G,mouseSpeedSec:j},funcs:{setlastTimeScope:Oe,setcurrentTimeScope:Se,setlinePosition:Fe,setlineSize:Ue,setlineColor:Ze,setnetLineMaxCount:Ge,setnetLineArr:_e,setnetLineMinCount:qe,settickArr:Ke,setdisplayTickArr:tt,initAxisSates:function(e,t,n,i){Ae({width:t,height:n}),Me(x(i,t)),Fe({x:0,y:n-x(o.labelSpace,n)}),Ue({width:t-x(i,t),size:o.lineSize}),Le(x(o.labelSpace,n)),Ze(o.lineColor),Ge(o.netLineMaxCount),qe(o.netLineMinCount),de({start:0,end:0}),Oe({start:0,end:0}),Se({start:0,end:0}),Ke([]),_e([]),tt([]),le(0),ae(0),ve(J[e])},updateAxisSates:function(e,t,n){Ae({width:e,height:t}),Me(x(n,e)),Fe({x:0,y:t-x(o.labelSpace,t)}),Ue({width:e-x(n,e),size:o.lineSize})},moveAxis:yt,moveContainer:function(e,t,n){if(N){var i=t-e,a=i+ie;h(t),le(i+ie),n&&ae(a),window.requestAnimationFrame((function(){yt(e,t,n)}))}},scale:Ot,tooltipMove:function(e,t){if(N){var n=e.x;if(n>ze.width&&(t=!1),te(t),!1===t)return;var i=function(e,t){for(var n=Qe.slice(),i=0;n.length>1;){var a=n[i=Math.floor(n.length/2)];if(a[t].start<=e&&a[t].end>=e)return a;n=a[t].end<e?n.slice(i+1):n.slice(0,i)}return 1===n.length&&n[0][t].end>=e?n[0]:null}(n-ie,"pixSpace");if(null===i)return void K(null);var a={position:{x:i.cPosition.x+ie,y:0},length:Ce.y,value:i.value,relatedTickItem:i,size:x(o.tooltip.lineSize,Te.width)};K(a)}},setx:le,setcandleObj:ct,setinitArgs:function(e){r(Object.assign(!0,o,e)),u(+new Date)}},initArgs:o}}(a.xAxis,0,a),u=function(e,n){n=n;var i=t.useState(Object.assign(!0,U,e)),a=i[0],r=i[1],l=t.useState(-1),s=l[0],u=l[1],c=t.useState(!1),h=c[0],m=c[1],f=t.useState(!1),b=f[0],p=f[1],v=t.useState(-1),y=v[0],O=v[1],j=t.useState({}),S=j[0],T=j[1],A=t.useState(!1),M=A[0],D=A[1],C=t.useState({start:"0",end:"0"}),F=C[0],E=C[1],P=t.useState("0"),L=P[0],N=P[1],z=t.useState("0"),I=z[0],Y=z[1],Z=t.useState({width:0,height:0}),H=Z[0],X=Z[1],_=t.useState({x:0,y:0}),W=_[0],V=_[1],G=t.useState(0),R=G[0],B=G[1],q=t.useState({height:0,size:0}),J=q[0],Q=q[1],K=t.useState(""),$=K[0],ee=K[1],te=t.useState([]),ne=te[0],ie=te[1],ae=t.useState(0),oe=ae[0],re=ae[1],le=t.useState(0),se=le[0],ue=le[1],ce=t.useState([]),de=ce[0],he=ce[1],me=t.useState(0),ge=me[0],fe=me[1],be=function(e){var t=d({},e),n=new o(e.end).minus(e.start).toString(),i=new o(n).times(a.displayPadding);return n=new o(n).plus(i).toString(),t.start=new o(e.start).minus(new o(i).div(2)).toString(),t.end=new o(e.end).plus(new o(i).div(2)).toString(),{dataScope:t,currentDataSpace:n}};return t.useEffect((function(){return!1===h&&m(!0),function(){m(!1)}}),[]),t.useEffect((function(){var e,t,n;"0"!==L&&(t=function(e){for(var t,n,i=[],r=0,l=g(e);!(t=l()).done;){var s=t.value;i.push({index:r,color:a.tickColor,length:x(a.tickLength,H.width),size:a.tickSize,cPosition:{x:W.x,y:(n=Number(new o(s).minus(F.start).div(L).toFixed(18)),J.height-J.height*n)},value:s,displayValue:new o(w(s,-18)).toFixed(7)}),r++}return i}(e=function(){for(var e=d({},F),t=[],n={start:e.start,end:e.end},i="10",r="10",l="10",s="8",u=k(n.start,Number(l));;){var c=new o(n.end).minus(u).toString();if(s=new o(c).div(i).toFixed().toString(),!new o(s).gt(a.netLineMaxCount))break;var h=(Number(i)+Number(r)).toString();h.length>i.length&&(r+="0",l+="0",u=k(n.start,Number(l))),i=h}for(var m=0;m<Number(s);m++)t.push(new o(u).plus(new o(i).times(m)).toString());return t}()),n=function(e){for(var t,n,i=[],r=g(e);!(t=r()).done;){var l=t.value;i.push({color:a.netLineColor,length:W.x,size:a.netLineSize,cPosition:{x:0,y:(n=Number(new o(l).minus(F.start).div(L).toFixed(18)),J.height-J.height*n)},value:l})}return i}(e),he(t),ie(n),p(!0),O(+new Date))}),[F]),t.useEffect((function(){var e,t;-1!==s&&(X({width:e=H.width,height:t=H.height}),V({x:e-x(a.labelSpace,e),y:0}),Q({height:t-x(n.initArgs.labelSpace,t)+1,size:a.lineSize}),B(x(a.labelSpace,t)),fe(x(a.tickLength,e)),ee(a.lineColor),re(a.netLineMaxCount),ue(a.netLineMinCount))}),[s]),{data:{isFinishedInit:b,tooltipState:S,tooltipIsShow:M,currentDataScope:F,currentDataSpace:L,currentDataPositionOfStart:I,viewSize:H,linePosition:W,labelSpace:R,lineColor:$,netLineArr:ne,netLineMaxCount:oe,netLineMinCount:se,displayTickArr:de,lineSize:J,tickLength:ge,yAxisUpdateTimeStamp:y},funcs:{updateAxisSates:function(e,t,i){console.log(i);var r={start:new o(i.start).times(new o(10).exponentiatedBy(18).toFixed()).toFixed(0),end:new o(i.end).times(new o(10).exponentiatedBy(18).toFixed()).toFixed(0)},l=be(r);e===H.width&&t===H.height&&l.dataScope===F||(X({width:e,height:t}),V({x:e-x(a.labelSpace,e),y:0}),Q({height:t-x(n.initArgs.labelSpace,t)+1,size:a.lineSize}),B(x(a.labelSpace,t)),E(l.dataScope),N(l.currentDataSpace),Y(new o(i.start).minus("0").toString()),fe(x(a.tickLength,e)),ee(a.lineColor),re(a.netLineMaxCount),ue(a.netLineMinCount))},tooltipMove:function(e,t){var n=e.y;if(n>J.height&&(t=!1),D(t),!1!==t){var i=1-n/J.height,r=new o(F.start).plus(new o(L).times(i)).toString(),l={position:{x:0,y:n},length:W.x,value:r,displayValue:new o(w(r,-18)).toFixed(7),relatedTickItem:null,size:x(a.tooltip.lineSize,H.width)};T(l)}},expandDataSpanceEdge:be,expandDataSpanceEdgePIX:function(e){var t=d({},e),n=new o(e.start).minus(e.end).toString(),i=new o(n).times(a.displayPadding);return n=new o(n).plus(i).toString(),t.start=Number(new o(e.start).plus(new o(i).div(2)).toString()),t.end=Number(new o(e.end).minus(new o(i).div(2)).toString()),{dataScope:t,currentDataSpace:n}},setinitArgs:function(e){r(Object.assign(!0,a,e)),u(+new Date)}},initArgs:a}}(a.yAxis,s),h=function(e,n,i,a){n=n,i=i;var l=t.useState(r.merge(I,e)),s=l[0],u=l[1],h=z(),m=(z(),t.useState(!1)),f=m[0],p=m[1],y=t.useState(""),O=y[0],w=y[1],S=t.useState(0),k=S[0],T=S[1],A=t.useState(!0),M=A[0],C=A[1],F=t.useState(-1),E=F[0],P=F[1],L=t.useState(null),N=L[0],U=L[1],Y=t.useState(!1),Z=Y[0],H=Y[1],X=t.useState({start:0,end:0})[1],_=t.useState(),W=_[0],V=_[1],G=(t.useState([]),t.useState(null)),R=G[0],B=G[1],q=t.useState(!1),J=q[0],Q=q[1],K=t.useState(!1),$=K[0],ee=K[1],te=t.useState(!1),ne=te[0],ie=te[1],ae=t.useState(null),oe=ae[0],re=ae[1],le=t.useState(null),se=le[0],ue=le[1],ce=t.useState(798),de=ce[0],he=ce[1],me=t.useState(0),ge=me[0],fe=me[1],be=t.useState(0),pe=be[0],ve=be[1],xe=t.useState(!1),ye=xe[0],Oe=xe[1],je=t.useState([]),we=je[0],Se=je[1],ke=t.useState([]),Te=ke[0],Ae=ke[1],Me=t.useState({start:"0",end:"0"}),De=Me[0],Ce=Me[1],Fe=t.useState({start:"0",end:"0"}),Ee=Fe[0],Pe=Fe[1],Le=t.useState(1),Ne=Le[0],ze=Le[1],Ue=(t.useState(),t.useState(null)),Ie=Ue[0],Ye=Ue[1],Ze=t.useState(null),He=Ze[0],Xe=Ze[1],_e=t.useState(null),We=_e[0],Ve=_e[1],Ge=t.useState(null),Re=Ge[0],Be=Ge[1],qe=t.useState(null),Je=qe[0],Qe=qe[1],Ke=t.useState({width:0,height:0}),$e=Ke[0],et=Ke[1],tt=t.useState(-1),nt=tt[0],it=tt[1],at=t.useState(-1),ot=at[0],rt=at[1],lt=t.useRef({}),st=t.useRef(!1),ut=t.useRef(!1),ct=t.useRef(!1),dt=t.useRef(),ht=function(e){if(1===e.length)return"smaller";var t=D(e[1].time)-D(e[0].time),i=n.data.currentTimeType.timeGap;return t===i?"same":t>i?"bigger":"smaller"},mt=function(e,t){var n=t;return n>Number(e.open)&&(n=Number(e.open)),n>Number(e.close)&&(n=Number(e.close)),n>Number(e.high)&&(n=Number(e.high)),n>Number(e.low)&&(n=Number(e.low)),n},gt=function(e,t){var n=t;return n<Number(e.open)&&(n=Number(e.open)),n<Number(e.close)&&(n=Number(e.close)),n<Number(e.high)&&(n=Number(e.high)),n<Number(e.low)&&(n=Number(e.low)),n},ft=function(e){for(var t={time:-1,open:-1,close:-1,high:-1,low:-1,volume:0},i=e[e.length-1],o={start:"9999999999999999999999",end:"-9999999999999999999999"},r=e.length-1;r>-1;r--){var l=e[r],s=n.data.currentTimeType.roundingFunction(D(l.time),a.timeZone.displayTimeZone);-1!==t.time&&s===t.time||(s!==t.time&&-1!==t.time&&void 0===lt.current[t.time]&&(lt.current[t.time]=t),t={time:s,open:-1,close:-1,high:"-9999999999999999999999",low:"9999999999999999999999",volume:0}),t.open=l.open,(s<n.data.currentTimeType.roundingFunction(D(i.time),a.timeZone.displayTimeZone)||-1===t.close)&&(t.close=l.close),Number(t.high)<Number(l.high)&&(t.high=l.high),Number(t.low)>Number(l.low)&&(t.low=l.low),o.start=mt(l,Number(o.start)).toString(),o.end=gt(l,Number(o.end)).toString(),t.volume=Number(t.volume)+Number(l.volume),i=l,0===r&&(lt.current[t.time]=t)}return o},bt=function(e){for(var t,n={start:"9999999999999999999999",end:"-9999999999999999999999"},i=g(e);!(t=i()).done;){var a=t.value;void 0===lt.current[a.time]&&(n.start=mt(a,Number(n.start)).toString(),n.end=gt(a,Number(n.end)).toString(),lt.current[a.time]=d({},a))}return n},pt=function(e,t,n){if(Number(e)>Number(t)){if("wick"===n)return s.candleStyles.wickFallColor;if("candle"===n)return s.candleStyles.candleFallColor}return"wick"===n?s.candleStyles.wickRiseColor:"candle"===n?s.candleStyles.candleRiseColor:"#fff"},vt=function(e,t,n){if(Number(e)>Number(t)){if("wick"===n)return"fall";if("candle"===n)return"fall"}return"rise"},xt=function(e,t,i){var a=Number(e.end)-Number(e.start),o=Number(((i-t)/a).toFixed(5));return(n.data.viewSize.height-x(n.initArgs.labelSpace,n.data.viewSize.height))*o},yt=function(e,t){var i=Number(e.end)-Number(e.start),a=Number(((Number(t)-Number(e.start))/i).toFixed(5)),o=n.data.viewSize.height-x(n.initArgs.labelSpace,n.data.viewSize.height);return o-o*a},Ot=function(e,t,i){if(e.candleColor=pt(e.open,e.close,"candle"),e.wickColor=pt(e.open,e.close,"wick"),e.candleStateus=vt(e.open,e.close,"candle"),e.wickStateus=vt(e.open,e.close,"wick"),1==ut.current)e.wickWidth=1.2,e.candlePixPosition={x:0,y:yt(t,Math.max(Number(e.close),Number(e.open)).toString())},e.wickPixPosition={x:0,y:yt(t,e.high.toString())},e.wickLength=xt(t,Number(e.low),Number(e.high));else{try{e.candleWidth=x(s.candleStyles.candleWidth,n.data.displayTickCommonpixWidth),e.wickWidth=x(s.candleStyles.wickWidth,n.data.displayTickCommonpixWidth)}catch(e){}e.candlePixPosition={x:0,y:yt(t,Math.max(Number(e.close),Number(e.open)).toString())},e.wickPixPosition={x:0,y:yt(t,e.high.toString())},e.candleLength=xt(t,Math.min(Number(e.open),Number(e.close)),Math.max(Number(e.open),Number(e.close))),e.candleLength<1&&(e.candleLength=1),e.wickLength=xt(t,Number(e.low),Number(e.high))}try{n.data.lineSize.width-n.data.x-e.currentTick.pixSpace.start>=0&&e.currentTick.pixSpace.end-(n.data.lineSize.width-n.data.x)<=e.currentTick.pixSpace.end-e.currentTick.pixSpace.start&&Ve(e)}catch(e){}return e.updateTag=i.start+i.end,e},jt=function(e,t){try{n.data.lineSize.width-n.data.x-e.currentTick.pixSpace.start>=0&&e.currentTick.pixSpace.end-(n.data.lineSize.width-n.data.x)<=e.currentTick.pixSpace.end-e.currentTick.pixSpace.start&&Ve(e)}catch(e){}},wt=function(e){for(var t=[],n={start:"9999999999999999999999",end:"-9999999999999999999999"},i=-99999999999999,a=0;a<e.length;a++){var o=e[a];if(void 0!==lt.current[o.value]){var r=lt.current[o.value];r.currentTick=o,n.start=mt(r,Number(n.start)).toString(),n.end=gt(r,Number(n.end)).toString(),i<Number(r.volume)&&(i=Number(r.volume)),t.push(r)}}return ve(i),{data:t,scope:n}},St=function(e){for(var t,n=g(e);!(t=n()).done;){var i=t.value;i.time="local"===a.timeZone.dataSourceTimeZone?Number(i.time):v(Number(i.time),a.timeZone.dataSourceTimeZone,a.timeZone.displayTimeZone)}return e},kt=function(){var e=c(b.mark((function e(){var t,i,o,r,l,u,c;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(lt.current).forEach((function(e){return delete lt.current[e]})),it(-1),Se([]),Ae([]),ze(1),T(0),C(!0),re(null),ue(null),fe(0),ve(0),Ce({start:"0",end:"0"}),Pe({start:"0",end:"0"}),Ye(null),Xe(null),Ve(null),Be(null),Qe(null),lt.current={},st.current=!1,ut.current=!1,ct.current=!1,ee(!1),H(!1),r=n.data.currentTimeType.roundingFunction(o=n.data.currentTimeScope.end,a.timeZone.displayTimeZone),l=n.data.currentTimeType.backwardTimeUnit(r,s.dynamicData.dataFetchCountPreTime,a.timeZone.displayTimeZone),e.next=29,s.dynamicData.dataFetchCallback(n.data.currentTimeType.name,l,o);case 29:0!==(u=e.sent).length&&(B(St(u)),Q(!0)),c=x(null==(t=s.candleStyles)||null==(i=t.volumChart)?void 0:i.volumeChartHeight,n.data.linePosition.y),fe(c),C(!1),ee(!0);case 35:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=c(b.mark((function e(t){var i,o,r,l,u;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=2;break}return e.abrupt("return");case 2:return C(!0),i=n.data.currentTimeType.backwardTimeUnit(t,s.dynamicData.dataFetchCountPreTime,a.timeZone.displayTimeZone),o=0,"local"===a.timeZone.displayTimeZone?(r=new Date,l=Math.abs(r.getTimezoneOffset()/60),o=l):o=a.timeZone.displayTimeZone,i=v(i,o,a.timeZone.fetchConditionTimeZone),t=v(t,o,a.timeZone.fetchConditionTimeZone),e.next=10,s.dynamicData.dataFetchCallback(n.data.currentTimeType.name,i,t);case 10:if(null!=(u=e.sent)){e.next=14;break}return H(!0),e.abrupt("return");case 14:if(1!==u.length){e.next=19;break}if(v(Number(u[0].time),a.timeZone.dataSourceTimeZone,a.timeZone.displayTimeZone)!==Te[0].time){e.next=19;break}return H(!0),e.abrupt("return");case 19:0!==u.length&&B(St(u)),C(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),At=function(){var e,t;Object.keys(lt.current).forEach((function(e){return delete lt.current[e]}));var a=St(s.staticData.sort((function(e,t){return D(e.time)-D(t.time)}))),o=ht(a);if("bigger"!==o){var r;"smaller"===o?ft(a):bt(a);for(var l,u=wt(n.data.tickArr),c=g(u.data);!(l=c()).done;){var d=l.value;d=Ot(d,u.scope,u.scope)}r=u.scope;var h=x(null==(e=s.candleStyles)||null==(t=e.volumChart)?void 0:t.volumeChartHeight,n.data.linePosition.y);fe(h),Se(a),Ae(u.data),et(n.data.viewSize),ee(!0),Pe(u.scope),ze(1),T(0),i.funcs.updateAxisSates(n.data.viewSize.width,n.data.viewSize.height,{start:Number(r.start),end:Number(r.end)}),Ce(r),it(+new Date),C(!1)}else console.log("The time interval of the data is inconsistent with the given configured time interval!")},Mt=function(){var e=wt(n.data.tickArr);if(0===e.data.length)return Ae([]),void Dt();requestAnimationFrame((function(){i.funcs.updateAxisSates(n.data.viewSize.width,n.data.viewSize.height,{start:Number(e.scope.start),end:Number(e.scope.end)})})),Ce((function(){return e.scope}));for(var t,a=0,o=g(e.data);!(t=o()).done;){var r=t.value;ct.current?Number(a)%2?(r=Ot(r,e.scope,e.scope)).isEscaped=!1:(jt(r),r.isEscaped=!0):(r=Ot(r,e.scope,e.scope)).isEscaped=!1,a++}if(Ae(e.data),et(n.data.viewSize),0!==e.data.length){var l=n.data.linePosition.y/(n.data.linePosition.y*i.initArgs.displayPadding+n.data.linePosition.y);T(n.data.linePosition.y*i.initArgs.displayPadding/2*l),ze(l),Pe(e.scope),Dt(e.data),it(+new Date),X({start:n.data.linePosition.y,end:0})}},Dt=function(){var e=c(b.mark((function e(t){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!s.dynamicData.enabled||ye||Z||(void 0!==t?Number(t[0].time)-Number(n.data.tickArr[0].value)>0&&Tt(Number(t[0].time)):Tt(Number(n.data.tickArr[n.data.tickArr.length-1].value)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){st.current||(st.current=!0,n.data.tickArr.length>500?(ie(!0),ut.current=!0):(ie(!1),ut.current=!1),ut.current?h((function(){Mt(),n.funcs.setx(0)}),50):(Mt(),n.funcs.setx(0)),st.current=!1)},Ft=function(){var e;st.current||(st.current=!0,n.data.tickArr.length>500?(ie(!0),ut.current=!0):(ie(!1),ut.current=!1),e=function(){var e=[].concat(Te);if(0!==e.length){var t=[];if(n.data.tickArr[0].value!==e[0].time)for(var i=0;void 0!==n.data.tickArr[i]&&n.data.tickArr[i].value<e[0].time;){var a=lt.current[n.data.tickArr[i].value];void 0!==a&&(a.currentTick=n.data.tickArr[i],t.push(a)),i++}var o=[];if(n.data.tickArr[n.data.tickArr.length-1].value!==e[e.length-1].time)for(var r=n.data.tickArr.length-1;void 0!==n.data.tickArr[r]&&n.data.tickArr[r].value>e[e.length-1].time;){var l=lt.current[n.data.tickArr[r].value];void 0!==l&&(l.currentTick=n.data.tickArr[r],o.unshift(l)),r--}for(var s,u=[].concat(t,e,o),c=j(u,n.data.currentTimeScope),d=Ee,h=d.start+d.end,m=g(c);!(s=m()).done;){var f=s.value;void 0===f.updateTag||f.updateTag!==h?f=Ot(f,d,d):jt(f)}return Ae(u),Dt(u),c}},window.requestAnimationFrame((function(){if(n.data.tickArr.length>120){var t=void 0;n.data.lastTimeScope.start!==n.data.currentTimeScope.start&&n.data.lastTimeScope.end!==n.data.currentTimeScope.end?Math.abs(n.data.mouseSpeedSec)<3&&(t=e()):t=e(),function(e){var t=!1;if(void 0===e?e=(e=[].concat(Te)).sort((function(e,t){return Number(e.time)-Number(t.time)})):t=!0,0!==e.length){var a,o=j(a=e,n.data.currentTimeScope);o=t?e:j(a,n.data.currentTimeScope);for(var r={start:-1e16,end:99999999999999},l={start:"9999999999999999999999",end:"-9999999999999999999999"},s=-99999999999999,u=0;u<o.length;){var c,d,h,m,g,f,b,p,v,x,y,O,w=o[u];ut.current?(Number(null==(c=w.wickPixPosition)?void 0:c.y)+Number(w.wickLength)>r.start&&(r.start=Number(null==(h=w.wickPixPosition)?void 0:h.y)+Number(w.wickLength)),Number(null==(d=w.wickPixPosition)?void 0:d.y)<r.end&&(r.end=Number(null==(m=w.wickPixPosition)?void 0:m.y))):(Math.max(Number(null==(g=w.candlePixPosition)?void 0:g.y)+Number(w.candleLength),Number(null==(f=w.wickPixPosition)?void 0:f.y)+Number(w.wickLength))>r.start&&(r.start=Math.max(Number(null==(v=w.candlePixPosition)?void 0:v.y)+Number(w.candleLength),Number(null==(x=w.wickPixPosition)?void 0:x.y)+Number(w.wickLength))),Math.min(Number(null==(b=w.candlePixPosition)?void 0:b.y),Number(null==(p=w.wickPixPosition)?void 0:p.y))<r.end&&(r.end=Math.min(Number(null==(y=w.candlePixPosition)?void 0:y.y),Number(null==(O=w.wickPixPosition)?void 0:O.y)))),u++}var S=r.start-r.end,k=i.data.lineSize.height/(S+S*i.initArgs.displayPadding);T((S*i.initArgs.displayPadding/2-r.end)*k),ze(k);for(var A=0;A<o.length;A++){var M=o[A];jt(M),l.start=mt(M,Number(l.start)).toString(),l.end=gt(M,Number(l.end)).toString(),s<Number(M.volume)&&(s=Number(M.volume))}requestAnimationFrame((function(){0!==o.length&&i.funcs.updateAxisSates($e.width,$e.height,{start:Number(l.start),end:Number(l.end)})})),Ce(l),ve(s),it(+new Date)}}(t)}else!function(){var e=[].concat(n.data.tickArr),t=d({},n.data.viewSize),a=d({},Ee),o=ct.current,r=ut.current,l=wt(e);if(0===l.data.length)return Ae([]),void Dt();requestAnimationFrame((function(){i.funcs.updateAxisSates(t.width,t.height,{start:Number(l.scope.start),end:Number(l.scope.end)})}));for(var s,u=a.start+a.end,c={start:-1e16,end:99999999999999},h=0,m=g(l.data);!(s=m()).done;){var f,b,p,v,x,y,O,j,w,S,k,A,M=s.value;o?Number(h)%2?(void 0===M.updateTag||M.updateTag!==u?M=Ot(M,a,a):jt(M),M.isEscaped=!1):(jt(M),M.isEscaped=!0):(void 0===M.updateTag||M.updateTag!==u?M=Ot(M,a,a):jt(M),M.isEscaped=!1),r?(Number(null==(f=M.wickPixPosition)?void 0:f.y)+Number(M.wickLength)>c.start&&(c.start=Number(null==(p=M.wickPixPosition)?void 0:p.y)+Number(M.wickLength)),Number(null==(b=M.wickPixPosition)?void 0:b.y)<c.end&&(c.end=Number(null==(v=M.wickPixPosition)?void 0:v.y))):(Math.max(Number(null==(x=M.candlePixPosition)?void 0:x.y)+Number(M.candleLength),Number(null==(y=M.wickPixPosition)?void 0:y.y)+Number(M.wickLength))>c.start&&(c.start=Math.max(Number(null==(w=M.candlePixPosition)?void 0:w.y)+Number(M.candleLength),Number(null==(S=M.wickPixPosition)?void 0:S.y)+Number(M.wickLength))),Math.min(Number(null==(O=M.candlePixPosition)?void 0:O.y),Number(null==(j=M.wickPixPosition)?void 0:j.y))<c.end&&(c.end=Math.min(Number(null==(k=M.candlePixPosition)?void 0:k.y),Number(null==(A=M.wickPixPosition)?void 0:A.y)))),h++}var D=c.start-c.end,C=i.data.lineSize.height/(D+D*i.initArgs.displayPadding),F=D*i.initArgs.displayPadding/2-c.end;Ae(l.data),Ce(l.scope),0!==l.data.length&&(T(F*C),ze(C),Dt(l.data),it(+new Date))}()})),st.current=!1)};return t.useEffect((function(){void 0!==W&&function(e){var t=e.data;if("setdisplayLatestCandle"!==t.message){if("not found"===t.message)return Ae([]),void Dt();if("updateYaxis"!==t.message){if("finishWork"===t.message){var a=t.data.orgMaxMiny.start-t.data.orgMaxMiny.end,o=i.data.lineSize.height/(a+a*i.initArgs.displayPadding),r=a*i.initArgs.displayPadding/2-t.data.orgMaxMiny.end;Ae(t.data.result.data),Ce(t.data.result.scope),0!==t.data.result.data.length&&(T(r*o),ze(o),Dt(t.data.result.data),it(+new Date))}}else requestAnimationFrame((function(){i.funcs.updateAxisSates(n.data.viewSize.width,n.data.viewSize.height,{start:Number(t.data.start),end:Number(t.data.end)})}))}else Ve(t.data)}(W)}),[W]),t.useEffect((function(){return!1===f&&(p(!0),Oe(void 0!==s.staticData&&s.staticData.length>0),dt.current=new Worker(new URL("../webWorkers/moveWorker","undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("candle-view.cjs.production.min.js",document.baseURI).href)),dt.current.addEventListener("message",(function(e){V(e)}))),function(){p(!1)}}),[]),t.useEffect((function(){var e;!0===f&&n.data.isFinishedInit&&i.data.isFinishedInit&&(w(null==(e=n.data.currentTimeType)?void 0:e.name),ye?At():s.dynamicData.enabled&&kt())}),[n.data.isFinishedInit,i.data.isFinishedInit]),t.useEffect((function(){-1!==E&&Ft()}),[E]),t.useEffect((function(){-1!==ot&&window.requestAnimationFrame((function(){Ct()}))}),[ot]),t.useEffect((function(){var e;-1!==n.data.xAxisUpdateTimeStamp&&n.data.xAxisUpdateTimeStamp!==de&&null!==n.data.currentTimeType&&""!==O&&(n.data.currentTimeType.name!==O&&(w(null==(e=n.data.currentTimeType)?void 0:e.name),ye?At():s.dynamicData.enabled&&kt()),he(n.data.xAxisUpdateTimeStamp))}),[n.data.xAxisUpdateTimeStamp,n.data.currentTimeType]),t.useEffect((function(){-1!==n.data.xAxisUpdateMoveMentTimeStamp&&Ft()}),[n.data.xAxisUpdateMoveMentTimeStamp]),t.useEffect((function(){-1!==n.data.xAxisUpdateScaleTimeStamp&&window.requestAnimationFrame((function(){Ct()}))}),[n.data.xAxisUpdateScaleTimeStamp]),t.useEffect((function(){-1!==nt&&(function(){if(0!==we.length&&0!==Te.length){var e;if(null===se)if(ye){we.sort((function(e,t){return D(e.time)-D(t.time)}));var t=n.data.currentTimeType.roundingFunction(D(we[we.length-1].time),a.timeZone.displayTimeZone);e=lt.current[t]}else e=lt.current[Te[Te.length-1].time];else e=se;if(void 0!==e){var r,l=d({},e),u=d({},De),c=i.funcs.expandDataSpanceEdge(u);Ot(l,c.dataScope,u);var h={position:{x:0,y:Number(l.close)>Number(l.open)?l.candlePixPosition.y:l.candlePixPosition.y+l.candleLength},length:n.data.lineSize.width,value:l.close,displayValue:new o(l.close).toFixed(7),relatedTickItem:null,size:x(s.candleStyles.currentPriceTooltip.lineSize,$e.width)};Ye(h),ue(l);var m=ge*(Number(l.volume)/pe),g={position:{x:0,y:n.data.linePosition.y-m},length:n.data.lineSize.width,value:l.volume,displayValue:new o(l.volume).toFixed(7),relatedTickItem:null,size:x(null==(r=s.candleStyles.volumChart)?void 0:r.currentPriceTooltip.lineSize,$e.width)};Xe(g)}}}(),function(){if(null!==We){var e,t=i.funcs.expandDataSpanceEdge(De),a=Ot(d({},We),t.dataScope,De);if(!0===a.isEscaped)return;var r={position:{x:0,y:(c=0,Number(a.close)>Number(a.open)?c=a.candlePixPosition.y:(c=a.candlePixPosition.y+a.candleLength,isNaN(c)&&(c=a.candlePixPosition.y+0)),c)},length:n.data.lineSize.width,value:a.close,displayValue:new o(a.close).toFixed(7),relatedTickItem:null,size:x(s.candleStyles.viewLastPriceTooltip.lineSize,$e.width)};Be(r);var l=ge*(Number(a.volume)/pe),u={position:{x:0,y:n.data.linePosition.y-l},length:n.data.lineSize.width,value:a.volume,displayValue:new o(a.volume).toFixed(7),relatedTickItem:null,size:x(null==(e=s.candleStyles.volumChart)?void 0:e.viewLastPriceTooltip.lineSize,$e.width)};Qe(u)}var c}())}),[nt]),t.useEffect((function(){!function(){if(n.data.tooltipIsShow&&null!=n.data.tooltipState&&null!=n.data.tooltipState.relatedTickItem){var e=n.data.tooltipState.relatedTickItem.value.toString();re(lt.current[e])}}()}),[n.data.tooltipState]),t.useEffect((function(){null!==N&&-1!==N.time&&!0===$&&!1===M&&function(){var e,t,i;if($&&0!==Te.length&&null!==N){if(null===se)return null;var o=d({},N),r=o.time,l=o.open,s=o.close,u=o.high,c=o.low,h=o.volume,m=o.isMergeMode;r="local"===a.timeZone.dataSourceTimeZone?Number(new Date(r).getTime()):v(Number(new Date(r).getTime()),a.timeZone.dataSourceTimeZone,a.timeZone.displayTimeZone);var g=[].concat(Te),f=null==(e=n.data.currentTimeType)?void 0:e.roundingFunction(Number(r),a.timeZone.displayTimeZone),b=d({},se),p=!1;b.isEscaped=!1;var x=!1;if(f===(null==(t=b)?void 0:t.time)){void 0!==m&&!0===m?(b.close=s,b.high=Math.max(Number(b.high),Number(s)),b.low=Math.min(Number(b.low),Number(s)),b.volume=h):(b.time=f,b.close=s,b.high=u,b.low=c,b.volume=h);for(var y=g.length-1;y>-1;y--)if(g[y].time===f){b.currentTick=g[y].currentTick,b=Ot(b,Ee,Ee),g[y]=b,x=!0,b.updateTag="0";break}}else{if(!(f>Number(null==(i=b)?void 0:i.time)))return;for(void 0!==m&&!0===m?(b.time=f,b.open=s,b.close=s,b.high=s,b.low=s,b.volume=h):(b.time=f,b.open=l,b.close=s,b.high=u,b.low=c,b.volume=h,b.updateTag="0"),y=n.data.tickArr.length-1;y>-1;y--){var O=n.data.tickArr[y];if(O.value===b.time){b.currentTick=O;break}}b=Ot(b,Ee,Ee),n.data.currentTimeScope.start<=f&&n.data.currentTimeScope.end>=f&&(g.push(b),x=!0),p=!0}if(lt.current[f]=b,ve(Math.max(Number(b.volume),pe)),ue(d({},b)),p)n.data.currentTimeScope.start<=f&&n.data.currentTimeScope.end>=f&&n.funcs.moveContainer(0,0-(b.currentTick.pixSpace.end-b.currentTick.pixSpace.start),!0),x&&Ae(g),it(+new Date);else{var j={start:Math.min(Number(De.start),Number(b.close)).toString(),end:Math.max(Number(De.end),Number(b.close)).toString()};j.start!==De.start||j.end!==De.end?P(+new Date):(x&&Ae(g),it(+new Date))}}}()}),[N,$,M]),t.useEffect((function(){null!==R&&function(e){if(!M&&$){var t=e.sort((function(e,t){return D(e.time)-D(t.time)})),n=ht(e);if("bigger"!==n){"smaller"===n?ft(t):bt(t);var i=[].concat(t,we);Se(i),J?(Q(!1),rt(+new Date)):P(+new Date)}else console.log("The time interval of the data is inconsistent with the given configured time interval!")}}([].concat(R))}),[R]),{data:{displayCandleData:Te,isDQuickUpdateing:ne,latestCandleToolTip:Ie,latestdisplayLatestCandle:Re,volumChartPixHeight:ge,volumChartViewMax:pe,latestVolumeToolTip:He,latestdisplayLatestVolume:Je,cursorCandleItem:oe,latestCandleItem:se,yScale:Ne,miny:k,updateStamp:nt,isFetchingData:M,isFinishedInit:$},funcs:{updateLatestCandleData:function(e){U(e)},setinitArgs:function(e){u(r.merge(s,e))}},initArgs:s}}(a.data,s,u,a),m=t.useState(!1),f=m[0],p=m[1],T=t.useState(0),A=T[0],M=T[1],C=t.useState(0),F=C[0],E=C[1],P=t.useState("#fff"),L=P[0],N=P[1],Z=t.useState({width:0,height:0}),H=Z[0],X=Z[1];return t.useEffect((function(){return!1===f&&p(!0),function(){p(!1)}}),[]),t.useEffect((function(){s.data.isFinishedInit&&u.data.isFinishedInit&&(s.funcs.setinitArgs(a.xAxis),u.funcs.setinitArgs(a.yAxis),h.funcs.setinitArgs(a.data))}),[a]),t.useEffect((function(){var e,t;0===F||0===A||s.data.isFinishedInit?s.funcs.updateAxisSates(A,F,null==(e=a.yAxis)?void 0:e.labelSpace):(s.funcs.initAxisSates(a.timeFormat,A,F,null==(t=a.yAxis)?void 0:t.labelSpace),u.funcs.updateAxisSates(A,F,{start:500,end:600}))}),[A,F]),t.useEffect((function(){var e;s.data.isFinishedInit&&s.funcs.initAxisSates(a.timeFormat,A,F,null==(e=a.yAxis)?void 0:e.labelSpace)}),[a.timeFormat,null==(n=a.yAxis)?void 0:n.labelSpace]),t.useEffect((function(){s.data.isFinishedInit&&X({width:A-x(a.yAxis.labelSpace,A),height:F-x(a.xAxis.labelSpace,F)})}),[s.data.isFinishedInit,A,F]),{initArgs:a,data:{canvasWidth:A,canvasHeight:F,canvasBackgroundColor:L,dataArea:H},funcs:{setcanvasWidth:M,setcanvasHeight:E,setcanvasBackgroundColor:N,setInitArgs:l,appendData:h.funcs.updateLatestCandleData,setTimeFormat:function(e){var t=d({},a);t.timeFormat=e,l(t)}},hookObjs:{xAxisObj:s,yAxisObj:u,candleObj:h}}},useCandleViewContext:$,candleViewContext:K,CVbasicShapesInterFace:{__proto__:null},CVconfigInterFaces:{__proto__:null},CVcontextInterFace:{__proto__:null},CVhooksInterFace:{__proto__:null},CVitemsInterFace:{__proto__:null},CVtimeDefineInterFace:{__proto__:null}};
//# sourceMappingURL=candle-view.cjs.production.min.js.map
