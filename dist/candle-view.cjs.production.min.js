"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),i=e(require("bignumber.js")),a=e(require("lodash")),o=require("@pixi/react"),r=e(require("@bobliao/use-jquery-hook")),l=e(require("resize-observer-polyfill")),s=require("pixi.js");function u(e,t,n,i,a,o,r){try{var l=e[o](r),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(i,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){u(o,i,a,r,l,"next",e)}function l(e){u(o,i,a,r,l,"throw",e)}r(void 0)}))}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function h(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f=function(e,t){return e=e||new Date,(t=t||"yyyy-MM-dd HH:mm:ss").replace("yyyy",e.getFullYear().toString()).replace("yy",e.getFullYear().toString().substring(2,4)).replace("MM",(e.getMonth()<9?"0":"")+(e.getMonth()+1).toString()).replace("dd",(e.getDate()<10?"0":"")+e.getDate().toString()).replace("HH",(e.getHours()<10?"0":"")+e.getHours().toString()).replace("mm",(e.getMinutes()<10?"0":"")+e.getMinutes().toString()).replace("ss",(e.getSeconds()<10?"0":"")+e.getSeconds().toString())},b=function(e,t,n){var i=new Date(e),a=Math.abs(i.getTimezoneOffset()/60);return"local"===n&&(n=a),"local"===t&&(t=a),i.setHours(i.getHours()-t+n),i.getTime()},p=function(e,t){return"string"==typeof e&&"auto"===e?t:"string"==typeof e&&-1!==e.indexOf("%")?t*(Number(e.replace("%",""))/100):"string"==typeof e&&-1!==e.indexOf("px")?Number(e.replace("px","")):"number"!=typeof e&&isNaN(Number(e))?(console.log("no useful length !"),0):Number(e)},v=function(e,t,n){return n*((e-t.start)/(t.end-t.start))},x=function(e,t){var n=[];if(e.length<300)for(var i,a=m(e);!(i=a()).done;){var o=i.value;Number(o.value)>=t.start&&Number(o.value)<=t.end&&n.push(o)}else n=T(e,t,"value");return n},y=function(e,t){return T(e,t,"time")},O=function(e,t){return new i(e).times(new i(10).exponentiatedBy(t)).toString()},w=function(e,t){return e.reduce((function(e,n,i){return e[n[t]]=n,e[n[t]].index=i,e}),{})},k=function(e,t){var n=new i(e),a=n.modulo(t);return n.minus(a).plus(t).integerValue(i.ROUND_FLOOR).toString()};function j(e,t,n,i){var a=function(e,t){return Number("object"==typeof e[t]||void 0!==i?e[t][i]:e[t])};if("forStart"===n&&t===a(e,0))return 0;if("forEnd"===n&&t===a(e,e.length-1))return e.length-1;for(var o,r=0,l=e.length-1;r<=l;)a(e,o=r+Math.floor((l-r)/2))===t?"forStart"===n?l=o-1:r=o+1:a(e,o)<t?r=o+1:l=o-1;return"forStart"===n?r:l}function S(e,t,n,i){if(void 0===e[0])return-1;if("forStart"===i&&t<=e[0][n])return 0;if("forEnd"===i&&t>=e[e.length-1][n])return e.length-1;for(var a,o=0,r=e.length-1;o<=r;)e[a=o+Math.floor((r-o)/2)][n]===t?"forStart"===i?r=a-1:o=a+1:e[a][n]<t?o=a+1:r=a-1;return"forStart"===i?o:r}var A,T=function(e,t,n){var i=S(e,t.start,n,"forStart"),a=S(e,t.end,n,"forEnd");return void 0===e[a=null===a?e.length-1:a]?[]:(a<e.length&&e[a][n]<t.end&&a++,e.slice(i=null===i?0:i,a))},M=function(e){return"number"==typeof e?e:+new Date(e)},D=function(e){for(var t=e.toString().trim().split(".")[0].split(""),n="",i=0,a=t.length-1;a>-1;a--)n=i%3==0&&0!=i?t[a]+","+n:t[a]+n,i++;return e.toString().split(".")[1]&&(n+="."+e.toString().split(".")[1]),n},C=function(e,t,n){void 0===t&&(t="en"),void 0===n&&(n=0);var i=e.toString();switch(t){case"en":i=E(e,n);break;case"ja":i=P(e,n);break;case"ko":i=F(e,n);break;case"zh":i=P(e,n);break;case"ru":i=E(e,n)}return i},F=function(e,t){void 0===t&&(t=0);var n=new i(e).toFixed().split("."),a=n[0].split("");return void 0!==n[1]&&n[1].split(""),a.length>=13?new i(e).dividedBy(new i(10).exponentiatedBy(12).toFixed()).toFixed(t,1)+"조":a.length>=9?new i(e).dividedBy(new i(10).exponentiatedBy(8).toFixed()).toFixed(t,1)+"억":a.length>=5?new i(e).dividedBy(new i(10).exponentiatedBy(4).toFixed()).toFixed(t,1)+"만":new i(e).toFixed(t)},P=function(e,t){void 0===t&&(t=0);var n=new i(e).toFixed().split("."),a=n[0].split("");return void 0!==n[1]&&n[1].split(""),a.length>=13?new i(e).dividedBy(new i(10).exponentiatedBy(12).toFixed()).toFixed(t,1)+"兆":a.length>=9?new i(e).dividedBy(new i(10).exponentiatedBy(8).toFixed()).toFixed(t,1)+"亿":a.length>=8?new i(e).dividedBy(new i(10).exponentiatedBy(7).toFixed()).toFixed(t,1)+"千萬":a.length>=7?new i(e).dividedBy(new i(10).exponentiatedBy(6).toFixed()).toFixed(t,1)+"百萬":a.length>=5?new i(e).dividedBy(new i(10).exponentiatedBy(4).toFixed()).toFixed(t,1)+"萬":new i(e).toFixed(t)},E=function(e,t){void 0===t&&(t=0);var n=new i(e).toFixed().split("."),a=n[0].split("");return void 0!==n[1]&&n[1].split(""),a.length>=11?new i(e).dividedBy(new i(10).exponentiatedBy(10).toFixed()).toFixed(t,1)+"T":a.length>=10?new i(e).dividedBy(new i(10).exponentiatedBy(9).toFixed()).toFixed(t,1)+"B":a.length>=7?new i(e).dividedBy(new i(10).exponentiatedBy(6).toFixed()).toFixed(t,1)+"M":a.length>=4?new i(e).dividedBy(new i(10).exponentiatedBy(3).toFixed()).toFixed(t,1)+"K":new i(e).toFixed(t)},L=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},N=function(){for(var e="",t=1;t<=32;t++)e+=Math.floor(32*Math.random()).toString(32);return e},z=function(){var e=t.useState(!1),n=e[0],i=e[1],a=t.useRef(null),o=t.useRef(null);return t.useEffect((function(){return!1===n&&i(!0),function(){i(!1)}}),[]),function(e,t){void 0===t&&(t=500),0!==t?(a.current=e,null===o.current&&(o.current=setTimeout((function(){null!==a.current&&(a.current(),a.current=null,o.current=null)}),t))):e()}},U=(function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,i){var a=Object.create((t&&t.prototype instanceof d?t:d).prototype),o=new k(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(a,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var r=n.delegate;if(r){var l=y(r,n);if(l){if(l===c)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=u(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===c)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c={};function d(){}function h(){}function g(){}var m={};l(m,a,(function(){return this}));var f=Object.getPrototypeOf,b=f&&f(f(j([])));b&&b!==t&&n.call(b,a)&&(m=b);var p=g.prototype=d.prototype=Object.create(m);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var i;this._invoke=function(a,o){function r(){return new t((function(i,r){!function i(a,o,r,l){var s=u(e[a],e,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,r,l)}),(function(e){i("throw",e,r,l)})):t.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return i("throw",e,r,l)}))}l(s.arg)}(a,o,i,r)}))}return i=i?i.then(r,r):r()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=g,l(p,"constructor",g),l(g,"constructor",h),h.displayName=l(g,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,r,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},v(x.prototype),l(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,a,o){void 0===o&&(o=Promise);var r=new x(s(t,n,i,a),o);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},v(p),l(p,r,"Generator"),l(p,a,(function(){return this})),l(p,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return r.type="throw",r.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],r=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(A={exports:{}}),A.exports),I={labelSpace:"90px",fontColor:"#454545",fontSize:"12px",netLineColor:"#dedede",lineColor:"#454545",tickColor:"#454545",tickLength:"3px",netLineMaxCount:34,netLineMinCount:3,netLineSize:1,lineSize:1,tickSize:1,backgroundColor:"#ffffff",tooltip:{enabled:!0,color:"#02121c",lineSize:.5,dashLength:4,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#454545",backGroundAlpha:1,formatter:function(e){return f(new Date(e.value),"yyyy-MM-dd HH:mm:ss")}}},initTimePoint:"now",displayPadding:.1},Z={staticData:[],dynamicData:{enabled:!1,showLoading:!1,stopUserOperateWhenLoading:!1,dataFetchCountPreTime:200,dataFetchCallback:function(){var e=c(U.mark((function e(t,n,i){return U.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()},candleStyles:{candleWidth:"80%",wickWidth:"1px",candleRiseColor:"#7de17c",candleFallColor:"#c85656",wickRiseColor:"#7de17c",wickFallColor:"#c85656",currentPriceTooltip:{enabled:!0,color:"#b9b42c",lineSize:.5,dashLength:8,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#b9b42c",backGroundAlpha:1,formatter:function(e){return(e=e).displayValue}}},viewLastPriceTooltip:{enabled:!0,color:"#b9b42c",lineSize:.5,dashLength:8,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#826abe",backGroundAlpha:.5,formatter:function(e){return(e=e).displayValue}}},volumChart:{enabled:!0,volumeChartHeight:"30%",alpha:.6,riseColor:"#d6dfc5",fallColor:"#c7c7c7",currentPriceTooltip:{enabled:!0,color:"#b9b42c",lineSize:.5,dashLength:8,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#b9b42c",backGroundAlpha:1,formatter:function(e,t){return void 0===t&&(t="en"),e=e,C(Number(e.displayValue),t,5)}}},viewLastPriceTooltip:{enabled:!0,color:"#b9b42c",lineSize:.5,dashLength:8,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#826abe",backGroundAlpha:.5,formatter:function(e,t){return void 0===t&&(t="en"),e=e,C(Number(e.displayValue),t,5)}}}}}},Y={title:"交易对:🚀BNB/USDT🚀这是⚡CandleView⚡组件示例",enableTitle:!0,enableinfo:!0,timeFormat:"1h",width:"auto",height:"500px",backgroundColor:"#fff",resizeDebounceTime:100,language:"zh",timeZone:{dataSourceTimeZone:0,fetchConditionTimeZone:0,displayTimeZone:0},yAxis:{labelSpace:"90px",formatter:function(e){return e.displayValue.toString()},fontColor:"#454545",fontSize:"12px",netLineColor:"#dedede",lineColor:"#454545",tickColor:"#454545",tickLength:"3px",netLineMaxCount:14,netLineMinCount:3,displayPadding:.3,tooltip:{enabled:!0,color:"#02121c",lineSize:.5,dashLength:4,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#454545",backGroundAlpha:1,formatter:function(e){return(e=e).displayValue}}}},xAxis:{labelSpace:"30px",fontColor:"#454545",fontSize:"12px",netLineColor:"#dedede",lineColor:"#454545",tickColor:"#454545",tickLength:"4px",netLineMaxCount:30,netLineMinCount:0,netLineSize:.5,initTimePoint:"now",displayPadding:0,tooltip:{enabled:!0,color:"#02121c",lineSize:.5,dashLength:4,spaceLength:3,label:{fontsize:12,color:"#ffffff",backGroundColor:"#454545",backGroundAlpha:1,formatter:function(e){return f(new Date(e.value),"yyyy-MM-dd HH:mm:ss")}}}},data:Z},H={zh:{timeFormat:{today:"今天",yesterday:"昨天",unitsecond:"秒",unitminute:"分",unithour:"点",unithalfOur:"点半",unitoclock:"点整",unitday:"号",unitdayst:"号",unitdaynd:"号",unitdayrd:"号",thisMonth:"这个月",nextMonth:"上个月",January:"一月份",February:"二月份",March:"三月份",April:"四月份",May:"五月份",June:"六月份",July:"七月份",August:"八月份",September:"九月份",October:"十月份",November:"十一月份",December:"十二月份",year:"年",thisyear:"今年",lastyear:"去年",oneMin:"1分钟",twoMin:"2分钟",threeMin:"3分钟",fiveMin:"5分钟",tenMin:"10分钟",fifteenMin:"15分钟",halfhour:"半小时",oneHour:"1小时",oneday:"1天",oneWeek:"1周",onemonth:"1个月",oneYear:"1年"}},en:{timeFormat:{today:"Today",yesterday:"Yesterday",unitsecond:"sec",unitminute:"min",unithour:"",unithalfOur:" O'clock past half",unitoclock:" O'clock",unitday:"th",unitdayst:"st",unitdaynd:"nd",unitdayrd:"rd",thisMonth:"This month",nextMonth:"Last month",January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec",year:"",thisyear:"This year",lastyear:"Last year",oneMin:"1 Minute",twoMin:"2 Minute",threeMin:"3 Minute",fiveMin:"5 Minute",tenMin:"10 Minute",fifteenMin:"15 Minute",halfhour:"Half Hour",oneHour:"One Hour",oneday:"One Day",oneWeek:"One Week",onemonth:"One Month",oneYear:"One Year"}}},X=function(e){if(void 0===e||0===e)return 0;var t=new Date,n=Math.abs(t.getTimezoneOffset()/60);return"local"===e&&(e=n),36e5*e},W={name:"1min",lang:"oneMin",timeGap:6e4,roundingFunction:function(e,t){var n=new Date(e);return n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+1),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-1),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+1*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-1*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-12e5,end:+new Date+6e5}:{start:+new Date(e)-12e5,end:+new Date(e)+6e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+H[t].timeFormat.unitminute}},_={name:"10min",lang:"tenMin",timeGap:6e5,roundingFunction:function(e,t){var n=new Date(e);return n.getMinutes()>=50?n.setMinutes(50):n.getMinutes()>=40?n.setMinutes(40):n.getMinutes()>=30?n.setMinutes(30):n.getMinutes()>=20?n.setMinutes(20):n.getMinutes()>=10?n.setMinutes(10):n.getMinutes()>=0&&n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+10),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-10),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+10*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-10*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-12e5,end:+new Date+6e6}:{start:+new Date(e)-12e6,end:+new Date(e)+6e6}},formatter:function(e,t,n){return new Date(e).getMinutes()+H[t].timeFormat.unitminute}},B={name:"15min",lang:"fifteenMin",timeGap:9e5,roundingFunction:function(e,t){var n=new Date(e);return n.getMinutes()>=45?n.setMinutes(45):n.getMinutes()>=30?n.setMinutes(30):n.getMinutes()>=15?n.setMinutes(15):n.getMinutes()>=0&&n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+15),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-15),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+15*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-15*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-162e5,end:+new Date+54e5}:{start:+new Date(e)-162e5,end:+new Date(e)+54e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+H[t].timeFormat.unitminute}},G={name:"30min",lang:"halfhour",timeGap:18e5,roundingFunction:function(e,t){var n=new Date(e);return n.getMinutes()>30?n.setMinutes(30):n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+30),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-30),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+30*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-30*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-324e5,end:+new Date+108e5}:{start:+new Date(e)-324e5,end:+new Date(e)+108e5}},formatter:function(e,t,n){var i=new Date(e);return 30===i.getMinutes()?i.getHours()+H[t].timeFormat.unithalfOur:i.getHours()+H[t].timeFormat.unitoclock}},V={name:"1h",lang:"oneHour",timeGap:36e5,roundingFunction:function(e,t){var n=new Date(e);return n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setHours(n.getHours()+1),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setHours(n.getHours()-1),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setHours(i.getHours()+1*t),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setHours(i.getHours()-1*t),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-648e5,end:+new Date+216e5}:{start:+new Date(e)-648e5,end:+new Date(e)+216e5}},formatter:function(e,t,n){return new Date(e).getHours()+H[t].timeFormat.unithour}},R={name:"1d",lang:"oneday",timeGap:864e5,roundingFunction:function(e,t){var n=new Date(e);return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setDate(n.getDate()+1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setDate(n.getDate()-1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setDate(i.getDate()+1*t),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+X(n)},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setDate(i.getDate()-1*t),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+X(n)},getInitTimeScope:function(e){return"now"===e?{start:+new Date-1728e6,end:+new Date+864e6}:{start:+new Date(e)-1728e6,end:+new Date(e)+864e6}},formatter:function(e,t,n){var i=new Date(e);return 1===i.getDate()?i.getDate()+H[t].timeFormat.unitdayst:2===i.getDate()?i.getDate()+H[t].timeFormat.unitdaynd:3===i.getDate()?i.getDate()+H[t].timeFormat.unitdayrd:i.getDate()+H[t].timeFormat.unitday}},q={name:"1m",lang:"onemonth",timeGap:2592e6,roundingFunction:function(e,t){var n=new Date(e);return n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMonth(n.getMonth()+1),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMonth(n.getMonth()-1),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMonth(i.getMonth()+1*t),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+X(n)},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMonth(i.getMonth()-1*t),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+X(n)},getInitTimeScope:function(e){return"now"===e?{start:+new Date-31104e6,end:+new Date+5184e6}:{start:+new Date(e)-31104e6,end:+new Date(e)+5184e6}},formatter:function(e,t,n){switch(new Date(e).getMonth()){case 0:return H[t].timeFormat.January;case 1:return H[t].timeFormat.February;case 2:return H[t].timeFormat.March;case 3:return H[t].timeFormat.April;case 4:return H[t].timeFormat.May;case 5:return H[t].timeFormat.June;case 6:return H[t].timeFormat.July;case 7:return H[t].timeFormat.August;case 8:return H[t].timeFormat.September;case 9:return H[t].timeFormat.October;case 10:return H[t].timeFormat.November;case 11:return H[t].timeFormat.December}}},Q={name:"1y",lang:"oneYear",timeGap:31104e6,roundingFunction:function(e,t){var n=new Date(e);return n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setFullYear(n.getFullYear()+1),n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setFullYear(n.getFullYear()-1),n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()+X(t)},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setFullYear(i.getFullYear()+1*t),i.setMonth(0),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+X(n)},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setFullYear(i.getFullYear()-1*t),i.setMonth(0),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()+X(n)},getInitTimeScope:function(e){return"now"===e?{start:+new Date-93312e6,end:+new Date+93312e6}:{start:+new Date(e)-93312e6,end:+new Date(e)+93312e6}},formatter:function(e,t,n){return new Date(e).getFullYear()+H[t].timeFormat.year}},J={"1min":W,"2min":{name:"2min",lang:"twoMin",timeGap:12e4,roundingFunction:function(e,t){for(var n=new Date(e),i=0,a=0;a<60;a+=3)n.getMinutes()>=a&&(i=a);return n.setMinutes(i),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+2),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-2),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+2*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-2*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-18e5,end:+new Date+18e5}:{start:+new Date(e)-18e5,end:+new Date(e)+18e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+H[t].timeFormat.unitminute}},"3min":{name:"3min",lang:"threeMin",timeGap:18e4,roundingFunction:function(e,t){for(var n=new Date(e),i=0,a=0;a<60;a+=3)n.getMinutes()>=a&&(i=a);return n.setMinutes(i),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+3),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-3),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+3*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-3*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-36e5,end:+new Date+36e5}:{start:+new Date(e)-36e5,end:+new Date(e)+36e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+H[t].timeFormat.unitminute}},"5min":{name:"5min",lang:"fiveMin",timeGap:3e5,roundingFunction:function(e,t){var n=new Date(e);return n.getMinutes()>=55?n.setMinutes(55):n.getMinutes()>=50?n.setMinutes(50):n.getMinutes()>=45?n.setMinutes(45):n.getMinutes()>=40?n.setMinutes(40):n.getMinutes()>=35?n.setMinutes(35):n.getMinutes()>=30?n.setMinutes(30):n.getMinutes()>=25?n.setMinutes(25):n.getMinutes()>=20?n.setMinutes(20):n.getMinutes()>=15?n.setMinutes(15):n.getMinutes()>=10?n.setMinutes(10):n.getMinutes()>=5?n.setMinutes(5):n.getMinutes()>=0&&n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()+5),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setMinutes(n.getMinutes()-5),n.setSeconds(0),n.setMilliseconds(0),n.getTime()},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()+5*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setMinutes(i.getMinutes()-5*t),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},getInitTimeScope:function(e){return"now"===e?{start:+new Date-3e6,end:+new Date+6e5}:{start:+new Date(e)-3e6,end:+new Date(e)+6e5}},formatter:function(e,t,n){return new Date(e).getMinutes()+H[t].timeFormat.unitminute}},"10min":_,"15min":B,"30min":G,"1h":V,"1d":R,"1w":{name:"1w",lang:"oneWeek",timeGap:6048e5,roundingFunction:function(e,t){var n=new Date(e),i=n.getDay(),a=0===i?-6:1-i;return new Date(n.setDate(n.getDate()+a)).getTime()+X(t)},forwardSingleUnit:function(e,t){var n=new Date(e);return n.setDate(n.getDate()+7),n.setHours(0,0,0,0),Math.floor(n.getTime())+X(t)},backwardSingleUnit:function(e,t){var n=new Date(e);return n.setDate(n.getDate()-7),n.setHours(0,0,0,0),Math.floor(n.getTime())+X(t)},forwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setDate(i.getDate()+7*t),i.setHours(0,0,0,0),Math.floor(i.getTime())+X(n)},backwardTimeUnit:function(e,t,n){var i=new Date(e);return i.setDate(i.getDate()-7*t),i.setHours(0,0,0,0),Math.floor(i.getTime())+X(n)},getInitTimeScope:function(e){return"now"===e?{start:+new Date-3024e6,end:+new Date+3024e6}:{start:+new Date(e)-3024e6,end:+new Date(e)+3024e6}},formatter:function(e,t,n){var i=new Date(e);return 1===i.getDate()?i.getDate()+H[t].timeFormat.unitdayst:2===i.getDate()?i.getDate()+H[t].timeFormat.unitdaynd:3===i.getDate()?i.getDate()+H[t].timeFormat.unitdayrd:i.getDate()+H[t].timeFormat.unitday}},"1m":q,"1y":Q},K=function(e,t,n,i){var a=function(t,n){return Number("object"==typeof e[n]||void 0!==i?t[n][i]:t[n])},o=function(){return"1d"===n||"1w"===n||"1m"===n||"1y"===n?t:0};if(0===e.length)return null;var r=[],l=a(e,0),s=a(e,e.length-1),u=s-l,c={};u<36e5&&(c={"1min":W,"5min":B,"10min":_}),u>=36e5&&u<18e6&&(c={"15min":B,"30min":G,"1h":V}),u>=18e6&&u<126e6&&(c={"30min":G,"1h":V}),u>=126e6&&u<1296e6&&(c={"1h":V,"1d":R}),u>=1296e6&&u<4752e6&&(c={"1d":R,"1m":q}),u>=3024e6&&u<31536e6&&(c={"1d":R,"1m":q,"1y":Q}),u>=31536e6&&(c={"1m":q,"1y":Q});var h=function(t){var n={count:0,startIndex:0,step:0},r=t.roundingFunction(s,o()),l=j(e,r,"forEnd",i);if(null===l||-1===l)return n;if(l<=e.length/2)return n.count=1,n.startIndex=l,n.step=1e17,n;var u=t.backwardSingleUnit(a(e,l),o()),c=j(e.slice(0,l),u,"forEnd",i);if(null===c||-1===c)return n.count=1,n.startIndex=l,n.step=1e17,n;var d=l-1-c,h=function(e,t){return(t+=1)>=e?0:Math.floor((e-1)/t)+1}(l+1,d);return n.count=h,n.startIndex=l,n.step=d,n};for(var g in c)if(c.hasOwnProperty(g)&&"1w"!==g&&"2min"!==g&&"3min"!==g){var m=c[g];r.push(d({},h(m),{type:m}))}return r},$=t.createContext({}),ee=function(){return t.useContext($)};function te(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}te('@charset "UTF-8";\r\n.cvcv_container {\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n}\r\n.cvcv_container .infoDisplayLayer {\r\n\ttop: 20px;\r\n\tleft: 20px;\r\n\tposition: absolute;\r\n\tbox-sizing: border-box;\r\n\tfont-size: 26px;\r\n\t-webkit-user-select: none;\r\n\t   -moz-user-select: none;\r\n\t        user-select: none;\r\n\twidth: 80%;\r\n\ttext-wrap: nowrap;\r\n}\r\n.cvcv_container .infoDisplayLayer .title {\r\n\tfont-size: 26px;\r\n\tfont-weight: bold;\r\n\ttext-align: left;\r\n}\r\n.cvcv_container .infoDisplayLayer .info {\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\talign-content: center;\r\n\tline-height: unset;\r\n\theight: unset;\r\n\twidth: 100%;\r\n}\r\n.cvcv_container .infoDisplayLayer .info div {\r\n\tline-height: unset;\r\n\theight: unset;\r\n\tmargin-right: 20px;\r\n\tbackground-color: rgba(255, 255, 255, 0.4901960784);\r\n\tpadding: 5px 10px;\r\n\tborder-radius: 10px;\r\n\talign-items: center;\r\n\talign-content: center;\r\n\t-webkit-backdrop-filter: blur(2px);\r\n\t        backdrop-filter: blur(2px);\r\n}\r\n.cvcv_container .infoDisplayLayer .info div span,\r\n.cvcv_container .infoDisplayLayer .info div label {\r\n\tdisplay: inline-block;\r\n\tfont-size: 12px;\r\n\tfont-weight: 500;\r\n}\r\n.cvcv_container .infoDisplayLayer .info div label {\r\n\tmargin-left: 5px;\r\n\tcolor: #19123d;\r\n\tfont-weight: bold;\r\n}\r\n.cvcv_container .infoDisplayLayer .info div.timetype {\r\n\tbackground-color: #5b88d1;\r\n}\r\n.cvcv_container .infoDisplayLayer .info div.timetype label {\r\n\tmargin-left: 0;\r\n\tcolor: #fff;\r\n\tfont-weight: bold;\r\n}\r\n.cvcv_container canvas {\r\n\tdisplay: block;\r\n}\r\n\r\n/*移动端时使用的样式:竖屏样式*/\r\n@media (orientation: portrait) {\r\n\t.cvcv_container .infoDisplayLayer .title {\r\n\t\tfont-size: 1.625rem;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t.cvcv_container .infoDisplayLayer .info {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-content: center;\r\n\t\tline-height: unset;\r\n\t\theight: unset;\r\n\t\twidth: 100%;\r\n\t}\r\n\t.cvcv_container .infoDisplayLayer .info div {\r\n\t\tline-height: unset;\r\n\t\theight: unset;\r\n\t\tmargin-right: 0.2rem;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.4901960784);\r\n\t\tpadding: 0.3125rem 0.625rem;\r\n\t\tborder-radius: 0.625rem;\r\n\t\t-webkit-backdrop-filter: blur(0.125rem);\r\n\t\t        backdrop-filter: blur(0.125rem);\r\n\t}\r\n\t.cvcv_container .infoDisplayLayer .info div span,\r\n\t.cvcv_container .infoDisplayLayer .info div label {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 0.75rem;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t.cvcv_container .infoDisplayLayer .info div label {\r\n\t\tmargin-left: 0.3125rem;\r\n\t\tcolor: #19123d;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t.cvcv_container .infoDisplayLayer .info div.timetype {\r\n\t\tbackground-color: #5b88d1;\r\n\t}\r\n\t.cvcv_container .infoDisplayLayer .info div.timetype label {\r\n\t\tmargin-left: 0;\r\n\t\tcolor: #fff;\r\n\t\tfont-weight: bold;\r\n\t}\r\n}\r\n');var ne=o.PixiComponent("Rectangle",{create:function(){return new s.Graphics},applyProps:function(e,t,n){var i=Object.assign(!0,re,n),a=ie(i),o=a.x,r=a.y;e.clear(),e.beginFill(i.color||0,i.opacity),e.drawRect(o,r,i.size.width,i.size.height),e.endFill()}}),ie=function(e){var t=e.position.x,n=e.position.y;return"center"===e.alignX&&(t=e.position.x-e.size.width/2),"right"===e.alignX&&(t=e.position.x-e.size.width),"center"===e.alignY&&(n=e.position.y-e.size.height/2),"bottom"===e.alignY&&(n=e.position.y-e.size.height),{x:t,y:n}},ae=o.PixiComponent("KlineBatching",{create:function(){return new s.Graphics},applyProps:function(e,t,n){var i=Object.assign(!0,{isDQuickUpdateing:!1,wickRiseColor:"#000000",wickFallColor:"#000000",candleRiseColor:"#000000",candleFallColor:"#000000",data:[]},n),a=function(e,t){return"rise"===e&&"wick"===t?i.wickRiseColor:"fall"===e&&"wick"===t?i.wickFallColor:"rise"===e&&"candle"===t?i.candleRiseColor:"fall"===e&&"candle"===t?i.candleFallColor:""};e.clear();for(var o,r=m(i.data);!(o=r()).done;){var l={width:(p=o.value).wickWidth,height:p.wickLength},u={x:p.currentTick.cPosition.x,y:p.wickPixPosition.y},c={color:s.utils.string2hex(a(p.candleStateus,"wick")),size:l,position:u,alignX:"center",alignY:"top",opacity:1},d=ie(c),h=d.x,g=d.y;e.beginFill(c.color||0,c.opacity),e.drawRect(h,g,l.width,l.height)}if(!i.isDQuickUpdateing)for(var f,b=m(i.data);!(f=b()).done;){var p,v={width:(p=f.value).candleWidth,height:p.candleLength},x={x:p.currentTick.cPosition.x,y:p.candlePixPosition.y},y={color:s.utils.string2hex(a(p.candleStateus,"wick")),size:v,position:x,alignX:"center",alignY:"top",opacity:1},O=ie(y),w=O.x,k=O.y;e.beginFill(y.color||0,y.opacity),e.drawRect(w,k,v.width,v.height)}e.endFill()}}),oe=o.PixiComponent("VolumeBatching",{create:function(){return new s.Graphics},applyProps:function(e,t,n){var i=Object.assign(!0,{alpha:0,staticMax:0,volumChartPixHeight:0,riseColor:"",fallColor:"",isDQuickUpdateing:!1,linePositionY:0,data:[]},n);e.clear();for(var a,o=m(i.data);!(a=o()).done;){var r=a.value,l=i.volumChartPixHeight*(Number(r.volume)/i.staticMax),u={width:i.isDQuickUpdateing?1:r.candleWidth,height:l},c={x:r.currentTick.cPosition.x,y:i.linePositionY},d={color:s.utils.string2hex("rise"===r.candleStateus?i.riseColor:i.fallColor),size:u,position:c,alignX:"center",alignY:"bottom",opacity:1},h=ie(d),g=h.x,f=h.y;e.beginFill(d.color||0,d.opacity),e.drawRect(g,f,u.width,u.height)}e.endFill()}}),re={color:s.utils.string2hex("#000000"),size:{width:100,height:100},position:{x:0,y:0},alignX:"left",alignY:"top",opacity:1},le=o.PixiComponent("DashedLine",{create:function(){return new s.Graphics},applyProps:function(e,t,n){var i={color:s.utils.string2hex("#000000"),size:1,positionStart:{x:0,y:0},positionStop:{x:0,y:0},dashLength:4,spaceLength:3},a=Object.assign(!0,i,n);e.clear(),e.lineStyle(a.size,a.color),(e=function(e,t,n,i,a,o,r){void 0===o&&(o=5),void 0===r&&(r=5);var l=i-t,s=a-n,u=Math.sqrt(l*l+s*s),c=u/(o+r),d=o/(o+r),h=l/c*d,g=l/c-h,m=s/c*d,f=s/c-m;for(e.moveTo(t,n);u>0;)t+=h,n+=m,(u-=o)<0&&(t=i,n=a),e.lineTo(t,n),e.moveTo(t+=g,n+=f),u-=r;return e.moveTo(i,a),e}(e,a.positionStart.x,a.positionStart.y,a.positionStop.x,a.positionStop.y,4,3)).endFill()}}),se=function(e,i){h(e);var a=ke(),r=t.useState(!1),l=r[0],u=r[1],c=t.useRef(null);t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var d=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ne,{color:s.utils.string2hex(a.hookObjs.xAxisObj.initArgs.backgroundColor),size:{width:a.hookObjs.xAxisObj.data.viewSize.width,height:a.hookObjs.xAxisObj.data.labelSpace},position:a.hookObjs.xAxisObj.data.linePosition,alignX:"left",alignY:"top"}))}),[a.hookObjs.yAxisObj.data.labelSpace,a.hookObjs.yAxisObj.data.viewSize,a.hookObjs.yAxisObj.data.linePosition,a.hookObjs.yAxisObj.data.lineColor,a.hookObjs.yAxisObj.initArgs.backgroundColor]),g=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ne,{color:s.utils.string2hex(a.hookObjs.xAxisObj.initArgs.lineColor),size:{width:a.hookObjs.xAxisObj.data.lineSize.width,height:a.hookObjs.xAxisObj.data.lineSize.size},position:a.hookObjs.xAxisObj.data.linePosition,alignX:"left",alignY:"top"}))}),[a.hookObjs.xAxisObj.data.lineSize.width,a.hookObjs.xAxisObj.data.lineSize.size,a.hookObjs.xAxisObj.data.linePosition,a.hookObjs.xAxisObj.initArgs.lineColor]),f=t.useMemo((function(){return function(){for(var e,t=[],i=0,o=m(a.hookObjs.xAxisObj.data.displayTickArr);!(e=o()).done;){var r=e.value;t.push(n.createElement(n.Fragment,{key:i+"_d"},n.createElement(ne,{color:s.utils.string2hex(r.color),size:{width:r.size,height:r.length},position:r.cPosition,alignX:"center",alignY:"top"}))),i++}return t}()}),[a.hookObjs.xAxisObj.data.displayTickArr]),b=t.useMemo((function(){return function(){for(var e,t,i=[],r=0,l=m(a.hookObjs.xAxisObj.data.displayTickArr);!(e=l()).done;){var u=e.value;i.push(n.createElement(n.Fragment,{key:r+"_a"},n.createElement(o.Text,{anchor:.5,x:u.cPosition.x,y:u.cPosition.y+a.hookObjs.xAxisObj.data.labelSpace/2,text:(t=void 0,void 0!==a.hookObjs.xAxisObj.initArgs.formatter?a.hookObjs.xAxisObj.initArgs.formatter(u):null==(t=u.displayValue)?void 0:t.toString()),resolution:2,style:new s.TextStyle({align:"center",fontSize:a.hookObjs.xAxisObj.initArgs.fontSize,fill:s.utils.string2hex(a.hookObjs.xAxisObj.initArgs.tickColor)})}))),r++}return i}()}),[a.hookObjs.xAxisObj.data.displayTickArr,a.hookObjs.xAxisObj.initArgs]),p=t.useMemo((function(){return a.hookObjs.xAxisObj.initArgs.tooltip.enabled&&null!==a.hookObjs.xAxisObj.data.tooltipState&&a.hookObjs.xAxisObj.data.tooltipIsShow?n.createElement(n.Fragment,null,n.createElement(le,{color:s.utils.string2hex(a.hookObjs.xAxisObj.initArgs.tooltip.color),size:a.hookObjs.xAxisObj.data.tooltipState.size,positionStart:a.hookObjs.xAxisObj.data.tooltipState.position,positionStop:{x:a.hookObjs.xAxisObj.data.tooltipState.position.x,y:a.hookObjs.xAxisObj.data.tooltipState.length},dashLength:a.hookObjs.xAxisObj.initArgs.tooltip.dashLength,spaceLength:a.hookObjs.xAxisObj.initArgs.tooltip.spaceLength}),n.createElement(ne,{color:s.utils.string2hex(null==(e=a.hookObjs.xAxisObj.initArgs.tooltip)||null==(t=e.label)?void 0:t.backGroundColor),size:{width:(null==(i=c.current)?void 0:i.width)+25,height:a.hookObjs.xAxisObj.data.labelSpace},position:a.hookObjs.xAxisObj.data.tooltipState.position.x-(null==(y=c.current)?void 0:y.width)/2-12.5<0?{x:(null==(w=c.current)?void 0:w.width)/2+12.5,y:a.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.cPosition.y}:a.hookObjs.xAxisObj.data.tooltipState.position.x+(null==(O=c.current)?void 0:O.width)/2+12.5>a.hookObjs.xAxisObj.data.lineSize.width?{x:a.hookObjs.xAxisObj.data.lineSize.width-(null==(k=c.current)?void 0:k.width)/2-12.5,y:a.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.cPosition.y}:{x:a.hookObjs.xAxisObj.data.tooltipState.position.x,y:a.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.cPosition.y},alignX:"center",alignY:"top"}),n.createElement(ne,{color:s.utils.string2hex(null==(r=a.hookObjs.xAxisObj.initArgs.tooltip)||null==(l=r.label)?void 0:l.color),size:{width:a.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.size,height:a.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.length},position:{x:a.hookObjs.xAxisObj.data.tooltipState.position.x,y:a.hookObjs.xAxisObj.data.tooltipState.relatedTickItem.cPosition.y},alignX:"center",alignY:"top"}),n.createElement(o.Text,{ref:c,anchor:.5,x:a.hookObjs.xAxisObj.data.tooltipState.position.x-(null==(b=c.current)?void 0:b.width)/2-12.5<0?(null==(v=c.current)?void 0:v.width)/2+12.5:a.hookObjs.xAxisObj.data.tooltipState.position.x+(null==(p=c.current)?void 0:p.width)/2+12.5>a.hookObjs.xAxisObj.data.lineSize.width?a.hookObjs.xAxisObj.data.lineSize.width-(null==(x=c.current)?void 0:x.width)/2-12.5:a.hookObjs.xAxisObj.data.tooltipState.position.x,y:a.hookObjs.xAxisObj.data.tooltipState.length+a.hookObjs.xAxisObj.data.labelSpace/2,text:null==(u=a.hookObjs.xAxisObj.initArgs.tooltip)||null==(d=u.label)?void 0:d.formatter(a.hookObjs.xAxisObj.data.tooltipState.relatedTickItem),resolution:2,style:new s.TextStyle({align:"center",fontSize:null==(h=a.hookObjs.xAxisObj.initArgs.tooltip)||null==(g=h.label)?void 0:g.fontsize,fill:s.utils.string2hex(null==(m=a.hookObjs.xAxisObj.initArgs.tooltip)||null==(f=m.label)?void 0:f.color)})})):null;var e,t,i,r,l,u,d,h,g,m,f,b,p,v,x,y,O,w,k}),[a.hookObjs.xAxisObj.data.tooltipState,a.hookObjs.xAxisObj.data.tooltipIsShow,a.hookObjs.xAxisObj.data.x,a.hookObjs.xAxisObj.initArgs.tooltip]);return n.createElement(n.Fragment,null,d,g,n.createElement(o.Container,{x:a.hookObjs.xAxisObj.data.x},f,b),p)},ue=t.memo(se),ce=function(e,i){var a,r,l,u;h(e);var c=ke(),g=t.useState(!1),m=g[0],f=g[1],b=t.useState(0),p=b[0],v=b[1],x=t.useRef(null),y=t.useRef(null),O=t.useRef(null),w=t.useRef(null);t.useEffect((function(){!1===m&&(f(!0),setTimeout((function(){v(+new Date)}),500))}),[m]),t.useEffect((function(){return function(){f(!1)}}),[]),t.useEffect((function(){return function(){setTimeout((function(){v(+new Date)}),500)}}),[c.initArgs.timeFormat]);var k=t.useMemo((function(){return null!=(e=c.hookObjs.candleObj.initArgs.candleStyles)&&e.viewLastPriceTooltip.enabled&&null!==c.hookObjs.candleObj.data.latestdisplayLatestCandle&&c.hookObjs.candleObj.data.latestdisplayLatestCandle?n.createElement(n.Fragment,null,n.createElement(ne,{color:s.utils.string2hex(null==(t=c.hookObjs.candleObj.initArgs.candleStyles)||null==(i=t.viewLastPriceTooltip)||null==(a=i.label)?void 0:a.backGroundColor),size:{width:c.hookObjs.yAxisObj.data.labelSpace,height:(null==(r=y.current)?void 0:r.height)+10},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestdisplayLatestCandle.position.y},alignX:"left",alignY:"center",opacity:null==(l=c.hookObjs.candleObj.initArgs.candleStyles)||null==(u=l.viewLastPriceTooltip)||null==(d=u.label)?void 0:d.backGroundAlpha}),n.createElement(ne,{color:s.utils.string2hex(null==(h=c.hookObjs.candleObj.initArgs.candleStyles)||null==(g=h.viewLastPriceTooltip)||null==(m=g.label)?void 0:m.color),size:{width:c.hookObjs.yAxisObj.data.tickLength,height:c.hookObjs.candleObj.data.latestdisplayLatestCandle.size},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestdisplayLatestCandle.position.y},alignX:"left",alignY:"center"}),n.createElement(o.Text,{ref:y,anchor:{x:0,y:.6},x:c.hookObjs.yAxisObj.data.linePosition.x+2*c.hookObjs.yAxisObj.data.tickLength,y:c.hookObjs.candleObj.data.latestdisplayLatestCandle.position.y,text:null==(f=c.hookObjs.candleObj.initArgs.candleStyles)||null==(b=f.viewLastPriceTooltip)||null==(p=b.label)?void 0:p.formatter(c.hookObjs.candleObj.data.latestdisplayLatestCandle),resolution:2,style:new s.TextStyle({fontSize:null==(v=c.hookObjs.candleObj.initArgs.candleStyles)||null==(x=v.viewLastPriceTooltip)||null==(O=x.label)?void 0:O.fontsize,fill:s.utils.string2hex(null==(w=c.hookObjs.candleObj.initArgs.candleStyles)||null==(k=w.viewLastPriceTooltip)||null==(j=k.label)?void 0:j.color)})})):null;var e,t,i,a,r,l,u,d,h,g,m,f,b,p,v,x,O,w,k,j}),[d({},c.hookObjs.candleObj.data.latestdisplayLatestCandle),p,d({},null==(a=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:a.viewLastPriceTooltip)]),j=t.useMemo((function(){return null!==c.hookObjs.candleObj.data.latestCandleItem&&null!=(e=c.hookObjs.candleObj.initArgs.candleStyles)&&e.currentPriceTooltip.enabled&&null!==c.hookObjs.candleObj.data.latestCandleToolTip&&c.hookObjs.candleObj.data.latestCandleToolTip?n.createElement(n.Fragment,null,n.createElement(le,{color:s.utils.string2hex(c.hookObjs.candleObj.data.latestCandleItem.candleColor),size:c.hookObjs.candleObj.data.latestCandleToolTip.size,positionStart:c.hookObjs.candleObj.data.latestCandleToolTip.position,positionStop:{x:c.hookObjs.candleObj.data.latestCandleToolTip.length,y:c.hookObjs.candleObj.data.latestCandleToolTip.position.y},dashLength:null==(t=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:t.currentPriceTooltip.dashLength,spaceLength:null==(i=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:i.currentPriceTooltip.spaceLength}),n.createElement(ne,{color:s.utils.string2hex(c.hookObjs.candleObj.data.latestCandleItem.candleColor),size:{width:c.hookObjs.yAxisObj.data.labelSpace,height:(null==(a=x.current)?void 0:a.height)+10},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestCandleToolTip.position.y},alignX:"left",alignY:"center"}),n.createElement(ne,{color:s.utils.string2hex(null==(r=c.hookObjs.candleObj.initArgs.candleStyles)||null==(l=r.currentPriceTooltip)||null==(u=l.label)?void 0:u.color),size:{width:c.hookObjs.yAxisObj.data.tickLength,height:c.hookObjs.candleObj.data.latestCandleToolTip.size},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestCandleToolTip.position.y},alignX:"left",alignY:"center"}),n.createElement(o.Text,{ref:x,anchor:{x:0,y:.6},x:c.hookObjs.yAxisObj.data.linePosition.x+2*c.hookObjs.yAxisObj.data.tickLength,y:c.hookObjs.candleObj.data.latestCandleToolTip.position.y,text:null==(d=c.hookObjs.candleObj.initArgs.candleStyles)||null==(h=d.currentPriceTooltip)||null==(g=h.label)?void 0:g.formatter(c.hookObjs.candleObj.data.latestCandleToolTip),resolution:2,style:new s.TextStyle({fontSize:null==(m=c.hookObjs.candleObj.initArgs.candleStyles)||null==(f=m.currentPriceTooltip)||null==(b=f.label)?void 0:b.fontsize,fill:s.utils.string2hex(null==(p=c.hookObjs.candleObj.initArgs.candleStyles)||null==(v=p.currentPriceTooltip)||null==(y=v.label)?void 0:y.color)})})):null;var e,t,i,a,r,l,u,d,h,g,m,f,b,p,v,y}),[d({},c.hookObjs.candleObj.data.latestCandleToolTip),p,d({},null==(r=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:r.currentPriceTooltip)]),S=t.useMemo((function(){return null!=(e=c.hookObjs.candleObj.initArgs.candleStyles)&&e.volumChart.currentPriceTooltip.enabled&&null!==c.hookObjs.candleObj.data.latestVolumeToolTip&&c.hookObjs.candleObj.data.latestVolumeToolTip?n.createElement(n.Fragment,null,n.createElement(le,{color:s.utils.string2hex(null==(t=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:t.volumChart.currentPriceTooltip.color),size:c.hookObjs.candleObj.data.latestVolumeToolTip.size,positionStart:c.hookObjs.candleObj.data.latestVolumeToolTip.position,positionStop:{x:c.hookObjs.candleObj.data.latestVolumeToolTip.length,y:c.hookObjs.candleObj.data.latestVolumeToolTip.position.y},dashLength:null==(i=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:i.volumChart.currentPriceTooltip.dashLength,spaceLength:null==(a=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:a.volumChart.currentPriceTooltip.spaceLength}),n.createElement(ne,{color:s.utils.string2hex(null==(r=c.hookObjs.candleObj.initArgs.candleStyles)||null==(l=r.volumChart.currentPriceTooltip)||null==(u=l.label)?void 0:u.backGroundColor),size:{width:c.hookObjs.yAxisObj.data.labelSpace,height:(null==(d=O.current)?void 0:d.height)+10},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestVolumeToolTip.position.y},alignX:"left",alignY:"center"}),n.createElement(ne,{color:s.utils.string2hex(null==(h=c.hookObjs.candleObj.initArgs.candleStyles)||null==(g=h.volumChart.currentPriceTooltip)||null==(m=g.label)?void 0:m.color),size:{width:c.hookObjs.yAxisObj.data.tickLength,height:c.hookObjs.candleObj.data.latestVolumeToolTip.size},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestVolumeToolTip.position.y},alignX:"left",alignY:"center"}),n.createElement(o.Text,{ref:O,anchor:{x:0,y:.6},x:c.hookObjs.yAxisObj.data.linePosition.x+2*c.hookObjs.yAxisObj.data.tickLength,y:c.hookObjs.candleObj.data.latestVolumeToolTip.position.y,text:null==(f=c.hookObjs.candleObj.initArgs.candleStyles)||null==(b=f.volumChart.currentPriceTooltip)||null==(p=b.label)?void 0:p.formatter(c.hookObjs.candleObj.data.latestVolumeToolTip,c.initArgs.language),resolution:2,style:new s.TextStyle({fontSize:null==(v=c.hookObjs.candleObj.initArgs.candleStyles)||null==(x=v.volumChart.currentPriceTooltip)||null==(y=x.label)?void 0:y.fontsize,fill:s.utils.string2hex(null==(w=c.hookObjs.candleObj.initArgs.candleStyles)||null==(k=w.volumChart.currentPriceTooltip)||null==(j=k.label)?void 0:j.color)})})):null;var e,t,i,a,r,l,u,d,h,g,m,f,b,p,v,x,y,w,k,j}),[d({},c.hookObjs.candleObj.data.latestVolumeToolTip),p,d({},null==(l=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:l.volumChart.currentPriceTooltip)]),A=t.useMemo((function(){return null!=(e=c.hookObjs.candleObj.initArgs.candleStyles)&&e.volumChart.viewLastPriceTooltip.enabled&&null!==c.hookObjs.candleObj.data.latestdisplayLatestVolume&&c.hookObjs.candleObj.data.latestdisplayLatestVolume?n.createElement(n.Fragment,null,n.createElement(ne,{color:s.utils.string2hex(null==(t=c.hookObjs.candleObj.initArgs.candleStyles)||null==(i=t.volumChart.viewLastPriceTooltip)||null==(a=i.label)?void 0:a.backGroundColor),size:{width:c.hookObjs.yAxisObj.data.labelSpace,height:(null==(r=w.current)?void 0:r.height)+10},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestdisplayLatestVolume.position.y},alignX:"left",alignY:"center",opacity:null==(l=c.hookObjs.candleObj.initArgs.candleStyles)||null==(u=l.volumChart.viewLastPriceTooltip)||null==(d=u.label)?void 0:d.backGroundAlpha}),n.createElement(ne,{color:s.utils.string2hex(null==(h=c.hookObjs.candleObj.initArgs.candleStyles)||null==(g=h.volumChart.viewLastPriceTooltip)||null==(m=g.label)?void 0:m.color),size:{width:c.hookObjs.yAxisObj.data.tickLength,height:c.hookObjs.candleObj.data.latestdisplayLatestVolume.size},position:{x:c.hookObjs.yAxisObj.data.linePosition.x,y:c.hookObjs.candleObj.data.latestdisplayLatestVolume.position.y},alignX:"left",alignY:"center"}),n.createElement(o.Text,{ref:w,anchor:{x:0,y:.6},x:c.hookObjs.yAxisObj.data.linePosition.x+2*c.hookObjs.yAxisObj.data.tickLength,y:c.hookObjs.candleObj.data.latestdisplayLatestVolume.position.y,text:null==(f=c.hookObjs.candleObj.initArgs.candleStyles)||null==(b=f.volumChart.viewLastPriceTooltip)||null==(p=b.label)?void 0:p.formatter(c.hookObjs.candleObj.data.latestdisplayLatestVolume,c.initArgs.language),resolution:2,style:new s.TextStyle({fontSize:null==(v=c.hookObjs.candleObj.initArgs.candleStyles)||null==(x=v.volumChart.viewLastPriceTooltip)||null==(y=x.label)?void 0:y.fontsize,fill:s.utils.string2hex(null==(O=c.hookObjs.candleObj.initArgs.candleStyles)||null==(k=O.volumChart.viewLastPriceTooltip)||null==(j=k.label)?void 0:j.color)})})):null;var e,t,i,a,r,l,u,d,h,g,m,f,b,p,v,x,y,O,k,j}),[d({},c.hookObjs.candleObj.data.latestdisplayLatestVolume),p,d({},null==(u=c.hookObjs.candleObj.initArgs.candleStyles)?void 0:u.volumChart.viewLastPriceTooltip)]);return n.createElement(n.Fragment,null,A,S,k,j)},de=t.memo(ce),he=function(e,i){h(e);var a=ke(),r=t.useState(!1),l=r[0],u=r[1],c=t.useRef(null);t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var d=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ne,{color:s.utils.string2hex(a.hookObjs.yAxisObj.initArgs.backgroundColor),size:{width:a.hookObjs.yAxisObj.data.labelSpace,height:a.hookObjs.yAxisObj.data.viewSize.height},position:a.hookObjs.yAxisObj.data.linePosition,alignX:"left",alignY:"top"}))}),[a.hookObjs.yAxisObj.data.labelSpace,a.hookObjs.yAxisObj.data.viewSize,a.hookObjs.yAxisObj.data.linePosition,a.hookObjs.yAxisObj.data.lineColor,a.hookObjs.yAxisObj.initArgs.backgroundColor]),g=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ne,{color:a.hookObjs.yAxisObj.data.lineColor,size:{width:a.hookObjs.yAxisObj.data.lineSize.size,height:a.hookObjs.yAxisObj.data.viewSize.height},position:a.hookObjs.yAxisObj.data.linePosition,alignX:"left",alignY:"top"}))}),[a.hookObjs.yAxisObj.data.viewSize,a.hookObjs.yAxisObj.data.lineSize,a.hookObjs.yAxisObj.data.linePosition,a.hookObjs.yAxisObj.data.lineColor]),f=t.useMemo((function(){return function(){for(var e,t=[],i=0,o=m(a.hookObjs.yAxisObj.data.displayTickArr);!(e=o()).done;){var r=e.value;t.push(n.createElement(ne,{key:i+"_a",color:s.utils.string2hex(r.color),size:{width:r.length,height:r.size},position:r.cPosition,alignX:"left",alignY:"center"})),i++}return t}()}),[a.hookObjs.yAxisObj.data.displayTickArr]),b=t.useMemo((function(){return function(){for(var e,t=[],i=0,r=m(a.hookObjs.yAxisObj.data.displayTickArr);!(e=r()).done;){var l=e.value;t.push(n.createElement(o.Text,{key:i+"_b",anchor:{x:0,y:.6},x:l.cPosition.x+2*l.length,y:l.cPosition.y,text:a.hookObjs.yAxisObj.initArgs.formatter(l),resolution:2,style:new s.TextStyle({fontSize:a.hookObjs.yAxisObj.initArgs.fontSize,fill:s.utils.string2hex(a.hookObjs.yAxisObj.initArgs.tickColor)})})),i++}return t}()}),[a.hookObjs.yAxisObj.data.displayTickArr,a.hookObjs.yAxisObj.initArgs]),p=t.useMemo((function(){return a.hookObjs.yAxisObj.initArgs.tooltip.enabled&&null!==a.hookObjs.yAxisObj.data.tooltipState&&a.hookObjs.yAxisObj.data.tooltipIsShow?n.createElement(n.Fragment,null,n.createElement(le,{color:s.utils.string2hex(a.hookObjs.yAxisObj.initArgs.tooltip.color),size:a.hookObjs.yAxisObj.data.tooltipState.size,positionStart:a.hookObjs.yAxisObj.data.tooltipState.position,positionStop:{x:a.hookObjs.yAxisObj.data.tooltipState.length,y:a.hookObjs.yAxisObj.data.tooltipState.position.y},dashLength:a.hookObjs.yAxisObj.initArgs.tooltip.dashLength,spaceLength:a.hookObjs.yAxisObj.initArgs.tooltip.spaceLength}),n.createElement(ne,{color:s.utils.string2hex(null==(e=a.hookObjs.yAxisObj.initArgs.tooltip)||null==(t=e.label)?void 0:t.backGroundColor),size:{width:a.hookObjs.yAxisObj.data.labelSpace,height:(null==(i=c.current)?void 0:i.height)+10},position:{x:a.hookObjs.yAxisObj.data.linePosition.x,y:a.hookObjs.yAxisObj.data.tooltipState.position.y},alignX:"left",alignY:"center"}),n.createElement(ne,{color:s.utils.string2hex(null==(r=a.hookObjs.yAxisObj.initArgs.tooltip)||null==(l=r.label)?void 0:l.color),size:{width:a.hookObjs.yAxisObj.data.tickLength,height:a.hookObjs.yAxisObj.initArgs.tickSize},position:{x:a.hookObjs.yAxisObj.data.linePosition.x,y:a.hookObjs.yAxisObj.data.tooltipState.position.y},alignX:"left",alignY:"center"}),n.createElement(o.Text,{ref:c,anchor:{x:0,y:.6},x:a.hookObjs.yAxisObj.data.linePosition.x+2*a.hookObjs.yAxisObj.data.tickLength,y:a.hookObjs.yAxisObj.data.tooltipState.position.y,text:null==(u=a.hookObjs.yAxisObj.initArgs.tooltip)||null==(d=u.label)?void 0:d.formatter(a.hookObjs.yAxisObj.data.tooltipState),resolution:2,style:new s.TextStyle({fontSize:null==(h=a.hookObjs.yAxisObj.initArgs.tooltip)||null==(g=h.label)?void 0:g.fontsize,fill:s.utils.string2hex(null==(m=a.hookObjs.yAxisObj.initArgs.tooltip)||null==(f=m.label)?void 0:f.color)})})):null;var e,t,i,r,l,u,d,h,g,m,f}),[a.hookObjs.yAxisObj.data.tooltipState,a.hookObjs.yAxisObj.data.tooltipIsShow,a.hookObjs.yAxisObj.initArgs.tooltip]);return n.createElement(n.Fragment,null,d,g,f,b,n.createElement(de,null),p)},ge=t.memo(he),me=function(e,i){h(e);var a=ke(),r=t.useState(!1),l=r[0],u=r[1],c=(t.useRef(null),function(e,t){var n,i,o,r,l,s,u,c;return"rise"===e&&"wick"===t?null==(n=a.initArgs.data)||null==(i=n.candleStyles)?void 0:i.wickRiseColor:"fall"===e&&"wick"===t?null==(o=a.initArgs.data)||null==(r=o.candleStyles)?void 0:r.wickFallColor:"rise"===e&&"candle"===t?null==(l=a.initArgs.data)||null==(s=l.candleStyles)?void 0:s.candleRiseColor:"fall"===e&&"candle"===t?null==(u=a.initArgs.data)||null==(c=u.candleStyles)?void 0:c.candleFallColor:""});t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var g={wick:[],candle:[]},f=n.createElement(n.Fragment,null);return a.hookObjs.xAxisObj.data.tickArr.length>120?f=t.useMemo((function(){return n.createElement(n.Fragment,null,n.createElement(ae,Object.assign({},{isDQuickUpdateing:a.hookObjs.candleObj.data.isDQuickUpdateing,wickRiseColor:null==(e=a.initArgs.data)||null==(t=e.candleStyles)?void 0:t.wickRiseColor,wickFallColor:null==(i=a.initArgs.data)||null==(o=i.candleStyles)?void 0:o.wickFallColor,candleRiseColor:null==(r=a.initArgs.data)||null==(l=r.candleStyles)?void 0:l.candleRiseColor,candleFallColor:null==(s=a.initArgs.data)||null==(u=s.candleStyles)?void 0:u.candleFallColor,data:a.hookObjs.candleObj.data.displayCandleData})));var e,t,i,o,r,l,s,u}),[a.hookObjs.candleObj.data.displayCandleData,a.hookObjs.candleObj.data.isDQuickUpdateing,a.initArgs.data.candleStyles.wickFallColor,a.initArgs.data.candleStyles.wickFallColor,a.initArgs.data.candleStyles.candleFallColor,a.initArgs.data.candleStyles.candleRiseColor,d({},a.initArgs.timeZone)]):g=t.useMemo((function(){var e={wick:[],candle:[]};return 0===a.hookObjs.candleObj.data.displayCandleData.length?(e.wick=[],e.candle=[],e):(a.hookObjs.candleObj.data.isDQuickUpdateing||(e.candle=function(){for(var e,t=[],i=m(a.hookObjs.candleObj.data.displayCandleData);!(e=i()).done;){var o=e.value;t.push(n.createElement(ne,{key:o.time+"_candle",color:s.utils.string2hex(c(o.candleStateus,"candle")),size:{width:o.candleWidth,height:o.candleLength},position:{x:o.currentTick.cPosition.x,y:o.candlePixPosition.y},alignX:"center",alignY:"top"}))}return t}()),e.wick=function(){for(var e,t=[],i=m(a.hookObjs.candleObj.data.displayCandleData);!(e=i()).done;){var o=e.value;t.push(n.createElement(ne,o.isEscaped?{key:o.time+"_wick",color:0,size:{width:0,height:0},position:{x:0,y:0},alignX:"center",alignY:"top"}:{key:o.time+"_wick",color:s.utils.string2hex(c(o.candleStateus,"wick")),size:{width:o.wickWidth,height:o.wickLength},position:{x:o.currentTick.cPosition.x,y:o.wickPixPosition.y},alignX:"center",alignY:"top"}))}return t}(),e)}),[a.hookObjs.candleObj.data.displayCandleData,a.hookObjs.candleObj.data.isDQuickUpdateing,a.initArgs.data.candleStyles.wickFallColor,a.initArgs.data.candleStyles.wickFallColor,a.initArgs.data.candleStyles.candleFallColor,a.initArgs.data.candleStyles.candleRiseColor,d({},a.initArgs.timeZone)]),n.createElement(n.Fragment,null,n.createElement(o.Container,{x:a.hookObjs.xAxisObj.data.x,y:a.hookObjs.candleObj.data.miny,scale:{x:1,y:a.hookObjs.candleObj.data.yScale}},a.hookObjs.xAxisObj.data.tickArr.length>120?f:n.createElement(n.Fragment,null,g.wick,g.candle)))},fe=t.memo(me),be=function(e,i){h(e);var a=ke(),r=t.useState(!1),l=r[0],u=r[1];t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var c=t.useMemo((function(){return function(){for(var e,t=[],i=0,o=m(a.hookObjs.xAxisObj.data.netLineArr);!(e=o()).done;){var r=e.value;t.push(n.createElement(n.Fragment,{key:i+"_c"},n.createElement(ne,{color:s.utils.string2hex(a.hookObjs.xAxisObj.initArgs.netLineColor),size:{width:r.size,height:r.length},position:r.cPosition,alignX:"center",alignY:"top"}))),i++}return t}()}),[a.hookObjs.xAxisObj.data.netLineArr,a.hookObjs.xAxisObj.initArgs.netLineColor]),d=t.useMemo((function(){return function(){for(var e,t=[],i=0,o=m(a.hookObjs.yAxisObj.data.netLineArr);!(e=o()).done;){var r=e.value;t.push(n.createElement(n.Fragment,{key:i+"_b"},n.createElement(ne,{color:s.utils.string2hex(a.hookObjs.yAxisObj.initArgs.netLineColor),size:{width:r.length,height:r.size},position:r.cPosition,alignX:"left",alignY:"center"}))),i++}return t}()}),[a.hookObjs.yAxisObj.data.netLineArr,a.hookObjs.yAxisObj.initArgs.netLineColor]);return n.createElement(n.Fragment,null,n.createElement(o.Container,{x:a.hookObjs.xAxisObj.data.x},n.createElement(n.Fragment,null,c)),d)},pe=t.memo(be),ve=function(e,i){h(e);var a=ke(),r=t.useState(!1),l=r[0],u=r[1];t.useEffect((function(){!1===l&&u(!0)}),[l]),t.useEffect((function(){return function(){u(!1)}}),[]);var c=t.useMemo((function(){return a.hookObjs.xAxisObj.data.tickArr.length>120?a.hookObjs.candleObj.initArgs.candleStyles.volumChart.enabled?n.createElement(n.Fragment,null,n.createElement(oe,Object.assign({},{alpha:null==(e=a.hookObjs.candleObj.initArgs.candleStyles)||null==(t=e.volumChart)?void 0:t.alpha,staticMax:1,volumChartPixHeight:a.hookObjs.candleObj.data.volumChartPixHeight,riseColor:a.hookObjs.candleObj.initArgs.candleStyles.volumChart.riseColor,fallColor:a.hookObjs.candleObj.initArgs.candleStyles.volumChart.fallColor,isDQuickUpdateing:a.hookObjs.candleObj.data.isDQuickUpdateing,linePositionY:a.hookObjs.xAxisObj.data.linePosition.y,data:a.hookObjs.candleObj.data.displayCandleData}))):[]:function(){if(!a.hookObjs.candleObj.initArgs.candleStyles.volumChart.enabled)return[];for(var e,t=[],i=function(){var i,o;r=e.value;var l=null==(i=a.hookObjs.candleObj.initArgs.candleStyles)||null==(o=i.volumChart)?void 0:o.alpha,u=a.hookObjs.candleObj.data.volumChartPixHeight*(Number(r.volume)/1);t.push(r.isEscaped?n.createElement(n.Fragment,{key:r.time+"_volume"}):n.createElement(ne,{key:r.time+"_volume",color:s.utils.string2hex("rise"===r.candleStateus?a.hookObjs.candleObj.initArgs.candleStyles.volumChart.riseColor:a.hookObjs.candleObj.initArgs.candleStyles.volumChart.fallColor),opacity:a.hookObjs.candleObj.data.isDQuickUpdateing?1:l,size:{width:a.hookObjs.candleObj.data.isDQuickUpdateing?1:r.candleWidth,height:u},position:{x:r.currentTick.cPosition.x,y:a.hookObjs.xAxisObj.data.linePosition.y},alignX:"center",alignY:"bottom"}))},o=m(a.hookObjs.candleObj.data.displayCandleData);!(e=o()).done;){var r;i()}return t}();var e,t}),[a.hookObjs.candleObj.data.displayCandleData,a.hookObjs.candleObj.data.isDQuickUpdateing,a.hookObjs.candleObj.data.volumChartViewMax,a.hookObjs.candleObj.data.volumChartPixHeight,a.hookObjs.candleObj.initArgs.candleStyles.volumChart.riseColor,a.hookObjs.candleObj.initArgs.candleStyles.volumChart.fallColor,a.hookObjs.candleObj.initArgs.candleStyles.volumChart.alpha,a.hookObjs.candleObj.initArgs.candleStyles.volumChart.enabled]),d=a.hookObjs.candleObj.data.volumChartPixHeight/(a.hookObjs.candleObj.data.volumChartPixHeight*(Number(a.hookObjs.candleObj.data.volumChartViewMax)/1));return n.createElement(n.Fragment,null,n.createElement(o.Container,{x:a.hookObjs.xAxisObj.data.x,y:a.hookObjs.xAxisObj.data.linePosition.y-a.hookObjs.xAxisObj.data.linePosition.y*d,scale:{x:1,y:d}},c))},xe=t.memo(ve),ye=function(e,a){h(e);var o=ee(),r=t.useState(!1),l=r[0],s=r[1];t.useEffect((function(){!1===l&&s(!0)}),[l]),t.useEffect((function(){return function(){s(!1)}}),[]);var u=t.useMemo((function(){return o.initArgs.enableTitle?n.createElement("div",{className:"title"},o.initArgs.title):null}),[o.initArgs.title]),c=t.useMemo((function(){return function(){if(!o.initArgs.enableinfo)return null;if(null!==o.hookObjs.xAxisObj.data.tooltipState&&o.hookObjs.xAxisObj.data.tooltipIsShow&&null!=o.hookObjs.candleObj.data.cursorCandleItem){var e,t,a,r,l=o.hookObjs.xAxisObj.data.tooltipState,s=o.hookObjs.candleObj.data.cursorCandleItem;return n.createElement(n.Fragment,null,n.createElement("div",{className:"info"},n.createElement("div",{className:"timetype"},n.createElement("label",null,H[o.initArgs.language].timeFormat[null==(e=o.hookObjs.xAxisObj.data.currentTimeType)?void 0:e.lang])),n.createElement("div",null,n.createElement("span",null,"Date:"),n.createElement("label",null,null==(t=o.hookObjs.xAxisObj.initArgs.tooltip)||null==(a=t.label)?void 0:a.formatter(l.relatedTickItem)),n.createElement("label",null,"GMT +",null==(r=o.initArgs.timeZone)?void 0:r.displayTimeZone)),n.createElement("div",null,n.createElement("span",null,"Open:"),n.createElement("label",null,D(Number(new i(s.open).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Close:"),n.createElement("label",null,D(Number(new i(s.close).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"High:"),n.createElement("label",null,D(Number(new i(s.high).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Low:"),n.createElement("label",null,D(Number(new i(s.low).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Volume:"),n.createElement("label",null,D(Number(new i(s.volume).toFixed(3)))))))}if(null!==o.hookObjs.candleObj.data.latestCandleItem){var u,c,d,h,g=o.hookObjs.candleObj.data.latestCandleItem;return n.createElement(n.Fragment,null,n.createElement("div",{className:"info"},n.createElement("div",{className:"timetype"},n.createElement("label",null,H[o.initArgs.language].timeFormat[null==(u=o.hookObjs.xAxisObj.data.currentTimeType)?void 0:u.lang])),n.createElement("div",null,n.createElement("span",null,"Date:"),n.createElement("label",null,null==(c=o.hookObjs.xAxisObj.initArgs.tooltip)||null==(d=c.label)?void 0:d.formatter({value:g.time})),n.createElement("label",null,"GMT +",null==(h=o.initArgs.timeZone)?void 0:h.displayTimeZone)),n.createElement("div",null,n.createElement("span",null,"Open:"),n.createElement("label",null,D(Number(new i(g.open).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Current:"),n.createElement("label",null,D(Number(new i(g.close).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"High:"),n.createElement("label",null,D(Number(new i(g.high).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Low:"),n.createElement("label",null,D(Number(new i(g.low).toFixed(3))))),n.createElement("div",null,n.createElement("span",null,"Volume:"),n.createElement("label",null,D(Number(new i(g.volume).toFixed(3)))))))}return null}()}),[o.hookObjs.candleObj.data.latestCandleItem,o.hookObjs.xAxisObj.data.tooltipIsShow,o.hookObjs.candleObj.data.cursorCandleItem]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"infoDisplayLayer"},n.createElement(n.Fragment,null,u,c)))};te('.cdcdv_l_container {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\t-webkit-backdrop-filter: blur(3px);\r\n\t        backdrop-filter: blur(3px);\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-size: 20%;\r\n\tbackground-position: center;\r\n\tbackground-color: rgba(0, 0, 0, 0.6);\r\n\tz-index: 99;\r\n}\r\n.cdcdv_l_container.black {\r\n\tbackground-image: url("data:image/svg+xml,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 style%3D%22margin%3A auto%3B background%3A rgba(255%2C 255%2C 255%2C0)%3B display%3A block%3B shape-rendering%3A auto%3B%22 width%3D%22150px%22 height%3D%22150px%22 viewBox%3D%220 0 100 100%22 preserveAspectRatio%3D%22xMidYMid%22%3E%0D%3Ccircle cx%3D%2250%22 cy%3D%2250%22 r%3D%2230%22 stroke-width%3D%228%22 stroke%3D%22%23ffffff%22 stroke-dasharray%3D%2247.12388980384689 47.12388980384689%22 fill%3D%22none%22 stroke-linecap%3D%22round%22%3E%0D  %3CanimateTransform attributeName%3D%22transform%22 type%3D%22rotate%22 repeatCount%3D%22indefinite%22 dur%3D%221s%22 keyTimes%3D%220%3B1%22 values%3D%220 50 50%3B360 50 50%22%3E%3C%2FanimateTransform%3E%0D%3C%2Fcircle%3E%0D%3C!-- %5Bldio%5D generated by https%3A%2F%2Floading.io%2F --%3E%3C%2Fsvg%3E");\r\n\tbackground-color: rgba(0, 0, 0, 0.6);\r\n}\r\n.cdcdv_l_container.white {\r\n\tbackground-image: url("data:image/svg+xml,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 style%3D%22margin%3A auto%3B background%3A rgba(0%2C 0%2C 0%2C0)%3B display%3A block%3B shape-rendering%3A auto%3B%22 width%3D%22150px%22 height%3D%22150px%22 viewBox%3D%220 0 100 100%22 preserveAspectRatio%3D%22xMidYMid%22%3E%0D%3Ccircle cx%3D%2250%22 cy%3D%2250%22 r%3D%2230%22 stroke-width%3D%228%22 stroke%3D%22%23000%22 stroke-dasharray%3D%2247.12388980384689 47.12388980384689%22 fill%3D%22none%22 stroke-linecap%3D%22round%22%3E%0D  %3CanimateTransform attributeName%3D%22transform%22 type%3D%22rotate%22 repeatCount%3D%22indefinite%22 dur%3D%221s%22 keyTimes%3D%220%3B1%22 values%3D%220 50 50%3B360 50 50%22%3E%3C%2FanimateTransform%3E%0D%3C%2Fcircle%3E%0D%3C!-- %5Bldio%5D generated by https%3A%2F%2Floading.io%2F --%3E%3C%2Fsvg%3E");\r\n\tbackground-color: rgba(255, 255, 255, 0.6);\r\n}\r\n');var Oe=function(e,i){var a,o,r=e.color,l=void 0===r?"black":r,s=ee(),u=t.useState(!1),c=u[0],d=u[1];return t.useEffect((function(){!1===c&&d(!0)}),[c]),t.useEffect((function(){return function(){d(!1)}}),[]),null!=(a=s.initArgs.data)&&null!=(o=a.dynamicData)&&o.showLoading&&s.hookObjs.candleObj.data.isFetchingData?n.createElement(n.Fragment,null,n.createElement("div",{className:"cdcdv_l_container "+l})):s.hookObjs.candleObj.data.isFinishedInit?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,n.createElement("div",{className:"cdcdv_l_container "+l}))},we=t.createContext({}),ke=function(){return t.useContext(we)};exports.CandleView=t.memo((function(e,i){h(e);var a=ee(),s=r(),u=function(){var e=t.useState(!1),n=e[0],i=e[1],a=t.useRef(null),o=t.useRef(null);return t.useEffect((function(){return!1===n&&i(!0),function(){i(!1)}}),[]),function(e,t){void 0===t&&(t=500),0!==t?(a.current=e,null!==o.current&&clearTimeout(o.current),o.current=setTimeout((function(){null!==a.current&&(a.current(),a.current=null)}),t)):e()}}(),d=t.useState(!1),g=d[0],m=d[1],f=t.useState({x:0,y:0}),b=f[0],v=f[1],x=t.useState({x:0,y:0})[1],y=t.useState(!1),O=y[0],w=y[1],k=t.useState({x:0,y:0}),j=k[0],S=k[1],A=t.useState({x:0,y:0}),T=A[0],M=A[1],D=t.useState(0),C=D[0],F=D[1],P=t.useState(!1),E=P[0],N=P[1],z=t.useRef(null),I=t.useRef(null),Z=function(){var e=c(U.mark((function e(){return U.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(),H(),a.funcs.setcanvasBackgroundColor(a.initArgs.backgroundColor);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){"auto"===a.initArgs.height&&(s(z.current).parent().css("overflow","hidden"),s(z.current).parent().css("position","relative")),0===s(z.current).parent().height()&&"auto"===a.initArgs.height&&s(z.current).parent().height(500),0===s(z.current).parent()||"auto"!==a.initArgs.height||0===s(z.current).next().length&&0===s(z.current).prev().length||(a.initArgs.height=500),a.funcs.setcanvasWidth(p(a.initArgs.width,s(z.current).parent().width())),a.funcs.setcanvasHeight(p(a.initArgs.height,s(z.current).parent().height()));var e=s(z.current).offset();v({x:e.left,y:e.top})},H=function(){null!==z.current&&(I.current=new l((function(e){e.length>0&&(0!==a.initArgs.resizeDebounceTime?u((function(){Y()}),a.initArgs.resizeDebounceTime):Y())})),I.current.observe(s(z.current).parent()[0]))},X=function(e){return e.preventDefault()};return t.useEffect((function(){!1===g&&(m(!0),Z(),z.current.addEventListener("wheel",X))}),[g]),t.useEffect((function(){return function(){m(!1),null!==I.current&&(I.current.disconnect(),I.current=null),z.current.removeEventListener("wheel",X)}}),[]),n.createElement(n.Fragment,null,n.createElement("div",{className:"cvcv_container",ref:z,style:{width:a.data.canvasWidth+"px",height:a.data.canvasHeight+"px",backgroundColor:a.initArgs.backgroundColor},onMouseDown:function(e){var t,n;!0===(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&a.hookObjs.candleObj.data.isFetchingData||(w(!0),S({x:e.pageX,y:e.pageY}),x({x:e.pageX-b.x,y:e.pageY-b.y}))},onMouseMove:function(e){var t,n;!0===(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&a.hookObjs.candleObj.data.isFetchingData||(O?a.hookObjs.xAxisObj.funcs.moveContainer(j.x,e.pageX,!1):a.hookObjs.xAxisObj.funcs.tooltipMove({x:e.pageX-b.x,y:e.pageY-b.y},!0),a.hookObjs.yAxisObj.funcs.tooltipMove({x:e.pageX-b.x,y:e.pageY-b.y},!0),x({x:e.pageX-b.x,y:e.pageY-b.y}))},onMouseUp:function(e){var t,n;!0===(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&a.hookObjs.candleObj.data.isFetchingData||(a.hookObjs.xAxisObj.funcs.moveContainer(j.x,e.pageX,!0),w(!1),S({x:0,y:0}),x({x:e.pageX-b.x,y:e.pageY-b.y}))},onWheel:function(e){var t,n;if(!0!==(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)||!a.hookObjs.candleObj.data.isFetchingData){var i="zoomIn";return e.deltaY>0&&(i="zoomOut"),a.hookObjs.xAxisObj.funcs.scale(e.pageX,a.hookObjs.xAxisObj.data.scaleStep,i),e.nativeEvent.stopPropagation(),!1}},onMouseEnter:function(e){var t,n;!0===(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&a.hookObjs.candleObj.data.isFetchingData||(x({x:e.pageX-b.x,y:e.pageY-b.y}),a.hookObjs.xAxisObj.funcs.tooltipMove({x:e.pageX-b.x,y:e.pageY-b.y},!0),a.hookObjs.yAxisObj.funcs.tooltipMove({x:e.pageX-b.x,y:e.pageY-b.y},!0))},onMouseLeave:function(e){var t,n;!0===(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&a.hookObjs.candleObj.data.isFetchingData||(x({x:e.pageX-b.x,y:e.pageY-b.y}),a.hookObjs.xAxisObj.funcs.tooltipMove({x:e.pageX-b.x,y:e.pageY-b.y},!1),a.hookObjs.yAxisObj.funcs.tooltipMove({x:e.pageX-b.x,y:e.pageY-b.y},!1))},onTouchStart:function(e){var t,n;if(!0!==(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)||!a.hookObjs.candleObj.data.isFetchingData){if(void 0!==e.targetTouches[0]&&void 0!==e.targetTouches[1])return N(!0),void F(L({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},{x:e.targetTouches[1].pageX,y:e.targetTouches[1].pageY}));w(!0),S({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}),M({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}),x({x:e.targetTouches[0].pageX-b.x,y:e.targetTouches[0].pageY-b.y})}},onTouchMove:function(e){var t,n;if(!0!==(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)||!a.hookObjs.candleObj.data.isFetchingData)if(void 0===e.targetTouches[0]||void 0===e.targetTouches[1])O?a.hookObjs.xAxisObj.funcs.moveContainer(j.x,e.targetTouches[0].pageX,!1):a.hookObjs.xAxisObj.funcs.tooltipMove({x:e.targetTouches[0].pageX-b.x,y:e.targetTouches[0].pageY-b.y},!0),a.hookObjs.yAxisObj.funcs.tooltipMove({x:e.targetTouches[0].pageX-b.x,y:e.targetTouches[0].pageY-b.y},!0),x({x:e.targetTouches[0].pageX-b.x,y:e.targetTouches[0].pageY-b.y}),M({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}),e.cancelable=!0,e.stopPropagation();else{var i=Math.min(e.targetTouches[0].pageX,e.targetTouches[1].pageX),o=(Math.max(e.targetTouches[0].pageX,e.targetTouches[1].pageX)-i)/2+i,r=L({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},{x:e.targetTouches[1].pageX,y:e.targetTouches[1].pageY});if(Math.abs(r-C)>3){F(L({x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},{x:e.targetTouches[1].pageX,y:e.targetTouches[1].pageY}));var l="zoomIn";r-C<0&&(l="zoomOut"),a.hookObjs.xAxisObj.funcs.scale(o,a.hookObjs.xAxisObj.data.scaleStep,l)}}},onTouchEnd:function(e){var t,n;!0===(null==(t=a.initArgs.data)||null==(n=t.dynamicData)?void 0:n.stopUserOperateWhenLoading)&&a.hookObjs.candleObj.data.isFetchingData||(E?N(!1):(a.hookObjs.xAxisObj.funcs.moveContainer(j.x,T.x,!0),w(!1),S({x:0,y:0}),x({x:T.x-b.x,y:T.y-b.y})))}},n.createElement(Oe,{color:"white"}),n.createElement(ye,null),n.createElement(o.Stage,{options:{backgroundAlpha:0,width:a.data.canvasWidth,height:a.data.canvasHeight,resolution:2},style:{width:a.data.canvasWidth,height:a.data.canvasHeight,backgroundColor:a.initArgs.backgroundColor},width:a.data.canvasWidth,height:a.data.canvasHeight,raf:!1,renderOnComponentChange:!0},n.createElement(we.Provider,{value:a},n.createElement(pe,null),n.createElement(xe,null),n.createElement(fe,null),n.createElement(ue,null),n.createElement(ge,null)))))})),exports.candleViewContext=$,exports.useCandleView=function(e){var n,o=t.useState(a.merge(Y,e)),r=o[0],l=o[1],s=function(e,n,i){z();var a=t.useState(Object.assign(!0,I,e)),o=a[0],r=a[1],l=t.useState(-1),s=l[0],u=l[1],c=t.useState(0),d=c[0],h=c[1],g=t.useState(0),f=g[0],y=g[1],O=t.useState(0),k=O[0],j=O[1],S=t.useState(0),A=S[0],T=S[1],M=t.useState(),D=M[0],C=M[1],F=t.useState(!1),P=F[0],E=F[1],L=t.useState("add"),N=L[0],U=L[1],Z=t.useState(!1),Y=Z[0],H=Z[1],X=t.useState(-1),W=X[0],_=X[1],B=t.useState(-1),G=B[0],V=B[1],R=t.useState(-1),q=R[0],Q=R[1],$=t.useState(-1),ee=$[0],te=$[1],ne=t.useState({}),ie=ne[0],ae=ne[1],oe=t.useState(!1),re=oe[0],le=oe[1],se=t.useState(0),ue=se[0],ce=se[1],de=t.useState(0),he=de[0],ge=de[1],me=t.useState(1)[1],fe=t.useState({start:0,end:0}),be=fe[0],pe=fe[1],ve=t.useState(.1)[0],xe=t.useState(0),ye=xe[0],Oe=xe[1],we=t.useState(null),ke=we[0],je=we[1],Se=t.useState({start:0,end:0}),Ae=Se[0],Te=Se[1],Me=t.useState({start:0,end:0}),De=Me[0],Ce=Me[1],Fe=t.useState({width:0,height:0}),Pe=Fe[0],Ee=Fe[1],Le=t.useState(0)[1],Ne=t.useState({x:0,y:0}),ze=Ne[0],Ue=Ne[1],Ie=t.useState(0),Ze=Ie[0],Ye=Ie[1],He=t.useState({width:0,size:0}),Xe=He[0],We=He[1],_e=t.useState(""),Be=_e[0],Ge=_e[1],Ve=t.useState([]),Re=Ve[0],qe=Ve[1],Qe=t.useState(0),Je=Qe[0],Ke=Qe[1],$e=t.useState(0),et=$e[0],tt=$e[1],nt=t.useState([]),it=nt[0],at=nt[1],ot=t.useState([]),rt=ot[0],lt=ot[1],st=t.useState(0),ut=st[0],ct=st[1],dt=t.useState(0),ht=dt[0],gt=dt[1],mt=t.useState(null),ft=mt[0],bt=mt[1],pt=function(e,t){for(var n=e,a=[e];!((n=ke.backwardSingleUnit(n,i.timeZone.displayTimeZone))<t);)a.unshift(n);return a},vt=function(e,t,n,a,r){if("add"===r||"all"===r){var l=function(e,t){for(var n=e,a=[e];!((n=ke.forwardSingleUnit(n,i.timeZone.displayTimeZone))>t);)a.push(n);return a}(e[e.length-1].value,t.end);if(l.length>1)for(var s=Ot(l,t,n,a),u=1;u<s.length;u++)e.push(s[u])}if("min"===r||"all"===r){var c=pt(e[0].value,t.start);if(c.length>1){var d=Ot(c,t,n,a);for(u=d.length-2;u>-1;u--)e.unshift(d[u])}}var h;if(h=n?xt(t,Xe.width,e.length):{dataWidth:ut,pixWidth:ht,incriseWidth:Xe.width*o.displayPadding},n){for(var g,f=0,b=m(e);!(g=b()).done;){var p=g.value,x=Xe.width+2*h.incriseWidth;p.cPosition={x:v(Number(p.value),t,x)-h.incriseWidth-a,y:ze.y},p.index=f,f++,p=yt(p,t,f,h.dataWidth,h.pixWidth)}e=e.sort((function(e,t){return e.value-t.value}))}return e},xt=function(e,t,n){var i=t*o.displayPadding,a=(e.end-e.start)/n,r=(t+=2*i)/n;return ct(a),gt(r),{dataWidth:a,pixWidth:r,incriseWidth:i}},yt=function(e,t,n,i,a){return e.dataSpace={start:n*i+t.start,end:(n+1)*i+t.start},e.pixSpace={start:e.cPosition.x-a/2,end:e.cPosition.x+a/2},e},Ot=function(e,t,n,i){var a,r=[];a=n?xt(t,Xe.width,e.length):{dataWidth:ut,pixWidth:ht,incriseWidth:Xe.width*o.displayPadding};for(var l,s=0,u=Xe.width+2*a.incriseWidth,c=m(e);!(l=c()).done;){var d=l.value,h={color:o.tickColor,length:p(o.tickLength,Pe.height),size:p(o.tickSize,Pe.height),cPosition:{x:0,y:ze.y},value:d};h.cPosition={x:v(Number(h.value),t,u)-a.incriseWidth-i,y:ze.y},h.index=s,r.push(yt(h,t,s,a.dataWidth,a.pixWidth)),s++}return r},wt=function(e){for(var t=e,n=0;t.length>Je;){for(var i,a=[],o=0,r=m(t);!(i=r()).done;)o%2&&a.push(i.value),o++;t=a,n<1?n+=1:n=2*n+1}return Oe(n),t},kt=function(e){for(var t,n=[],i=m(e);!(t=i()).done;){var a=t.value;n.push({color:o.netLineColor,length:ze.y,size:o.netLineSize,cPosition:{x:a.cPosition.x,y:0},value:a.value})}return n},jt=function(e,t){e=[].concat(e);for(var n,i=[],a=[],r=!1,l=m(t);!(n=l()).done;){var s=n.value;if(r){0!==s.count&&(a=St(e,s));break}s.count>o.netLineMinCount&&s.count<o.netLineMaxCount&&(r=!0,i=St(e,s))}for(var u,c=w(a,"value"),d=[],h=m(i);!(u=h()).done;){var g=u.value;d.push(void 0!==c[g.value]?c[g.value]:g)}return d},St=function(e,t){var n=[],a=t.startIndex,o=e[a];o.displayValue=t.type.formatter(Number(o.value),null==i?void 0:i.language,i.timeZone.displayTimeZone),n.push(o);for(var r=t.count;r>-1&&void 0!==e[a=a-1-t.step];r--)(o=e[a]).displayValue=t.type.formatter(Number(o.value),null==i?void 0:i.language,i.timeZone.displayTimeZone),n.push(o);return n},At=function(e,t,n){var a,r;if((null==ft||!ft.data.isFetchingData||null==i||null==(a=i.data)||null==(r=a.dynamicData)||!r.stopUserOperateWhenLoading)&&Y){var l=Xe.width;l+=l*o.displayPadding*2;var s=t-e,u=t-e,c=u+ue,d="add";s>0&&(d="min"),U(d),s=Math.abs(s);var h=Number((s/l*(Ae.end-Ae.start)).toFixed(0));"min"===d&&(h=0-h);var g,m={start:Ae.start+h,end:Ae.end+h},f=x(it,m),b=vt(f,m,!1,c,u+ue-he>0?"min":"add"),p=K(b,i.timeZone.displayTimeZone,i.timeFormat,"value");if(null===p){var v=x(rt,m);g=(g=0===v.length?wt(b):function(e,t){var n=w(t,"value"),i=0;for(i=n[e[0].value].index;void 0!==t[i=i-1-ye];)e.unshift(t[i]);for(i=n[e[e.length-1].value].index;void 0!==t[i=i+1+ye];)e.unshift(t[i]);return Array.from(new Set(e))}(v,b)).sort((function(e,t){return e.value-t.value}))}else g=jt(b,p);var y=kt(g);Q(+new Date),Ce(m),at(b),qe(y),lt(g),n&&Te(m),_(+new Date)}},Tt=function(e,t,n){var a,o;if((null==ft||!ft.data.isFetchingData||null==i||null==(a=i.data)||null==(o=a.dynamicData)||!o.stopUserOperateWhenLoading)&&!(it.length>2880&&"zoomOut"===n)&&!(it.length<=et&&"zoomIn"===n)&&Y){var r=e/Xe.width,l=1-r,s=Ae,u=s.end-s.start,c={start:u*(r=100*t*r/100),end:u*(l=100*t*l/100)};"zoomIn"===n&&(s={start:s.start+c.start,end:s.end-c.end}),"zoomOut"===n&&(s={start:s.start-c.start,end:s.end+c.end});var d=[].concat(it),h=x(d,s);if(0===h.length)return;var g,m=vt(h,s,!0,0,"all"),f=K(m,i.timeZone.displayTimeZone,i.timeFormat,"value");g=null===f?(g=wt(m)).sort((function(e,t){return e.value-t.value})):jt(m,f);var b=kt(g);me((s.end-s.start)/(be.end-be.start)),Te(s),Ce(s),at(m),qe(b),lt(g),_(+new Date),te(+new Date),ce(0)}},Mt=function(){var e=setTimeout((function(){T(+new Date)}),24);C(e)};return t.useEffect((function(){return!1===P&&(E(!0),Mt()),function(){E(!1),void 0!==typeof D&&(T(0),clearTimeout(D))}}),[]),t.useEffect((function(){0!==A&&(j(d-f),y(d),Mt())}),[A]),t.useEffect((function(){null!==ke&&0===De.start&&0===De.end&&function(){var e=ke.getInitTimeScope(o.initTimePoint);if("local"!==i.timeZone.displayTimeZone){var t=new Date,n=Math.abs(t.getTimezoneOffset()/60);e.start=b(e.start,n,i.timeZone.displayTimeZone),e.end=b(e.end,n,i.timeZone.displayTimeZone)}var a,r=ke.roundingFunction(e.end,i.timeZone.displayTimeZone),l=pt(r,null==e?void 0:e.start),s=e,u=Ot(l,e,!0,0),c=K(u,i.timeZone.displayTimeZone,i.timeFormat,"value");a=null===c?(a=wt(u)).sort((function(e,t){return e.value-t.value})):jt(u,c);var d=kt(a);pe(e),Te(e),Ce((function(){return s})),at(u),qe(d),lt(a),H(!0),V(+new Date)}()}),[ke,De]),t.useEffect((function(){Y&&window.requestAnimationFrame((function(){Tt(Pe.width/2,0,"keep")}))}),[Pe]),t.useEffect((function(){!function(){if(Y&&re){var e,t=ie;if(null===t)return;t.position.x=(null==(e=t.relatedTickItem)?void 0:e.cPosition.x)+he,ae(t)}}()}),[he]),t.useEffect((function(){-1!==s&&Ge(o.lineColor)}),[s]),{data:{currentTimeType:ke,lastTimeScope:Ae,currentTimeScope:De,linePosition:ze,lineSize:Xe,lineColor:Be,netLineMaxCount:Je,netLineArr:Re,netLineMinCount:et,tickArr:it,displayTickArr:rt,isFinishedInit:Y,scaleStep:ve,tooltipState:ie,tooltipIsShow:re,labelSpace:Ze,xAxisUpdateTimeStamp:W,viewSize:Pe,displayTickCommonWidth:ut,displayTickCommonpixWidth:ht,moveAmount:ue,x:he,xAxisUpdateMoveMentTimeStamp:q,xAxisUpdateScaleTimeStamp:ee,mouseSpeedSec:k,moveDirection:N,InitStemp:G},funcs:{setlastTimeScope:Te,setcurrentTimeScope:Ce,setlinePosition:Ue,setlineSize:We,setlineColor:Ge,setnetLineMaxCount:Ke,setnetLineArr:qe,setnetLineMinCount:tt,settickArr:at,setdisplayTickArr:lt,initAxisSates:function(e,t,n,i){Ee({width:t,height:n}),Le(p(i,t)),Ue({x:0,y:n-p(o.labelSpace,n)}),We({width:t-p(i,t),size:o.lineSize}),Ye(p(o.labelSpace,n)),Ge(o.lineColor),Ke(o.netLineMaxCount),tt(o.netLineMinCount),pe({start:0,end:0}),ct(0),gt(0),Te({start:0,end:0}),Ce({start:0,end:0}),at([]),qe([]),lt([]),ge(0),ce(0),je(J[e])},updateAxisSates:function(e,t,n){Ee({width:e,height:t}),Le(p(n,e)),Ue({x:0,y:t-p(o.labelSpace,t)}),We({width:e-p(n,e),size:o.lineSize})},moveAxis:At,moveContainer:function(e,t,n){if(Y){var i=t-e,a=i+ue;h(t),ge(i+ue),n&&ce(a),window.requestAnimationFrame((function(){At(e,t,n)}))}},scale:Tt,tooltipMove:function(e,t){if(Y){var n=e.x;if(n>Xe.width&&(t=!1),le(t),!1===t)return;var i=function(e,t){for(var n=it.slice(),i=0;n.length>1;){var a=n[i=Math.floor(n.length/2)];if(a[t].start<=e&&a[t].end>=e)return a;n=a[t].end<e?n.slice(i+1):n.slice(0,i)}return 1===n.length&&n[0][t].end>=e?n[0]:null}(n-ue,"pixSpace");if(null===i)return void ae(null);var a={position:{x:i.cPosition.x+ue,y:0},length:ze.y,value:i.value,relatedTickItem:i,size:p(o.tooltip.lineSize,Pe.width)};ae(a)}},setx:ge,setcandleObj:bt,setinitArgs:function(e){r(Object.assign(!0,o,e)),u(+new Date)},reGenXAxis:function(){Y&&window.requestAnimationFrame((function(){Tt(Pe.width/2,0,"keep")}))}},initArgs:o}}(r.xAxis,0,r),u=function(e,n){n=n;var a=t.useState(Object.assign(!0,I,e)),o=a[0],r=a[1],l=t.useState(-1),s=l[0],u=l[1],c=t.useState(!1),h=c[0],g=c[1],f=t.useState(!1),b=f[0],v=f[1],x=t.useState(-1),y=x[0],w=x[1],j=t.useState({}),S=j[0],A=j[1],T=t.useState(!1),M=T[0],D=T[1],C=t.useState({start:"0",end:"0"}),F=C[0],P=C[1],E=t.useState("0"),L=E[0],N=E[1],z=t.useState("0"),U=z[0],Z=z[1],Y=t.useState({width:0,height:0}),H=Y[0],X=Y[1],W=t.useState({x:0,y:0}),_=W[0],B=W[1],G=t.useState(0),V=G[0],R=G[1],q=t.useState({height:0,size:0}),Q=q[0],J=q[1],K=t.useState(""),$=K[0],ee=K[1],te=t.useState([]),ne=te[0],ie=te[1],ae=t.useState(0),oe=ae[0],re=ae[1],le=t.useState(0),se=le[0],ue=le[1],ce=t.useState([]),de=ce[0],he=ce[1],ge=t.useState(0),me=ge[0],fe=ge[1],be=function(e){var t=d({},e),n=new i(e.end).minus(e.start).toString(),a=new i(n).times(o.displayPadding);return n=new i(n).plus(a).toString(),t.start=new i(e.start).minus(new i(a).div(2)).toString(),t.end=new i(e.end).plus(new i(a).div(2)).toString(),{dataScope:t,currentDataSpace:n}};return t.useEffect((function(){return!1===h&&g(!0),function(){g(!1)}}),[]),t.useEffect((function(){var e,t,n;"0"!==L&&(t=function(e){for(var t,n,a=[],r=0,l=m(e);!(t=l()).done;){var s=t.value;a.push({index:r,color:o.tickColor,length:p(o.tickLength,H.width),size:o.tickSize,cPosition:{x:_.x,y:(n=Number(new i(s).minus(F.start).div(L).toFixed(18)),Q.height-Q.height*n)},value:s,displayValue:new i(O(s,-18)).toFixed(7)}),r++}return a}(e=function(){for(var e=d({},F),t=[],n={start:e.start,end:e.end},a="10",r="10",l="10",s="8",u=k(n.start,Number(l));;){var c=new i(n.end).minus(u).toString();if(s=new i(c).div(a).toFixed().toString(),!new i(s).gt(o.netLineMaxCount))break;var h=(Number(a)+Number(r)).toString();h.length>a.length&&(r+="0",l+="0",u=k(n.start,Number(l))),a=h}for(var g=0;g<Number(s);g++)t.push(new i(u).plus(new i(a).times(g)).toString());return t}()),n=function(e){for(var t,n,a=[],r=m(e);!(t=r()).done;){var l=t.value;a.push({color:o.netLineColor,length:_.x,size:o.netLineSize,cPosition:{x:0,y:(n=Number(new i(l).minus(F.start).div(L).toFixed(18)),Q.height-Q.height*n)},value:l})}return a}(e),he(t),ie(n),v(!0),w(+new Date))}),[F]),t.useEffect((function(){var e,t;-1!==s&&(X({width:e=H.width,height:t=H.height}),B({x:e-p(o.labelSpace,e),y:0}),J({height:t-p(n.initArgs.labelSpace,t)+1,size:o.lineSize}),R(p(o.labelSpace,t)),fe(p(o.tickLength,e)),ee(o.lineColor),re(o.netLineMaxCount),ue(o.netLineMinCount))}),[s]),{data:{isFinishedInit:b,tooltipState:S,tooltipIsShow:M,currentDataScope:F,currentDataSpace:L,currentDataPositionOfStart:U,viewSize:H,linePosition:_,labelSpace:V,lineColor:$,netLineArr:ne,netLineMaxCount:oe,netLineMinCount:se,displayTickArr:de,lineSize:Q,tickLength:me,yAxisUpdateTimeStamp:y},funcs:{updateAxisSates:function(e,t,a){var r={start:new i(a.start).times(new i(10).exponentiatedBy(18).toFixed()).toFixed(0),end:new i(a.end).times(new i(10).exponentiatedBy(18).toFixed()).toFixed(0)},l=be(r);e===H.width&&t===H.height&&l.dataScope===F||(X({width:e,height:t}),B({x:e-p(o.labelSpace,e),y:0}),J({height:t-p(n.initArgs.labelSpace,t)+1,size:o.lineSize}),R(p(o.labelSpace,t)),P(l.dataScope),N(l.currentDataSpace),Z(new i(a.start).minus("0").toString()),fe(p(o.tickLength,e)),ee(o.lineColor),re(o.netLineMaxCount),ue(o.netLineMinCount))},tooltipMove:function(e,t){var n=e.y;if(n>Q.height&&(t=!1),D(t),!1!==t){var a=1-n/Q.height,r=new i(F.start).plus(new i(L).times(a)).toString(),l={position:{x:0,y:n},length:_.x,value:r,displayValue:new i(O(r,-18)).toFixed(7),relatedTickItem:null,size:p(o.tooltip.lineSize,H.width)};A(l)}},expandDataSpanceEdge:be,expandDataSpanceEdgePIX:function(e){var t=d({},e),n=new i(e.start).minus(e.end).toString(),a=new i(n).times(o.displayPadding);return n=new i(n).plus(a).toString(),t.start=Number(new i(e.start).plus(new i(a).div(2)).toString()),t.end=Number(new i(e.end).minus(new i(a).div(2)).toString()),{dataScope:t,currentDataSpace:n}},setinitArgs:function(e){r(Object.assign(!0,o,e)),u(+new Date)}},initArgs:o}}(r.yAxis,s),h=function(e,n,o,r){n=n,o=o;var l=t.useState(a.merge(Z,e)),s=l[0],u=l[1],h=z(),g=(z(),t.useState(!1)),f=g[0],v=g[1],x=t.useState("")[1],O=t.useState(0),w=O[0],k=O[1],j=t.useState(!0),S=j[0],A=j[1],T=t.useState(-1),D=T[0],C=T[1],F=t.useState(null),P=F[0],E=F[1],L=t.useState(!1),I=L[0],Y=L[1],H=t.useState({start:0,end:0})[1],X=t.useState()[1],W=t.useState()[0],_=(t.useState([]),t.useState(0)[1]),B=t.useState(0)[1],G=t.useState(""),V=G[0],R=G[1],q=t.useState(null),Q=q[0],J=q[1],K=t.useState(!1),$=K[0],ee=K[1],te=t.useState(!1),ne=te[0],ie=te[1],ae=t.useState(!1),oe=ae[0],re=ae[1],le=t.useState(null),se=le[0],ue=le[1],ce=t.useState(null),de=ce[0],he=ce[1],ge=(t.useState(798),t.useState(0)),me=ge[0],fe=ge[1],be=t.useState(0),pe=be[0],ve=be[1],xe=t.useState(!1),ye=xe[0],Oe=xe[1],we=t.useState([]),ke=we[0],je=we[1],Se=t.useState([]),Ae=Se[0],Te=Se[1],Me=t.useState({start:"0",end:"0"}),De=Me[0],Ce=Me[1],Fe=t.useState({start:"0",end:"0"}),Pe=Fe[0],Ee=Fe[1],Le=t.useState(1),Ne=Le[0],ze=Le[1],Ue=t.useState(1)[1],Ie=(t.useState(),t.useState(null)),Ze=Ie[0],Ye=Ie[1],He=t.useState(null),Xe=He[0],We=He[1],_e=t.useState(null),Be=_e[0],Ge=_e[1],Ve=t.useState(null),Re=Ve[0],qe=Ve[1],Qe=t.useState(null),Je=Qe[0],Ke=Qe[1],$e=t.useState({width:0,height:0}),et=$e[0],tt=$e[1],nt=t.useState(-1),it=nt[0],at=nt[1],ot=t.useState(-1),rt=ot[0],lt=ot[1],st=t.useRef({}),ut=t.useRef(!1),ct=t.useRef(!1),dt=(t.useRef(),function(e){if(1===e.length)return"smaller";var t=M(e[1].time)-M(e[0].time),i=n.data.currentTimeType.timeGap;return t===i?"same":t>i?"bigger":"smaller"}),ht=function(e,t){var n=t;return n>Number(e.open)&&(n=Number(e.open)),n>Number(e.close)&&(n=Number(e.close)),n>Number(e.high)&&(n=Number(e.high)),n>Number(e.low)&&(n=Number(e.low)),n},gt=function(e,t){var n=t;return n<Number(e.open)&&(n=Number(e.open)),n<Number(e.close)&&(n=Number(e.close)),n<Number(e.high)&&(n=Number(e.high)),n<Number(e.low)&&(n=Number(e.low)),n},mt=function(e){for(var t={time:-1,open:-1,close:-1,high:-1,low:-1,volume:0},i=e[e.length-1],a={start:"9999999999999999999999",end:"-9999999999999999999999"},o=e.length-1;o>-1;o--){var l=e[o],s=n.data.currentTimeType.roundingFunction(M(l.time),r.timeZone.displayTimeZone);-1!==t.time&&s===t.time||(s!==t.time&&-1!==t.time&&void 0===st.current[t.time]&&(st.current[t.time]=t),t={time:s,open:-1,close:-1,high:"-9999999999999999999999",low:"9999999999999999999999",volume:0}),t.open=l.open,(s<n.data.currentTimeType.roundingFunction(M(i.time),r.timeZone.displayTimeZone)||-1===t.close)&&(t.close=l.close),Number(t.high)<Number(l.high)&&(t.high=l.high),Number(t.low)>Number(l.low)&&(t.low=l.low),a.start=ht(l,Number(a.start)).toString(),a.end=gt(l,Number(a.end)).toString(),t.volume=Number(t.volume)+Number(l.volume),i=l,0===o&&(st.current[t.time]=t)}return a},ft=function(e){for(var t,n={start:"9999999999999999999999",end:"-9999999999999999999999"},i=m(e);!(t=i()).done;){var a=t.value;void 0===st.current[a.time]&&(n.start=ht(a,Number(n.start)).toString(),n.end=gt(a,Number(n.end)).toString(),st.current[a.time]=d({},a))}return n},bt=function(e,t,n){if(Number(e)>Number(t)){if("wick"===n)return s.candleStyles.wickFallColor;if("candle"===n)return s.candleStyles.candleFallColor}return"wick"===n?s.candleStyles.wickRiseColor:"candle"===n?s.candleStyles.candleRiseColor:"#fff"},pt=function(e,t,n){if(Number(e)>Number(t)){if("wick"===n)return"fall";if("candle"===n)return"fall"}return"rise"},vt=function(e,t,i){var a=Number(e.end)-Number(e.start),o=Number(((i-t)/a).toFixed(5));return(n.data.viewSize.height-p(n.initArgs.labelSpace,n.data.viewSize.height))*o},xt=function(e,t){var i=Number(e.end)-Number(e.start),a=Number(((Number(t)-Number(e.start))/i).toFixed(5)),o=n.data.viewSize.height-p(n.initArgs.labelSpace,n.data.viewSize.height);return o-o*a},yt=function(e,t,i){if(void 0===i&&(i=!1),e.candleColor=bt(e.open,e.close,"candle"),e.wickColor=bt(e.open,e.close,"wick"),e.candleStateus=pt(e.open,e.close,"candle"),e.wickStateus=pt(e.open,e.close,"wick"),1==ct.current&&!1===i)e.wickWidth=1.2,e.candlePixPosition={x:0,y:xt(t,Math.max(Number(e.close),Number(e.open)).toString())},e.wickPixPosition={x:0,y:xt(t,e.high.toString())},e.wickLength=vt(t,Number(e.low),Number(e.high));else{try{e.candleWidth=p(s.candleStyles.candleWidth,n.data.displayTickCommonpixWidth),e.wickWidth=p(s.candleStyles.wickWidth,n.data.displayTickCommonpixWidth)}catch(e){}e.candlePixPosition={x:0,y:xt(t,Math.max(Number(e.close),Number(e.open)).toString())},e.wickPixPosition={x:0,y:xt(t,e.high.toString())},e.candleLength=vt(t,Math.min(Number(e.open),Number(e.close)),Math.max(Number(e.open),Number(e.close))),e.candleLength<1&&(e.candleLength=1),e.wickLength=vt(t,Number(e.low),Number(e.high))}try{n.data.lineSize.width-n.data.x-e.currentTick.pixSpace.start>=0&&e.currentTick.pixSpace.end-(n.data.lineSize.width-n.data.x)<=e.currentTick.pixSpace.end-e.currentTick.pixSpace.start&&Ge(e)}catch(e){}return e},Ot=function(e){try{n.data.lineSize.width-n.data.x-e.currentTick.pixSpace.start>=0&&e.currentTick.pixSpace.end-(n.data.lineSize.width-n.data.x)<=e.currentTick.pixSpace.end-e.currentTick.pixSpace.start&&Ge(e)}catch(e){}},wt=function(e){for(var t=[],n={start:"9999999999999999999999",end:"-9999999999999999999999"},i=-99999999999999,a=0;a<e.length;a++){var o=e[a];if(void 0!==st.current[o.value]){var r=st.current[o.value];r.currentTick=o,n.start=ht(r,Number(n.start)).toString(),n.end=gt(r,Number(n.end)).toString(),i<Number(r.volume)&&(i=Number(r.volume)),t.push(r)}}return ve(i),{data:t,scope:n}},kt=function(e){for(var t,n=m(e);!(t=n()).done;){var i=t.value;i.time="local"===r.timeZone.dataSourceTimeZone?M(i.time):b(M(i.time),r.timeZone.dataSourceTimeZone,r.timeZone.displayTimeZone)}return e},jt=function(){var e=c(U.mark((function e(){var t,i,a,o,l,u,c,d,h,g,m;return U.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(st.current).forEach((function(e){return delete st.current[e]})),at(-1),je([]),Te([]),ze(1),Ue(1),k(0),_(0),B(0),A(!0),ue(null),he(null),fe(0),ve(0),Ce({start:"0",end:"0"}),Ee({start:"0",end:"0"}),Ye(null),We(null),Ge(null),qe(null),Ke(null),st.current={},ut.current=!1,ct.current=!1,ie(!1),Y(!1),o=s.dynamicData.dataFetchCountPreTime,l=n.data.currentTimeType.roundingFunction(n.data.currentTimeScope.end,0),u=0,"local"===r.timeZone.displayTimeZone?(c=new Date,d=Math.abs(c.getTimezoneOffset()/60),u=d):u=r.timeZone.displayTimeZone,a=b(l,u,r.timeZone.fetchConditionTimeZone),h=n.data.currentTimeType.backwardTimeUnit(a,o,r.timeZone.displayTimeZone),e.next=35,s.dynamicData.dataFetchCallback(n.data.currentTimeType.name,h,a);case 35:0!==(g=e.sent).length&&(ee(!0),J(kt(g))),m=p(null==(t=s.candleStyles)||null==(i=t.volumChart)?void 0:i.volumeChartHeight,n.data.linePosition.y),fe(m),A(!1),ie(!0);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),St=function(){var e=c(U.mark((function e(t){var i,a,o,l,u;return U.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:return A(!0),i=n.data.currentTimeType.backwardTimeUnit(t,s.dynamicData.dataFetchCountPreTime,0),a=0,"local"===r.timeZone.displayTimeZone?(o=new Date,l=Math.abs(o.getTimezoneOffset()/60),a=l):a=r.timeZone.displayTimeZone,i=b(i,a,r.timeZone.fetchConditionTimeZone),t=b(t,a,r.timeZone.fetchConditionTimeZone),e.next=10,s.dynamicData.dataFetchCallback(n.data.currentTimeType.name,i,t);case 10:if(null!=(u=e.sent)){e.next=14;break}return Y(!0),e.abrupt("return");case 14:if(1!==u.length){e.next=19;break}if(b(Number(u[0].time),r.timeZone.dataSourceTimeZone,r.timeZone.displayTimeZone)!==Ae[0].time){e.next=19;break}return Y(!0),e.abrupt("return");case 19:0!==u.length&&J(kt(u)),A(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),At=function(){var e=wt(n.data.tickArr);if(0===e.data.length)return Te([]),void Tt();requestAnimationFrame((function(){o.funcs.updateAxisSates(n.data.viewSize.width,n.data.viewSize.height,{start:Number(e.scope.start),end:Number(e.scope.end)})})),Ce((function(){return e.scope}));for(var t,i=N(),a=m(e.data);!(t=a()).done;){var r=t.value;(r=yt(r,e.scope)).isEscaped=!1,r.updateTag=i}var l=n.data.linePosition.y/(n.data.linePosition.y*o.initArgs.displayPadding+n.data.linePosition.y),s=n.data.linePosition.y*o.initArgs.displayPadding/2;_(n.data.linePosition.y),k(s*l),B(0),ze(l),Te(e.data),tt(n.data.viewSize),Ee(e.scope),R(i),at(+new Date),H({start:n.data.linePosition.y,end:0}),0!==e.data.length&&Tt(e.data)},Tt=function(){var e=c(U.mark((function e(t){return U.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return");case 2:!s.dynamicData.enabled||ye||I||(void 0!==t?Number(t[0].time)-Number(n.data.tickArr[0].value)>0&&St(Number(t[0].time)):St(Number(n.data.tickArr[n.data.tickArr.length-1].value)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mt=function(){ut.current||(ut.current=!0,n.data.tickArr.length>500?(re(!0),ct.current=!0):(re(!1),ct.current=!1),ct.current?h((function(){At(),n.funcs.setx(0)}),50):(At(),n.funcs.setx(0)),ut.current=!1)},Dt=function(){var e;ut.current||(ut.current=!0,n.data.tickArr.length>500?(re(!0),ct.current=!0):(re(!1),ct.current=!1),e=function(){var e=[].concat(Ae);if(0!==e.length){var t=[];if(n.data.tickArr[0].value!==e[0].time)for(var i=0;void 0!==n.data.tickArr[i]&&n.data.tickArr[i].value<e[0].time;){var a=st.current[n.data.tickArr[i].value];void 0!==a&&(a.currentTick=n.data.tickArr[i],t.push(a)),i++}var o=[];if(n.data.tickArr[n.data.tickArr.length-1].value!==e[e.length-1].time)for(var r=n.data.tickArr.length-1;void 0!==n.data.tickArr[r]&&n.data.tickArr[r].value>e[e.length-1].time;){var l=st.current[n.data.tickArr[r].value];void 0!==l&&(l.currentTick=n.data.tickArr[r],o.unshift(l)),r--}for(var s,u=[].concat(t,e,o),c=y(u,n.data.currentTimeScope),d=Pe,h=m(c);!(s=h()).done;){var g=s.value;void 0===g.updateTag||g.updateTag!==V?(g=yt(g,d)).updateTag=V:Ot(g)}if(u.length>0&&c.length>0){if(Number(u[0].time)<n.data.currentTimeType.backwardTimeUnit(Number(c[0].time),3e3,0)){for(var f=0,b=n.data.currentTimeType.backwardTimeUnit(Number(c[0].time),3e3,0);Number(u[f].time)<b;)f++;u=u.slice(f,u.length)}if(Number(u[u.length-1].time)>n.data.currentTimeType.forwardTimeUnit(Number(c[c.length-1].time),3e3,0)){for(var p=u.length-1,v=n.data.currentTimeType.forwardTimeUnit(Number(c[c.length-1].time),3e3,0);Number(u[p].time)>v;)p--;u=u.slice(0,p+1)}}return Te(u),Tt(u),c}},window.requestAnimationFrame((function(){if(n.data.tickArr.length>120){var t=void 0;n.data.lastTimeScope.start!==n.data.currentTimeScope.start&&n.data.lastTimeScope.end!==n.data.currentTimeScope.end?Math.abs(n.data.mouseSpeedSec)<6&&(t=e()):t=e(),function(e){var t=!1;if(void 0===e?e=[].concat(Ae):t=!0,0!==e.length){var i,a=y(i=e,n.data.currentTimeScope);a=t?e:y(i,n.data.currentTimeScope);for(var r={start:-1e16,end:99999999999999},l={start:"9999999999999999999999",end:"-9999999999999999999999"},s=-99999999999999,u=0;u<a.length;){var c,d,h,g,m,f,b,p,v,x,O,w,j=a[u];ct.current?(Number(null==(c=j.wickPixPosition)?void 0:c.y)+Number(j.wickLength)>r.start&&(r.start=Number(null==(h=j.wickPixPosition)?void 0:h.y)+Number(j.wickLength)),Number(null==(d=j.wickPixPosition)?void 0:d.y)<r.end&&(r.end=Number(null==(g=j.wickPixPosition)?void 0:g.y))):(Math.max(Number(null==(m=j.candlePixPosition)?void 0:m.y)+Number(j.candleLength),Number(null==(f=j.wickPixPosition)?void 0:f.y)+Number(j.wickLength))>r.start&&(r.start=Math.max(Number(null==(v=j.candlePixPosition)?void 0:v.y)+Number(j.candleLength),Number(null==(x=j.wickPixPosition)?void 0:x.y)+Number(j.wickLength))),Math.min(Number(null==(b=j.candlePixPosition)?void 0:b.y),Number(null==(p=j.wickPixPosition)?void 0:p.y))<r.end&&(r.end=Math.min(Number(null==(O=j.candlePixPosition)?void 0:O.y),Number(null==(w=j.wickPixPosition)?void 0:w.y)))),u++}var S=r.start-r.end,A=o.data.lineSize.height/(S+S*o.initArgs.displayPadding),T=S*o.initArgs.displayPadding/2-r.end;_(S+S*o.initArgs.displayPadding),k(T*A),B(r.end),ze(A);for(var M=0;M<a.length;M++){var D=a[M];void 0===D.updateTag||D.updateTag!==V?(D=yt(D,Pe)).updateTag=V:Ot(D),Ot(D),l.start=ht(D,Number(l.start)).toString(),l.end=gt(D,Number(l.end)).toString(),s<Number(D.volume)&&(s=Number(D.volume))}requestAnimationFrame((function(){0!==a.length&&o.funcs.updateAxisSates(et.width,et.height,{start:Number(l.start),end:Number(l.end)})})),Ce(l),ve(s),at(+new Date)}}(t)}else!function(){var e=[].concat(n.data.tickArr),t=d({},n.data.viewSize),i=d({},Pe),a=ct.current,r=wt(e);if(r.data=r.data.sort((function(e,t){return M(e.time)-M(t.time)})),0===r.data.length)return Te([]),void Tt();requestAnimationFrame((function(){o.funcs.updateAxisSates(t.width,t.height,{start:Number(r.scope.start),end:Number(r.scope.end)})}));for(var l,s={start:-1e16,end:99999999999999},u=m(r.data);!(l=u()).done;){var c,h,g,f,b,p,v,x,y,O,w,j,S=l.value;void 0===S.updateTag||S.updateTag!==V||S.time===de.time?(S=yt(S,i)).updateTag=V:Ot(S),a?(Number(null==(c=S.wickPixPosition)?void 0:c.y)+Number(S.wickLength)>s.start&&(s.start=Number(null==(g=S.wickPixPosition)?void 0:g.y)+Number(S.wickLength)),Number(null==(h=S.wickPixPosition)?void 0:h.y)<s.end&&(s.end=Number(null==(f=S.wickPixPosition)?void 0:f.y))):(Math.max(Number(null==(b=S.candlePixPosition)?void 0:b.y)+Number(S.candleLength),Number(null==(p=S.wickPixPosition)?void 0:p.y)+Number(S.wickLength))>s.start&&(s.start=Math.max(Number(null==(y=S.candlePixPosition)?void 0:y.y)+Number(S.candleLength),Number(null==(O=S.wickPixPosition)?void 0:O.y)+Number(S.wickLength))),Math.min(Number(null==(v=S.candlePixPosition)?void 0:v.y),Number(null==(x=S.wickPixPosition)?void 0:x.y))<s.end&&(s.end=Math.min(Number(null==(w=S.candlePixPosition)?void 0:w.y),Number(null==(j=S.wickPixPosition)?void 0:j.y))))}var A=s.start-s.end,T=o.data.lineSize.height/(A+A*o.initArgs.displayPadding),D=A*o.initArgs.displayPadding/2-s.end;_(A+A*o.initArgs.displayPadding),B(s.end),k(D*T),ze(T),Te(r.data),Ce(r.scope),at(+new Date),0!==r.data.length&&Tt(r.data)}()})),ut.current=!1)};return t.useEffect((function(){void 0!==W&&function(e){var t=e.data;if("setdisplayLatestCandle"!==t.message){if("not found"===t.message)return Te([]),void Tt();if("updateYaxis"!==t.message){if("finishWork"===t.message){var i=t.data.orgMaxMiny.start-t.data.orgMaxMiny.end,a=o.data.lineSize.height/(i+i*o.initArgs.displayPadding),r=i*o.initArgs.displayPadding/2-t.data.orgMaxMiny.end;Te(t.data.result.data),Ce(t.data.result.scope),0!==t.data.result.data.length&&(_(i+i*o.initArgs.displayPadding),k(r*a),ze(a),Tt(t.data.result.data),at(+new Date))}}else requestAnimationFrame((function(){o.funcs.updateAxisSates(n.data.viewSize.width,n.data.viewSize.height,{start:Number(t.data.start),end:Number(t.data.end)})}))}else Ge(t.data)}(W)}),[W]),t.useEffect((function(){return!1===f&&(v(!0),Oe(void 0!==s.staticData&&s.staticData.length>0)),function(){v(!1)}}),[]),t.useEffect((function(){var e;!0===f&&n.data.isFinishedInit&&o.data.isFinishedInit&&(x(null==(e=n.data.currentTimeType)?void 0:e.name),X(r.timeZone),ye?function(){var e,t;Object.keys(st.current).forEach((function(e){return delete st.current[e]}));var i=kt(s.staticData.sort((function(e,t){return M(e.time)-M(t.time)}))),a=dt(i);if("bigger"!==a){var r;"smaller"===a?mt(i):ft(i);for(var l,u=wt(n.data.tickArr),c=m(u.data);!(l=c()).done;){var d=l.value;d=yt(d,u.scope)}r=u.scope;var h=p(null==(e=s.candleStyles)||null==(t=e.volumChart)?void 0:t.volumeChartHeight,n.data.linePosition.y);fe(h),je(i),Te(u.data),tt(n.data.viewSize),ie(!0),Ee(u.scope),ze(1),Ue(1),k(0),_(n.data.linePosition.y),B(0),o.funcs.updateAxisSates(n.data.viewSize.width,n.data.viewSize.height,{start:Number(r.start),end:Number(r.end)}),Ce(r),at(+new Date),A(!1)}else console.log("The time interval of the data is inconsistent with the given configured time interval!")}():s.dynamicData.enabled&&jt())}),[n.data.isFinishedInit,o.data.isFinishedInit,n.data.InitStemp]),t.useEffect((function(){-1!==D&&Dt()}),[D]),t.useEffect((function(){-1!==rt&&window.requestAnimationFrame((function(){Mt()}))}),[rt]),t.useEffect((function(){-1!==n.data.xAxisUpdateMoveMentTimeStamp&&Dt()}),[n.data.xAxisUpdateMoveMentTimeStamp]),t.useEffect((function(){-1!==n.data.xAxisUpdateScaleTimeStamp&&window.requestAnimationFrame((function(){Mt()}))}),[n.data.xAxisUpdateScaleTimeStamp]),t.useEffect((function(){-1!==it&&(function(){if(0!==ke.length&&0!==Ae.length){var e;if(null===de)if(ye){var t=n.data.currentTimeType.roundingFunction(M(ke[ke.length-1].time),r.timeZone.displayTimeZone);e=st.current[t]}else e=st.current[Ae[Ae.length-1].time];else e=de;if(void 0!==e){var a,l=d({},e),u=d({},De),c=o.funcs.expandDataSpanceEdge(u);yt(l,c.dataScope),l.updateTag=N();var h={position:{x:0,y:Number(l.close)>Number(l.open)?l.candlePixPosition.y:l.candlePixPosition.y+l.candleLength},length:n.data.lineSize.width,value:l.close,displayValue:new i(l.close).toFixed(7),relatedTickItem:null,size:p(s.candleStyles.currentPriceTooltip.lineSize,et.width)};Ye(h),he(l);var g=me*(Number(l.volume)/pe),m={position:{x:0,y:n.data.linePosition.y-g},length:n.data.lineSize.width,value:l.volume,displayValue:new i(l.volume).toFixed(7),relatedTickItem:null,size:p(null==(a=s.candleStyles.volumChart)?void 0:a.currentPriceTooltip.lineSize,et.width)};We(m)}}}(),function(){if(null!==Be){var e,t=o.funcs.expandDataSpanceEdge(De),a=yt(d({},Be),t.dataScope,!0);if(a.updateTag=N(),!0===a.isEscaped)return;var r={position:{x:0,y:(c=0,Number(a.close)>Number(a.open)?c=a.candlePixPosition.y:(c=a.candlePixPosition.y+a.candleLength,isNaN(c)&&(c=a.candlePixPosition.y+0)),c)},length:n.data.lineSize.width,value:a.close,displayValue:new i(a.close).toFixed(7),relatedTickItem:null,size:p(s.candleStyles.viewLastPriceTooltip.lineSize,et.width)};qe(r);var l=me*(Number(a.volume)/pe),u={position:{x:0,y:n.data.linePosition.y-l},length:n.data.lineSize.width,value:a.volume,displayValue:new i(a.volume).toFixed(7),relatedTickItem:null,size:p(null==(e=s.candleStyles.volumChart)?void 0:e.viewLastPriceTooltip.lineSize,et.width)};Ke(u)}var c}())}),[it]),t.useEffect((function(){!function(){if(n.data.tooltipIsShow&&null!=n.data.tooltipState&&null!=n.data.tooltipState.relatedTickItem){var e=n.data.tooltipState.relatedTickItem.value.toString();ue(st.current[e])}}()}),[n.data.tooltipState]),t.useEffect((function(){null!==P&&-1!==P.time&&!0===ne&&!1===S&&function(){var e,t,i;if(ne&&0!==Ae.length&&null!==P){if(null===de)return null;var a=d({},P),o=a.time,l=a.open,s=a.close,u=a.high,c=a.low,h=a.volume,g=a.isMergeMode;o="local"===r.timeZone.dataSourceTimeZone?Number(new Date(o).getTime()):b(Number(new Date(o).getTime()),r.timeZone.dataSourceTimeZone,r.timeZone.displayTimeZone);var m=null==(e=n.data.currentTimeType)?void 0:e.roundingFunction(Number(o),r.timeZone.displayTimeZone),f=[].concat(Ae),p=d({},de),v=!1;p.isEscaped=!1;var x=!1;if(m===(null==(t=p)?void 0:t.time)){void 0!==g&&!0===g?(p.close=s,p.high=Math.max(Number(p.high),Number(s)),p.low=Math.min(Number(p.low),Number(s)),p.volume=h):(p.time=m,p.close=s,p.high=u,p.low=c,p.volume=h);for(var y=f.length-1;y>-1;y--)if(f[y].time===m){p.currentTick=f[y].currentTick,(p=yt(p,Pe,!0)).updateTag=N(),f[y]=p,x=!0,p.updateTag="0";break}}else{if(!(m>Number(null==(i=p)?void 0:i.time)))return;for(void 0!==g&&!0===g?(p.time=m,p.open=s,p.close=s,p.high=s,p.low=s,p.volume=h):(p.time=m,p.open=l,p.close=s,p.high=u,p.low=c,p.volume=h,p.updateTag="0"),y=n.data.tickArr.length-1;y>-1;y--){var O=n.data.tickArr[y];if(O.value===p.time){p.currentTick=O;break}}(p=yt(p,Pe,!0)).updateTag=N(),n.data.currentTimeScope.start<=m&&n.data.currentTimeScope.end>=m&&(f.push(p),x=!0),v=!0}if(st.current[m]=p,ve(Math.max(Number(p.volume),pe)),he(d({},p)),v)n.data.currentTimeScope.start<=m&&n.data.currentTimeScope.end>=m&&n.funcs.moveContainer(0,0-(p.currentTick.pixSpace.end-p.currentTick.pixSpace.start),!0),x&&Te(f),at(+new Date);else{var w={start:Math.min(Number(De.start),Number(p.close)).toString(),end:Math.max(Number(De.end),Number(p.close)).toString()};w.start!==De.start||w.end!==De.end?C(+new Date):(x&&Te(f),at(+new Date))}}}()}),[P,ne,S]),t.useEffect((function(){null!==Q&&function(e){if(!S&&ne){var t=e.sort((function(e,t){return M(e.time)-M(t.time)})),n=dt(e);if("bigger"!==n){"smaller"===n?mt(t):ft(t);var i=[].concat(t,ke);je(i),$?(ee(!1),lt(+new Date)):C(+new Date)}else console.log("The time interval of the data is inconsistent with the given configured time interval!")}}([].concat(Q))}),[Q]),{data:{displayCandleData:Ae,isDQuickUpdateing:oe,latestCandleToolTip:Ze,latestdisplayLatestCandle:Re,volumChartPixHeight:me,volumChartViewMax:pe,latestVolumeToolTip:Xe,latestdisplayLatestVolume:Je,cursorCandleItem:se,latestCandleItem:de,yScale:Ne,miny:w,updateStamp:it,isFetchingData:S,isFinishedInit:ne},funcs:{updateLatestCandleData:function(e){E(e)},setinitArgs:function(e){u(a.merge(s,e))}},initArgs:s}}(r.data,s,u,r),g=t.useState(!1),f=g[0],j=g[1],S=t.useState(0),A=S[0],T=S[1],D=t.useState(0),C=D[0],F=D[1],P=t.useState("#fff"),E=P[0],L=P[1],H=t.useState({width:0,height:0}),X=H[0],W=H[1];return t.useEffect((function(){return!1===f&&j(!0),function(){j(!1)}}),[]),t.useEffect((function(){s.data.isFinishedInit&&u.data.isFinishedInit&&(s.funcs.setinitArgs(r.xAxis),u.funcs.setinitArgs(r.yAxis),h.funcs.setinitArgs(r.data))}),[r]),t.useEffect((function(){s.funcs.reGenXAxis()}),[r.language]),t.useEffect((function(){var e,t;0===C||0===A||s.data.isFinishedInit?s.funcs.updateAxisSates(A,C,null==(e=r.yAxis)?void 0:e.labelSpace):(s.funcs.initAxisSates(r.timeFormat,A,C,null==(t=r.yAxis)?void 0:t.labelSpace),u.funcs.updateAxisSates(A,C,{start:500,end:600}))}),[A,C]),t.useEffect((function(){var e;s.data.isFinishedInit&&s.funcs.initAxisSates(r.timeFormat,A,C,null==(e=r.yAxis)?void 0:e.labelSpace)}),[r.timeFormat,null==(n=r.yAxis)?void 0:n.labelSpace,null==r?void 0:r.timeZone]),t.useEffect((function(){s.data.isFinishedInit&&W({width:A-p(r.yAxis.labelSpace,A),height:C-p(r.xAxis.labelSpace,C)})}),[s.data.isFinishedInit,A,C]),{initArgs:r,data:{canvasWidth:A,canvasHeight:C,canvasBackgroundColor:E,dataArea:X},funcs:{setcanvasWidth:T,setcanvasHeight:F,setcanvasBackgroundColor:L,setInitArgs:l,appendData:h.funcs.updateLatestCandleData,setTimeFormat:function(e,t,n,i){var a=d({},r);a.timeFormat=e,void 0!==t&&(a.timeZone.dataSourceTimeZone=t),void 0!==n&&(a.timeZone.fetchConditionTimeZone=n),void 0!==i&&(a.timeZone.displayTimeZone=i),l(a)},setLanguage:function(e){var t=d({},r);t.language=e,l(t)},setTimeZone:function(e){var t=d({},r);t.timeZone=Object.assign(!0,t.timeZone,e),l(t)}},hookObjs:{xAxisObj:s,yAxisObj:u,candleObj:h}}},exports.useCandleViewContext=ee;
//# sourceMappingURL=candle-view.cjs.production.min.js.map
